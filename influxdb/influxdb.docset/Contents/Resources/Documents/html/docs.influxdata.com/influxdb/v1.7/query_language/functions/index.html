<!DOCTYPE html><html lang="en"><head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <title> InfluxQL functions | InfluxData Documentation</title>
    <meta name="description" content=""/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
    <link rel="shortcut icon" href="../../../../img/favicon.ico" type="image/x-icon"/>

    
    
    
    
    <meta name="docsearch:latest" content="true"/>
    
    

    
    <meta name="robots" content="index, follow"/>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/>
    <link rel="stylesheet" title="dark-theme" href="../../../../css/docs-default.css"/>
    <link rel="alternate stylesheet" title="light-theme" href="https://docs.influxdata.com/css/docs-light.css"/>

    <link href="https://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,500,400italic,500italic,700,700italic,900,900italic" rel="stylesheet" type="text/css"/>

    <meta name="application-name" content="InfluxData"/>
    <meta name="msapplication-TileColor" content=""/>

    <meta name="msapplication-TileImage" content="https://docs.influxdata.com/img/influx-logo-cubo-dark.png"/>

    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:site" content="@influxdb"/>
    <meta name="twitter:title" content=" InfluxQL functions | InfluxData Documentation"/>
    <meta name="twitter:description" content=""/>

    <meta name="twitter:image" content="https://docs.influxdata.com/img/influx-logo-cubo-dark.png"/>

    <meta property="fb:app_id" content="222112578359661"/>
    <meta property="og:title" content=" InfluxQL functions | InfluxData Documentation"/>
    <meta property="og:description" content=""/>
    <meta property="og:url" content="https://docs.influxdata.com/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://www.influxdata.com/wp-content/uploads/Simple-Kubo.jpg"/>
    <meta property="og:image:width" content="555px"/>
    <meta property="og:image:height" content="290px"/>

    <meta name="Copyright" content="InfluxData Inc."/>

    
    <script type="text/javascript" src="https://script.crazyegg.com/pages/scripts/0080/4231.js" async="async"></script>

    <script src="../../../../js/vendor/js.cookie.js" type="text/javascript"></script>
    <script src="../../../../js/docs-themes.js" type="text/javascript"></script>
    <script src="../../../../js/docs-chronograf-url.js" type="text/javascript"></script>
    <script type="text/javascript">
        set_style_from_cookie();

    </script>
</head>

<body class="docs-theme--influxdb">
    
    <script>
        (function (w, d, s, l, i) {
            w[l] = w[l] || [];
            w[l].push({
                'gtm.start': new Date().getTime(),
                event: 'gtm.js'
            });
            var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s),
                dl = l != 'dataLayer' ? '&l=' + l : '';
            j.async = true;
            j.src =
                'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
            f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-WXRH9C');

    </script>
    
    <nav class="navbar" id="main-nav">
    <div class="navbar--logo">
      <a href="https://www.influxdata.com/" target="_blank" title="Go to InfluxData">
        <span class="icon logo"></span>
        <span class="icon logotype"></span>
      </a>
      <span class="divider"></span>
      <a href="https://docs.influxdata.com/" class="navbar--docs klavika-font" title="Go to Documentation Homepage">Docs</a>
    </div>
    

<div class="navbar--hamburger" id="navbar--hamburger">
    <div class="navbar--hamburger-bar top"></div>
    <div class="navbar--hamburger-bar middle"></div>
    <div class="navbar--hamburger-bar bottom"></div>
</div>
<div class="navbar--product-dropdown" id="navbar--dropdown">
    <div class="navbar--current-product">
      
      
        
        
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
      
        
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
          InfluxDB v1.7
        
      
      
        
        
      
        
      
        
      
        
      
        
      
        
      
        
      
      
        
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
      
        
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
      
        
        
      
        
      
        
      
      
        
        
      
        
      
        
      
        
      
        
      
      
      
    </div>
    <div class="navbar--product-dropdown-caret"><span class="icon arrow-down"></span></div>
</div>
<div class="navbar--product-container" id="navbar--product-container">
    <div class="navbar--dropdown-dismiss" id="navbar--dropdown-dismiss"></div>
    <ul class="navbar--product-menu" id="navbar--product-menu">
        
          
            <li><a class="navbar--product" href="https://docs.influxdata.com/telegraf/v1.13/">Telegraf</a></li>
          
        
          
            <li><a class="navbar--product" href="../../index.html">InfluxDB</a></li>
            <li><a class="navbar--product v2" href="https://v2.docs.influxdata.com" target="_blank">InfluxDB 2.0 <span class="v2-status">beta</span></a></li>
          
        
          
            <li><a class="navbar--product" href="https://docs.influxdata.com/enterprise_influxdb/v1.7/">InfluxDB Enterprise</a></li>
          
        
          
            <li><a class="navbar--product" href="https://docs.influxdata.com/chronograf/v1.7/">Chronograf</a></li>
          
        
          
            <li><a class="navbar--product" href="https://docs.influxdata.com/kapacitor/v1.5/">Kapacitor</a></li>
          
        
          
            <li><a class="navbar--product" href="https://docs.influxdata.com/enterprise_kapacitor/v1.5/">Kapacitor Enterprise</a></li>
          
        
          
            <li><a class="navbar--product" href="https://docs.influxdata.com/flux/v0.50/">Flux</a></li>
          
        
        <li class="navbar--product-divider"></li>
        <li><a class="navbar--product external" href="https://influxdata.com/use-cases/" target="_blank">►&nbsp; See how the TICK Stack is used</a></li>
        <li><a class="navbar--product external" href="https://influxdata.com/pricing/" target="_blank">►&nbsp; Need help using our stack?</a></li>
    </ul>
</div>


    <div class="navbar--search" id="navbar--search">
	
	
	
	
			
				<input class="navbar--search-field" id="algolia-search-input" type="text" accesskey="s" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" dir="auto" placeholder="Search the docs..."/>
			
		
	
	
	
	
	
	
</div>

    <button class="theme-switcher" id="theme-switch-light" onclick="switch_style(&#39;light-theme&#39;);return false;"><span class="icon sun2"></span></button>
<button class="theme-switcher" id="theme-switch-dark" onclick="switch_style(&#39;dark-theme&#39;);return false;"><span class="icon moon"></span></button>


</nav>


<div class="sidebar--toggle" id="sidebar--toggle">InfluxDB Contents</div>
<aside class="sidebar" id="sidebar">
  <section class="sidebar--section">
    <div id="sidebar--ad"></div>

  </section>
  
  
    
      
        <section class="sidebar--section">
          <div class="sidebar--section-title">
            <a class="" href="../../about_the_project/index.html">About the project</a>
          </div>

          
            <ul>
            
              
                <li><a class="sidebar--page" href="../../about_the_project/releasenotes-changelog/index.html">Release notes</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../about_the_project/contributing/index.html">Contributing</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../about_the_project/cla/index.html">Contributor license agreement</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../about_the_project/licenses/index.html">InfluxDB license</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../about_the_project/third-party/index.html">Third party software</a></li>
              
            
            </ul>
          

        </section>
      
        <section class="sidebar--section">
          <div class="sidebar--section-title">
            <a class="" href="../../introduction/index.html">Introduction</a>
          </div>

          
            <ul>
            
              
                <li><a class="sidebar--page" href="../../introduction/downloading/index.html">Downloading</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../introduction/installation/index.html">Installing</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../introduction/getting-started/index.html">Getting started</a></li>
              
            
            </ul>
          

        </section>
      
        <section class="sidebar--section">
          <div class="sidebar--section-title">
            <a class="" href="../../concepts/index.html">Concepts</a>
          </div>

          
            <ul>
            
              
                <li><a class="sidebar--page" href="../../concepts/key_concepts/index.html">Key concepts</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../concepts/glossary/index.html">Glossary</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../concepts/crosswalk/index.html">Comparing InfluxDB to SQL databases</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../concepts/insights_tradeoffs/index.html">InfluxDB design insights and tradeoffs</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../concepts/schema_and_data_layout/index.html">Schema design and data layout</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../concepts/storage_engine/index.html">In-memory indexing with TSM</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../concepts/time-series-index/index.html">Time Series Index (TSI) overview</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../concepts/tsi-details/index.html">Time Series Index (TSI) details</a></li>
              
            
            </ul>
          

        </section>
      
        <section class="sidebar--section">
          <div class="sidebar--section-title">
            <a class="" href="../../administration/index.html">Administration</a>
          </div>

          
            <ul>
            
              
                <li><a class="sidebar--page" href="../../administration/config/index.html">Configuring InfluxDB</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../administration/authentication_and_authorization/index.html">Authentication and authorization</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../administration/upgrading/index.html">Upgrading</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../administration/https_setup/index.html">Enabling HTTPS</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../administration/logs/index.html">Logging and tracing</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../administration/ports/index.html">Ports</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../administration/backup_and_restore/index.html">Backing up and restoring</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../administration/rebuild-tsi-index/index.html">Rebuild the TSI index</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../administration/security/index.html">Managing security</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../administration/server_monitoring/index.html">Server monitoring</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../administration/stability_and_compatibility/index.html">Stability and compatibility</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../administration/subscription-management/index.html">Manage subscriptions</a></li>
              
            
            </ul>
          

        </section>
      
        <section class="sidebar--section">
          <div class="sidebar--section-title">
            <a class="" href="../../tools/index.html">Tools</a>
          </div>

          
            <ul>
            
              
                <li><a class="sidebar--page" href="../../tools/shell/index.html">InfluxDB command line interface (CLI/shell)</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../tools/api/index.html">InfluxDB API reference</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../tools/api_client_libraries/index.html">InfluxDB API client libraries</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../tools/influx_inspect/index.html">Influx Inspect disk utility</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../tools/inch/index.html">InfluxDB inch tool</a></li>
              
            
              
                <li><a class="sidebar--page" href="https://grafana.com/docs/grafana/latest/features/datasources/influxdb/">Grafana graphs and dashboards</a></li>
              
            
            </ul>
          

        </section>
      
        <section class="sidebar--section">
          <div class="sidebar--section-title">
            <a class=" active" href="../index.html">Influx Query Language (InfluxQL)</a>
          </div>

          
            <ul>
            
              
                <li><a class="sidebar--page" href="../data_download/index.html">Sample data</a></li>
              
            
              
                <li><a class="sidebar--page" href="../data_exploration/index.html">Data exploration</a></li>
              
            
              
                <li><a class="sidebar--page" href="../schema_exploration/index.html">Schema exploration</a></li>
              
            
              
                <li><a class="sidebar--page" href="../database_management/index.html">Data management</a></li>
              
            
              
                <li><a class="sidebar--page" href="../continuous_queries/index.html">Continuous Queries</a></li>
              
            
              
                <li><a class="sidebar--page active" href="index.html">Functions</a></li>
              
            
              
                <li><a class="sidebar--page" href="../math_operators/index.html">Mathematical operators</a></li>
              
            
              
                <li><a class="sidebar--page" href="../spec/index.html">InfluxQL reference</a></li>
              
            
            </ul>
          

        </section>
      
        <section class="sidebar--section">
          <div class="sidebar--section-title">
            <a class="" href="../../write_protocols/index.html">Write protocols</a>
          </div>

          
            <ul>
            
              
                <li><a class="sidebar--page" href="../../write_protocols/line_protocol_reference/index.html">InfluxDB line protocol reference</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../write_protocols/line_protocol_tutorial/index.html">InfluxDB line protocol tutorial</a></li>
              
            
            </ul>
          

        </section>
      
        <section class="sidebar--section">
          <div class="sidebar--section-title">
            <a class="" href="../../supported_protocols/index.html">Supported protocols</a>
          </div>

          
            <ul>
            
              
                <li><a class="sidebar--page" href="../../supported_protocols/collectd/index.html">CollectD</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../supported_protocols/graphite/index.html">Graphite</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../supported_protocols/opentsdb/index.html">OpenTSDB</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../supported_protocols/prometheus/index.html">Prometheus</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../supported_protocols/udp/index.html">UDP</a></li>
              
            
            </ul>
          

        </section>
      
        <section class="sidebar--section">
          <div class="sidebar--section-title">
            <a class="" href="../../high_availability/index.html">High availability</a>
          </div>

          
            <ul>
            
              
                <li><a class="sidebar--page" href="../../high_availability/clusters/index.html">Clustering</a></li>
              
            
            </ul>
          

        </section>
      
        <section class="sidebar--section">
          <div class="sidebar--section-title">
            <a class="" href="../../troubleshooting/index.html">Troubleshooting</a>
          </div>

          
            <ul>
            
              
                <li><a class="sidebar--page" href="../../troubleshooting/frequently-asked-questions/index.html">Frequently asked questions (FAQ)</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../troubleshooting/query_management/index.html">Query management</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../troubleshooting/errors/index.html">Error messages</a></li>
              
            
            </ul>
          

        </section>
      
        <section class="sidebar--section">
          <div class="sidebar--section-title">
            <a class="" href="../../additional_resources/additional_resources/index.html">Additional resources</a>
          </div>

          

        </section>
      
        <section class="sidebar--section">
          <div class="sidebar--section-title">
            <a class="" href="index.html">Guides</a>
          </div>

          
            <ul>
            
              
                <li><a class="sidebar--page" href="../../guides/writing_data/index.html">Writing data with the InfluxDB API</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../guides/querying_data/index.html">Querying data with the InfluxDB API</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../guides/downsampling_and_retention/index.html">Downsampling and data retention</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../guides/hardware_sizing/index.html">Hardware sizing guidelines</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../guides/calculating_percentages/index.html">Calculating percentages in a query</a></li>
              
            
            </ul>
          

        </section>
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
  <section class="sidebar--section">
    <div class="sidebar--section-title">
      <a href="https://docs.influxdata.com/influxdb/">InfluxDB versions</a>
    </div>
    <ul>
      
      <li><a class="sidebar--page" href="../../index.html">v1.7</a></li>
      
      <li><a class="sidebar--page" href="https://docs.influxdata.com/influxdb/v1.6/">v1.6</a></li>
      
      <li><a class="sidebar--page" href="https://docs.influxdata.com/influxdb/v1.5/">v1.5</a></li>
      
      <li><a class="sidebar--page" href="https://docs.influxdata.com/influxdb/v1.4/">v1.4</a></li>
      
      <li><a class="sidebar--page" href="https://docs.influxdata.com/influxdb/v1.3/">v1.3</a></li>
      
      <li><a class="sidebar--page" href="https://docs.influxdata.com/influxdb/v1.2/">v1.2</a></li>
      
      <li><a class="sidebar--page" href="https://docs.influxdata.com/influxdb/v1.1/">v1.1</a></li>
      
      <li><a class="sidebar--page" href="https://docs.influxdata.com/influxdb/v1.0/">v1.0</a></li>
      
      <li><a class="sidebar--page" href="https://docs.influxdata.com/influxdb/v0.13/">v0.13</a></li>
      
      <li><a class="sidebar--page" href="https://docs.influxdata.com/influxdb/v0.12/">v0.12</a></li>
      
      <li><a class="sidebar--page" href="https://docs.influxdata.com/influxdb/v0.11/">v0.11</a></li>
      
      <li><a class="sidebar--page" href="https://docs.influxdata.com/influxdb/v0.10/">v0.10</a></li>
      
      <li><a class="sidebar--page" href="https://docs.influxdata.com/influxdb/v0.9/">v0.9</a></li>
      
      <li><a class="sidebar--page" href="https://docs.influxdata.com/influxdb/v0.8/">v0.8</a></li>
      
      <li><a class="sidebar--page" href="https://docs.influxdata.com/influxdb/v0.7/">v0.7</a></li>
      
      <li><a class="sidebar--page" href="https://docs.influxdata.com/influxdb/v0.6/">v0.6</a></li>
      
    </ul>
  </section>
</aside>

<article class="article">
	
	<section class="article-section article-heading">
		<div class="article-content">
			<h1>InfluxQL functions</h1>
		</div>
	</section>
	
	<section class="article-section">
		<div class="article-content">
			

			

<p>Aggregate, select, transform, and predict data with InfluxQL functions.</p>

<h4 id="content">Content</h4>

<ul>
<li><a href="index.html#aggregations">Aggregations</a>

<ul>
<li><a href="index.html#count">COUNT()</a></li>
<li><a href="index.html#distinct">DISTINCT()</a></li>
<li><a href="index.html#integral">INTEGRAL()</a></li>
<li><a href="index.html#mean">MEAN()</a></li>
<li><a href="index.html#median">MEDIAN()</a></li>
<li><a href="index.html#mode">MODE()</a></li>
<li><a href="index.html#spread">SPREAD()</a></li>
<li><a href="index.html#stddev">STDDEV()</a></li>
<li><a href="index.html#sum">SUM()</a></li>
</ul></li>
<li><a href="index.html#selectors">Selectors</a>

<ul>
<li><a href="index.html#bottom">BOTTOM()</a></li>
<li><a href="index.html#first">FIRST()</a></li>
<li><a href="index.html#last">LAST()</a></li>
<li><a href="index.html#max">MAX()</a></li>
<li><a href="index.html#min">MIN()</a></li>
<li><a href="index.html#percentile">PERCENTILE()</a></li>
<li><a href="index.html#sample">SAMPLE()</a></li>
<li><a href="index.html#top">TOP()</a></li>
</ul></li>
<li><a href="index.html#transformations">Transformations</a>

<ul>
<li><a href="index.html#abs">ABS()</a></li>
<li><a href="index.html#acos">ACOS()</a></li>
<li><a href="index.html#asin">ASIN()</a></li>
<li><a href="index.html#atan">ATAN()</a></li>
<li><a href="index.html#atan2">ATAN2()</a></li>
<li><a href="index.html#ceil">CEIL()</a></li>
<li><a href="index.html#cos">COS()</a></li>
<li><a href="index.html#cumulative-sum">CUMULATIVE_SUM()</a></li>
<li><a href="index.html#derivative">DERIVATIVE()</a></li>
<li><a href="index.html#difference">DIFFERENCE()</a></li>
<li><a href="index.html#elapsed">ELAPSED()</a></li>
<li><a href="index.html#exp">EXP()</a></li>
<li><a href="index.html#floor">FLOOR()</a></li>
<li><a href="index.html#histogram">HISTOGRAM()</a></li>
<li><a href="index.html#ln">LN()</a></li>
<li><a href="index.html#log">LOG()</a></li>
<li><a href="index.html#log2">LOG2()</a></li>
<li><a href="index.html#log10">LOG10()</a></li>
<li><a href="index.html#moving-average">MOVING_AVERAGE()</a></li>
<li><a href="index.html#non-negative-derivative">NON_NEGATIVE_DERIVATIVE()</a></li>
<li><a href="index.html#non-negative-difference">NON_NEGATIVE_DIFFERENCE()</a></li>
<li><a href="index.html#pow">POW()</a></li>
<li><a href="index.html#round">ROUND()</a></li>
<li><a href="index.html#sin">SIN()</a></li>
<li><a href="index.html#sqrt">SQRT()</a></li>
<li><a href="index.html#tan">TAN()</a></li>
</ul></li>
<li><a href="index.html#predictors">Predictors</a>

<ul>
<li><a href="index.html#holt-winters">HOLT_WINTERS()</a></li>
</ul></li>
<li><a href="index.html#technical-analysis">Technical Analysis</a>

<ul>
<li><a href="index.html#chande-momentum-oscillator">CHANDE_MOMENTUM_OSCILLATOR()</a></li>
<li><a href="index.html#exponential-moving-average">EXPONENTIAL_MOVING_AVERAGE()</a></li>
<li><a href="index.html#double-exponential-moving-average">DOUBLE_EXPONENTIAL_MOVING_AVERAGE()</a></li>
<li><a href="index.html#kaufmans-efficiency-ratio">KAUFMANS_EFFICIENCY_RATIO()</a></li>
<li><a href="index.html#kaufmans-adaptive-moving-average">KAUFMANS_ADAPTIVE_MOVING_AVERAGE()</a></li>
<li><a href="index.html#triple-exponential-moving-average">TRIPLE_EXPONENTIAL_MOVING_AVERAGE()</a></li>
<li><a href="index.html#triple-exponential-derivative">TRIPLE_EXPONENTIAL_DERIVATIVE()</a></li>
<li><a href="index.html#relative-strength-index">RELATIVE_STRENGTH_INDEX()</a></li>
</ul></li>
<li><a href="index.html#other">Other</a>

<ul>
<li><a href="index.html#sample-data">Sample Data</a></li>
<li><a href="index.html#general-syntax-for-functions">General Syntax for Functions</a></li>
<li><a href="index.html#specify-multiple-functions-in-the-select-clause">Specify Multiple Functions in the SELECT clause</a></li>
<li><a href="index.html#rename-the-output-field-key">Rename the Output Field Key</a></li>
<li><a href="index.html#change-the-values-reported-for-intervals-with-no-data">Change the Values Reported for Intervals with no Data</a></li>
<li><a href="index.html#common-issues-with-functions">Common Issues with Functions</a></li>
</ul></li>
</ul>

<h2 id="aggregations">Aggregations</h2>

<a class="dashingAutolink" name="autolink-0"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/COUNT%28%29"></a><h3 id="count">COUNT()</h3>

<p>Returns the number of non-null <a href="../../concepts/glossary/index.html#field-value">field values</a>.</p>

<h4 id="syntax">Syntax</h4>

<pre><code>SELECT COUNT( [ * | &lt;field_key&gt; | /&lt;regular_expression&gt;/ ] ) [INTO_clause] FROM_clause [WHERE_clause] [GROUP_BY_clause] [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<h5 id="nested-syntax">Nested Syntax</h5>

<pre><code>SELECT COUNT(DISTINCT( [ * | &lt;field_key&gt; | /&lt;regular_expression&gt;/ ] )) [...]
</code></pre>

<p><code>COUNT(field_key)</code><br/>
Returns the number of field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>.</p>

<p><code>COUNT(/regular_expression/)</code><br/>
Returns the number of field values associated with each field key that matches the <a href="../data_exploration/index.html#regular-expressions">regular expression</a>.</p>

<p><code>COUNT(*)</code><br/>
Returns the number of field values associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a>.</p>

<p><code>COUNT()</code> supports all field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.
InfluxQL supports nesting <a href="index.html#distinct"><code>DISTINCT()</code></a> with <code>COUNT()</code>.</p>

<h4 id="examples">Examples</h4>

<h5 id="count-the-field-values-associated-with-a-field-key">Count the field values associated with a field key</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">COUNT</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="k">count</span>
<span class="c1">----                   -----
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">15258</span></code></pre></div>
<p>The query returns the number of non-null field values in the <code>water_level</code> field key in the <code>h2o_feet</code> measurement.</p>

<h5 id="count-the-field-values-associated-with-each-field-key-in-a-measurement">Count the field values associated with each field key in a measurement</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">count_level</span> <span class="n">description</span>   <span class="n">count_water_level</span>
<span class="c1">----                   -----------------------   -----------------
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">15258</span>                     <span class="mi">15258</span></code></pre></div>
<p>The query returns the number of non-null field values for each field key associated with the <code>h2o_feet</code> measurement.
The <code>h2o_feet</code> measurement has two field keys: <code>level description</code> and <code>water_level</code>.</p>

<h5 id="count-the-field-values-associated-with-each-field-key-that-matches-a-regular-expression">Count the field values associated with each field key that matches a regular expression</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">/</span><span class="n">water</span><span class="o">/</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">count_water_level</span>
<span class="c1">----                   -----------------
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">15258</span></code></pre></div>
<p>The query returns the number of non-null field values for every field key that contains the word <code>water</code> in the <code>h2o_feet</code> measurement.</p>

<h5 id="count-the-field-values-associated-with-a-field-key-and-include-several-clauses">Count the field values associated with a field key and include several clauses</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">COUNT</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-17T23:48:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:54:00Z&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">),</span><span class="o">*</span> <span class="n">fill</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span> <span class="k">LIMIT</span> <span class="mi">7</span> <span class="n">SLIMIT</span> <span class="mi">1</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">tags</span><span class="p">:</span> <span class="k">location</span><span class="o">=</span><span class="n">coyote_creek</span>
<span class="n">time</span>                   <span class="k">count</span>
<span class="c1">----                   -----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">17</span><span class="n">T23</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">200</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span></code></pre></div>
<p>The query returns the number of non-null field values in the <code>water_level</code> field key.
It covers the <a href="../data_exploration/index.html#time-syntax">time range</a> between <code>2015-08-17T23:48:00Z</code> and <code>2015-08-18T00:54:00Z</code> and <a href="../data_exploration/index.html#the-group-by-clause">groups</a> results into 12-minute time intervals and per tag.
The query <a href="../data_exploration/index.html#group-by-time-intervals-and-fill">fills</a> empty time intervals with <code>200</code> and <a href="../data_exploration/index.html#the-limit-and-slimit-clauses">limits</a> the number of points and series returned to seven and one.</p>

<h5 id="count-the-distinct-field-values-associated-with-a-field-key">Count the distinct field values associated with a field key</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span><span class="p">(</span><span class="s2">&#34;level description&#34;</span><span class="p">))</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="k">count</span>
<span class="c1">----                   -----
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">4</span></code></pre></div>
<p>The query returns the number of unique field values for the <code>level description</code> field key and the <code>h2o_feet</code> measurement.</p>

<a class="dashingAutolink" name="autolink-1"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/Common%20Issues%20with%20COUNT%28%29"></a><h3 id="common-issues-with-count">Common Issues with COUNT()</h3>

<h4 id="count-and-fill">COUNT() and fill()</h4>

<p>Most InfluxQL functions report <code>null</code> values for time intervals with no data, and
<a href="../data_exploration/index.html#group-by-time-intervals-and-fill"><code>fill(&lt;fill_option&gt;)</code></a>
replaces that <code>null</code> value with the <code>fill_option</code>.
<code>COUNT()</code> reports <code>0</code> for time intervals with no data, and <code>fill(&lt;fill_option&gt;)</code> replaces any <code>0</code> values with the <code>fill_option</code>.</p>

<h5 id="example">Example</h5>

<p>The first query in the codeblock below does not include <code>fill()</code>.
The last time interval has no data so the reported value for that time interval is zero.
The second query includes <code>fill(800000)</code>; it replaces the zero in the last interval with <code>800000</code>.</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">COUNT</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-09-18T21:24:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-09-18T21:54:00Z&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="k">count</span>
<span class="c1">----                   -----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">18</span><span class="n">T21</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">18</span><span class="n">T21</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">18</span><span class="n">T21</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">0</span>

<span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">COUNT</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-09-18T21:24:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-09-18T21:54:00Z&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span> <span class="n">fill</span><span class="p">(</span><span class="mi">800000</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="k">count</span>
<span class="c1">----                   -----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">18</span><span class="n">T21</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">18</span><span class="n">T21</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">18</span><span class="n">T21</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">800000</span></code></pre></div>
<a class="dashingAutolink" name="autolink-2"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/DISTINCT%28%29"></a><h3 id="distinct">DISTINCT()</h3>

<p>Returns the list of unique <a href="../../concepts/glossary/index.html#field-value">field values</a>.</p>

<h4 id="syntax-1">Syntax</h4>

<pre><code>SELECT DISTINCT( [ &lt;field_key&gt; | /&lt;regular_expression&gt;/ ] ) FROM_clause [WHERE_clause] [GROUP_BY_clause] [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<h5 id="nested-syntax-1">Nested Syntax</h5>

<pre><code>SELECT COUNT(DISTINCT( [ &lt;field_key&gt; | /&lt;regular_expression&gt;/ ] )) [...]
</code></pre>

<p><code>DISTINCT(field_key)</code><br/>
Returns the unique field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>.</p>

<p><code>DISTINCT()</code> supports all field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.
InfluxQL supports nesting <code>DISTINCT()</code> with <a href="index.html#count"><code>COUNT()</code></a>.</p>

<h4 id="examples-1">Examples</h4>

<h5 id="list-the-distinct-field-values-associated-with-a-field-key">List the distinct field values associated with a field key</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">DISTINCT</span><span class="p">(</span><span class="s2">&#34;level description&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="k">distinct</span>
<span class="c1">----                   --------
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="k">between</span> <span class="mi">6</span> <span class="k">and</span> <span class="mi">9</span> <span class="n">feet</span>
<span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="n">below</span> <span class="mi">3</span> <span class="n">feet</span>
<span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="k">between</span> <span class="mi">3</span> <span class="k">and</span> <span class="mi">6</span> <span class="n">feet</span>
<span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="k">at</span> <span class="k">or</span> <span class="n">greater</span> <span class="k">than</span> <span class="mi">9</span> <span class="n">feet</span></code></pre></div>
<p>The query returns a tabular list of the unique field values in the <code>level description</code> field key in the <code>h2o_feet</code> measurement.</p>

<h5 id="list-the-distinct-field-values-associated-with-each-field-key-in-a-measurement">List the distinct field values associated with each field key in a measurement</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">DISTINCT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">distinct_level</span> <span class="n">description</span>   <span class="n">distinct_water_level</span>
<span class="c1">----                   --------------------------   --------------------
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="k">between</span> <span class="mi">6</span> <span class="k">and</span> <span class="mi">9</span> <span class="n">feet</span>         <span class="mi">8</span><span class="p">.</span><span class="mi">12</span>
<span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="k">between</span> <span class="mi">3</span> <span class="k">and</span> <span class="mi">6</span> <span class="n">feet</span>         <span class="mi">8</span><span class="p">.</span><span class="mi">005</span>
<span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="k">at</span> <span class="k">or</span> <span class="n">greater</span> <span class="k">than</span> <span class="mi">9</span> <span class="n">feet</span>    <span class="mi">7</span><span class="p">.</span><span class="mi">887</span>
<span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="n">below</span> <span class="mi">3</span> <span class="n">feet</span>                 <span class="mi">7</span><span class="p">.</span><span class="mi">762</span>
<span class="p">[...]</span></code></pre></div>
<p>The query returns a tabular list of the unique field values for each field key in the <code>h2o_feet</code> measurement.
The <code>h2o_feet</code> measurement has two field keys: <code>level description</code> and <code>water_level</code>.</p>

<h4 id="list-the-distinct-field-values-associated-with-a-field-key-and-include-several-clauses">List the distinct field values associated with a field key and include several clauses</h4>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span>  <span class="k">SELECT</span> <span class="k">DISTINCT</span><span class="p">(</span><span class="s2">&#34;level description&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-17T23:48:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:54:00Z&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">),</span><span class="o">*</span> <span class="n">SLIMIT</span> <span class="mi">1</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">tags</span><span class="p">:</span> <span class="k">location</span><span class="o">=</span><span class="n">coyote_creek</span>
<span class="n">time</span>                   <span class="k">distinct</span>
<span class="c1">----                   --------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="k">between</span> <span class="mi">6</span> <span class="k">and</span> <span class="mi">9</span> <span class="n">feet</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="k">between</span> <span class="mi">6</span> <span class="k">and</span> <span class="mi">9</span> <span class="n">feet</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="k">between</span> <span class="mi">6</span> <span class="k">and</span> <span class="mi">9</span> <span class="n">feet</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="k">between</span> <span class="mi">6</span> <span class="k">and</span> <span class="mi">9</span> <span class="n">feet</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="k">between</span> <span class="mi">6</span> <span class="k">and</span> <span class="mi">9</span> <span class="n">feet</span></code></pre></div>
<p>The query returns a tabular list of the unique field values in the <code>level description</code> field key.
It covers the <a href="../data_exploration/index.html#time-syntax">time range</a> between <code>2015-08-17T23:48:00Z</code> and <code>2015-08-18T00:54:00Z</code> and <a href="../data_exploration/index.html#the-group-by-clause">groups</a> results into 12-minute time intervals and per tag.
The query also <a href="../data_exploration/index.html#the-limit-and-slimit-clauses">limits</a> the number of series returned to one.</p>

<h5 id="count-the-distinct-field-values-associated-with-a-field-key-1">Count the distinct field values associated with a field key</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span><span class="p">(</span><span class="s2">&#34;level description&#34;</span><span class="p">))</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="k">count</span>
<span class="c1">----                   -----
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">4</span></code></pre></div>
<p>The query returns the number of unique field values in the <code>level description</code> field key and the <code>h2o_feet</code> measurement.</p>

<a class="dashingAutolink" name="autolink-3"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/Common%20Issues%20with%20DISTINCT%28%29"></a><h3 id="common-issues-with-distinct">Common Issues with DISTINCT()</h3>

<h4 id="distinct-and-the-into-clause">DISTINCT() and the INTO clause</h4>

<p>Using <code>DISTINCT()</code> with the <a href="../data_exploration/index.html#the-into-clause"><code>INTO</code> clause</a> can cause InfluxDB to overwrite points in the destination measurement.
<code>DISTINCT()</code> often returns several results with the same timestamp; InfluxDB assumes <a href="../../concepts/glossary/index.html#point">points</a> with the same <a href="../../concepts/glossary/index.html#series">series</a> and timestamp are duplicate points and simply overwrites any duplicate point with the most recent point in the destination measurement.</p>

<h5 id="example-1">Example</h5>

<p>The first query in the codeblock below uses the <code>DISTINCT()</code> function and returns four results.
Notice that each result has the same timestamp.
The second query adds an <code>INTO</code> clause to the initial query and writes the query results to the <code>distincts</code> measurement.
The last query in the code block selects all the data in the <code>distincts</code> measurement.</p>

<p>The last query returns one point because the four initial results are duplicate points; they belong to the same series and have the same timestamp.
When the system encounters duplicate points, it simply overwrites the previous point with the most recent point.</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span>  <span class="k">SELECT</span> <span class="k">DISTINCT</span><span class="p">(</span><span class="s2">&#34;level description&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="k">distinct</span>
<span class="c1">----                   --------
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="n">below</span> <span class="mi">3</span> <span class="n">feet</span>
<span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="k">between</span> <span class="mi">6</span> <span class="k">and</span> <span class="mi">9</span> <span class="n">feet</span>
<span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="k">between</span> <span class="mi">3</span> <span class="k">and</span> <span class="mi">6</span> <span class="n">feet</span>
<span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="k">at</span> <span class="k">or</span> <span class="n">greater</span> <span class="k">than</span> <span class="mi">9</span> <span class="n">feet</span>

<span class="o">&gt;</span>  <span class="k">SELECT</span> <span class="k">DISTINCT</span><span class="p">(</span><span class="s2">&#34;level description&#34;</span><span class="p">)</span> <span class="k">INTO</span> <span class="s2">&#34;distincts&#34;</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="k">result</span>
<span class="n">time</span>                   <span class="n">written</span>
<span class="c1">----                   -------
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">4</span>

<span class="o">&gt;</span> <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="s2">&#34;distincts&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">distincts</span>
<span class="n">time</span>                   <span class="k">distinct</span>
<span class="c1">----                   --------
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="k">at</span> <span class="k">or</span> <span class="n">greater</span> <span class="k">than</span> <span class="mi">9</span> <span class="n">feet</span></code></pre></div>
<a class="dashingAutolink" name="autolink-4"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/INTEGRAL%28%29"></a><h3 id="integral">INTEGRAL()</h3>

<p>Returns the area under the curve for subsequent <a href="../../concepts/glossary/index.html#field-value">field values</a>.</p>

<h4 id="syntax-2">Syntax</h4>

<pre><code>SELECT INTEGRAL( [ * | &lt;field_key&gt; | /&lt;regular_expression&gt;/ ] [ , &lt;unit&gt; ]  ) [INTO_clause] FROM_clause [WHERE_clause] [GROUP_BY_clause] [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p>InfluxDB calculates the area under the curve for subsequent field values and converts those results into the summed area per <code>unit</code>.
The <code>unit</code> argument is an integer followed by a <a href="../spec/index.html#literals">duration literal</a> and it is optional.
If the query does not specify the <code>unit</code>, the unit defaults to one second (<code>1s</code>).</p>

<p><code>INTEGRAL(field_key)</code><br/>
Returns the area under the curve for subsequent field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>.</p>

<p><code>INTEGRAL(/regular_expression/)</code><br/>
Returns the area under the curve for subsequent field values associated with each field key that matches the <a href="../data_exploration/index.html#regular-expressions">regular expression</a>.</p>

<p><code>INTEGRAL(*)</code><br/>
Returns the average field value associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a>.</p>

<p><code>INTEGRAL()</code> does not support <a href="../data_exploration/index.html#group-by-time-intervals-and-fill"><code>fill()</code></a>. <code>INTEGRAL()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<h4 id="examples-2">Examples</h4>

<p>Examples 1-5 use the following subsample of the <a href="../data_download/index.html"><code>NOAA_water_database</code> data</a>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="s2">&#34;water_level&#34;</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">water_level</span>
<span class="c1">----                   -----------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">064</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">116</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">028</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">126</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">041</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">051</span></code></pre></div>
<h5 id="calculate-the-integral-for-the-field-values-associated-with-a-field-key">Calculate the integral for the field values associated with a field key</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">INTEGRAL</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                 <span class="n">integral</span>
<span class="c1">----                 --------
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span> <span class="mi">3732</span><span class="p">.</span><span class="mi">66</span></code></pre></div>
<p>The query returns the area under the curve (in seconds) for the field values associated with the <code>water_level</code> field key and in the <code>h2o_feet</code> measurement.</p>

<h5 id="calculate-the-integral-for-the-field-values-associated-with-a-field-key-and-specify-the-unit-option">Calculate the integral for the field values associated with a field key and specify the unit option</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">INTEGRAL</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">,</span><span class="mi">1</span><span class="n">m</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                 <span class="n">integral</span>
<span class="c1">----                 --------
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span> <span class="mi">62</span><span class="p">.</span><span class="mi">211</span></code></pre></div>
<p>The query returns the area under the curve (in minutes) for the field values associated with the <code>water_level</code> field key and in the <code>h2o_feet</code> measurement.</p>

<h5 id="calculate-the-integral-for-the-field-values-associated-with-each-field-key-in-a-measurement-and-specify-the-unit-option">Calculate the integral for the field values associated with each field key in a measurement and specify the unit option</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">INTEGRAL</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="mi">1</span><span class="n">m</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                 <span class="n">integral_water_level</span>
<span class="c1">----                 --------------------
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span> <span class="mi">62</span><span class="p">.</span><span class="mi">211</span></code></pre></div>
<p>The query returns the area under the curve (in minutes) for the field values associated with each field key that stores numerical values in the <code>h2o_feet</code> measurement.
The <code>h2o_feet</code> measurement has on numerical field: <code>water_level</code>.</p>

<h4 id="calculate-the-integral-for-the-field-values-associated-with-each-field-key-that-matches-a-regular-expression-and-specify-the-unit-option">Calculate the integral for the field values associated with each field key that matches a regular expression and specify the unit option</h4>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">INTEGRAL</span><span class="p">(</span><span class="o">/</span><span class="n">water</span><span class="o">/</span><span class="p">,</span><span class="mi">1</span><span class="n">m</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                 <span class="n">integral_water_level</span>
<span class="c1">----                 --------------------
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span> <span class="mi">62</span><span class="p">.</span><span class="mi">211</span></code></pre></div>
<p>The query returns the area under the curve (in minutes) for the field values associated with each field key that stores numerical values includes the word <code>water</code> in the <code>h2o_feet</code> measurement.</p>

<h4 id="calculate-the-integral-for-the-field-values-associated-with-a-field-key-and-include-several-clauses">Calculate the integral for the field values associated with a field key and include several clauses</h4>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">INTEGRAL</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">,</span><span class="mi">1</span><span class="n">m</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span> <span class="k">LIMIT</span> <span class="mi">1</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                 <span class="n">integral</span>
<span class="c1">----                 --------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span> <span class="mi">24</span><span class="p">.</span><span class="mi">972</span></code></pre></div>
<p>The query returns the area under the curve (in minutes) for the field values associated with the <code>water_level</code> field key and in the <code>h2o_feet</code> measurement.
It covers the <a href="../data_exploration/index.html#time-syntax">time range</a> between <code>2015-08-18T00:00:00Z</code> and <code>2015-08-18T00:30:00Z</code>, <a href="../data_exploration/index.html#group-by-time-intervals">groups</a> results into 12-minute intervals, and <a href="../data_exploration/index.html#the-limit-and-slimit-clauses">limits</a> the number of results returned to one.</p>

<a class="dashingAutolink" name="autolink-5"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/MEAN%28%29"></a><h3 id="mean">MEAN()</h3>

<p>Returns the arithmetic mean (average) of <a href="../../concepts/glossary/index.html#field-value">field values</a>.</p>

<h4 id="syntax-3">Syntax</h4>

<pre><code>SELECT MEAN( [ * | &lt;field_key&gt; | /&lt;regular_expression&gt;/ ] ) [INTO_clause] FROM_clause [WHERE_clause] [GROUP_BY_clause] [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p><code>MEAN(field_key)</code><br/>
Returns the average field value associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>.</p>

<p><code>MEAN(/regular_expression/)</code><br/>
Returns the average field value associated with each field key that matches the <a href="../data_exploration/index.html#regular-expressions">regular expression</a>.</p>

<p><code>MEAN(*)</code><br/>
Returns the average field value associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a>.</p>

<p><code>MEAN()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<h4 id="examples-3">Examples</h4>

<h5 id="calculate-the-mean-field-value-associated-with-a-field-key">Calculate the mean field value associated with a field key</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">mean</span>
<span class="c1">----                   ----
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">4</span><span class="p">.</span><span class="mi">442107025822522</span></code></pre></div>
<p>The query returns the average field value in the <code>water_level</code> field key in the <code>h2o_feet</code> measurement.</p>

<h5 id="calculate-the-mean-field-value-associated-with-each-field-key-in-a-measurement">Calculate the mean field value associated with each field key in a measurement</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">MEAN</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">mean_water_level</span>
<span class="c1">----                   ----------------
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">4</span><span class="p">.</span><span class="mi">442107025822522</span></code></pre></div>
<p>The query returns the average field value for every field key that stores numerical values in the <code>h2o_feet</code> measurement.
The <code>h2o_feet</code> measurement has one numerical field: <code>water_level</code>.</p>

<h5 id="calculate-the-mean-field-value-associated-with-each-field-key-that-matches-a-regular-expression">Calculate the mean field value associated with each field key that matches a regular expression</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">MEAN</span><span class="p">(</span><span class="o">/</span><span class="n">water</span><span class="o">/</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">mean_water_level</span>
<span class="c1">----                   ----------------
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">4</span><span class="p">.</span><span class="mi">442107025822523</span></code></pre></div>
<p>The query returns the average field value for each field key that stores numerical values and includes the word <code>water</code> in the <code>h2o_feet</code> measurement.</p>

<h4 id="calculate-the-mean-field-value-associated-with-a-field-key-and-include-several-clauses">Calculate the mean field value associated with a field key and include several clauses</h4>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-17T23:48:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:54:00Z&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">),</span><span class="o">*</span> <span class="n">fill</span><span class="p">(</span><span class="mi">9</span><span class="p">.</span><span class="mi">01</span><span class="p">)</span> <span class="k">LIMIT</span> <span class="mi">7</span> <span class="n">SLIMIT</span> <span class="mi">1</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">tags</span><span class="p">:</span> <span class="k">location</span><span class="o">=</span><span class="n">coyote_creek</span>
<span class="n">time</span>                   <span class="n">mean</span>
<span class="c1">----                   ----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">17</span><span class="n">T23</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">9</span><span class="p">.</span><span class="mi">01</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">8</span><span class="p">.</span><span class="mi">0625</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">7</span><span class="p">.</span><span class="mi">8245</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">7</span><span class="p">.</span><span class="mi">5675</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">7</span><span class="p">.</span><span class="mi">303</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">7</span><span class="p">.</span><span class="mi">046</span></code></pre></div>
<p>The query returns the average of the values in the <code>water_level</code> field key.
It covers the <a href="../data_exploration/index.html#time-syntax">time range</a> between <code>2015-08-17T23:48:00Z</code> and <code>2015-08-18T00:54:00Z</code> and <a href="../data_exploration/index.html#the-group-by-clause">groups</a> results into 12-minute time intervals and per tag.
The query <a href="../data_exploration/index.html#group-by-time-intervals-and-fill">fills</a> empty time intervals with <code>9.01</code> and <a href="../data_exploration/index.html#the-limit-and-slimit-clauses">limits</a> the number of points and series returned to seven and one.</p>

<a class="dashingAutolink" name="autolink-6"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/MEDIAN%28%29"></a><h3 id="median">MEDIAN()</h3>

<p>Returns the middle value from a sorted list of <a href="../../concepts/glossary/index.html#field-value">field values</a>.</p>

<h4 id="syntax-4">Syntax</h4>

<pre><code>SELECT MEDIAN( [ * | &lt;field_key&gt; | /&lt;regular_expression&gt;/ ] ) [INTO_clause] FROM_clause [WHERE_clause] [GROUP_BY_clause] [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p><code>MEDIAN(field_key)</code><br/>
Returns the middle field value associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>.</p>

<p><code>MEDIAN(/regular_expression/)</code><br/>
Returns the middle field value associated with each field key that matches the <a href="../data_exploration/index.html#regular-expressions">regular expression</a>.</p>

<p><code>MEDIAN(*)</code><br/>
Returns the middle field value associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a>.</p>

<p><code>MEDIAN()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<blockquote>
<p><strong>Note:</strong> <code>MEDIAN()</code> is nearly equivalent to <a href="index.html#percentile"><code>PERCENTILE(field_key, 50)</code></a>, except <code>MEDIAN()</code> returns the average of the two middle field values if the field contains an even number of values.</p>
</blockquote>

<h4 id="examples-4">Examples</h4>

<h5 id="calculate-the-median-field-value-associated-with-a-field-key">Calculate the median field value associated with a field key</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">MEDIAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">median</span>
<span class="c1">----                   ------
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">4</span><span class="p">.</span><span class="mi">124</span></code></pre></div>
<p>The query returns the middle field value in the <code>water_level</code> field key and in the <code>h2o_feet</code> measurement.</p>

<h5 id="calculate-the-median-field-value-associated-with-each-field-key-in-a-measurement">Calculate the median field value associated with each field key in a measurement</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">MEDIAN</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">median_water_level</span>
<span class="c1">----                   ------------------
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">4</span><span class="p">.</span><span class="mi">124</span></code></pre></div>
<p>The query returns the middle field value for every field key that stores numerical values in the <code>h2o_feet</code> measurement.
The <code>h2o_feet</code> measurement has one numerical field: <code>water_level</code>.</p>

<h5 id="calculate-the-median-field-value-associated-with-each-field-key-that-matches-a-regular-expression">Calculate the median field value associated with each field key that matches a regular expression</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">MEDIAN</span><span class="p">(</span><span class="o">/</span><span class="n">water</span><span class="o">/</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">median_water_level</span>
<span class="c1">----                   ------------------
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">4</span><span class="p">.</span><span class="mi">124</span></code></pre></div>
<p>The query returns the middle field value for every field key that stores numerical values and includes the word <code>water</code> in the <code>h2o_feet</code> measurement.</p>

<h4 id="calculate-the-median-field-value-associated-with-a-field-key-and-include-several-clauses">Calculate the median field value associated with a field key and include several clauses</h4>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">MEDIAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-17T23:48:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:54:00Z&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">),</span><span class="o">*</span> <span class="n">fill</span><span class="p">(</span><span class="mi">700</span><span class="p">)</span> <span class="k">LIMIT</span> <span class="mi">7</span> <span class="n">SLIMIT</span> <span class="mi">1</span> <span class="n">SOFFSET</span> <span class="mi">1</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">tags</span><span class="p">:</span> <span class="k">location</span><span class="o">=</span><span class="n">santa_monica</span>
<span class="n">time</span>                   <span class="n">median</span>
<span class="c1">----                   ------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">17</span><span class="n">T23</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">700</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">09</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">077</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">0460000000000003</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">0620000000000003</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">700</span></code></pre></div>
<p>The query returns the middle field value in the <code>water_level</code> field key.
It covers the <a href="../data_exploration/index.html#time-syntax">time range</a> between <code>2015-08-17T23:48:00Z</code> and <code>2015-08-18T00:54:00Z</code> and <a href="../data_exploration/index.html#the-group-by-clause">groups</a> results into 12-minute time intervals and per tag.
The query <a href="../data_exploration/index.html#group-by-time-intervals-and-fill">fills</a> empty time intervals with <code>700</code>, <a href="../data_exploration/index.html#the-limit-and-slimit-clauses">limits</a> the number of points and series returned to seven and one, and <a href="../data_exploration/index.html#the-offset-and-soffset-clauses">offsets</a> the series returned by one.</p>

<a class="dashingAutolink" name="autolink-7"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/MODE%28%29"></a><h3 id="mode">MODE()</h3>

<p>Returns the most frequent value in a list of <a href="../../concepts/glossary/index.html#field-value">field values</a>.</p>

<h4 id="syntax-5">Syntax</h4>

<pre><code>SELECT MODE( [ * | &lt;field_key&gt; | /&lt;regular_expression&gt;/ ] ) [INTO_clause] FROM_clause [WHERE_clause] [GROUP_BY_clause] [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p><code>MODE(field_key)</code><br/>
Returns the most frequent field value associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>.</p>

<p><code>MODE(/regular_expression/)</code><br/>
Returns the most frequent field value associated with each field key that matches the <a href="../data_exploration/index.html#regular-expressions">regular expression</a>.</p>

<p><code>MODE(*)</code><br/>
Returns the most frequent field value associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a>.</p>

<p><code>MODE()</code> supports all field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<blockquote>
<p><strong>Note:</strong> <code>MODE()</code> returns the field value with the earliest <a href="../../concepts/glossary/index.html#timestamp">timestamp</a> if  there&rsquo;s a tie between two or more values for the maximum number of occurrences.</p>
</blockquote>

<h4 id="examples-5">Examples</h4>

<h5 id="calculate-the-mode-field-value-associated-with-a-field-key">Calculate the mode field value associated with a field key</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">MODE</span><span class="p">(</span><span class="s2">&#34;level description&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="k">mode</span>
<span class="c1">----                   ----
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="k">between</span> <span class="mi">3</span> <span class="k">and</span> <span class="mi">6</span> <span class="n">feet</span></code></pre></div>
<p>The query returns the most frequent field value in the <code>level description</code> field key and in the <code>h2o_feet</code> measurement.</p>

<h5 id="calculate-the-mode-field-value-associated-with-each-field-key-in-a-measurement">Calculate the mode field value associated with each field key in a measurement</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">MODE</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">mode_level</span> <span class="n">description</span>   <span class="n">mode_water_level</span>
<span class="c1">----                   ----------------------   ----------------
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="k">between</span> <span class="mi">3</span> <span class="k">and</span> <span class="mi">6</span> <span class="n">feet</span>     <span class="mi">2</span><span class="p">.</span><span class="mi">69</span></code></pre></div>
<p>The query returns the most frequent field value for every field key in the <code>h2o_feet</code> measurement.
The <code>h2o_feet</code> measurement has two field keys: <code>level description</code> and <code>water_level</code>.</p>

<h5 id="calculate-the-mode-field-value-associated-with-each-field-key-that-matches-a-regular-expression">Calculate the mode field value associated with each field key that matches a regular expression</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">MODE</span><span class="p">(</span><span class="o">/</span><span class="n">water</span><span class="o">/</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">mode_water_level</span>
<span class="c1">----                   ----------------
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">69</span></code></pre></div>
<p>The query returns the most frequent field value for every field key that includes the word <code>/water/</code> in the <code>h2o_feet</code> measurement.</p>

<h4 id="calculate-the-mode-field-value-associated-with-a-field-key-and-include-several-clauses">Calculate the mode field value associated with a field key and include several clauses</h4>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">MODE</span><span class="p">(</span><span class="s2">&#34;level description&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-17T23:48:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:54:00Z&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">),</span><span class="o">*</span> <span class="k">LIMIT</span> <span class="mi">3</span> <span class="n">SLIMIT</span> <span class="mi">1</span> <span class="n">SOFFSET</span> <span class="mi">1</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">tags</span><span class="p">:</span> <span class="k">location</span><span class="o">=</span><span class="n">santa_monica</span>
<span class="n">time</span>                   <span class="k">mode</span>
<span class="c1">----                   ----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">17</span><span class="n">T23</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="n">below</span> <span class="mi">3</span> <span class="n">feet</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="n">below</span> <span class="mi">3</span> <span class="n">feet</span></code></pre></div>
<p>The query returns the mode of the values associated with the <code>water_level</code> field key.
It covers the <a href="../data_exploration/index.html#time-syntax">time range</a> between <code>2015-08-17T23:48:00Z</code> and <code>2015-08-18T00:54:00Z</code> and <a href="../data_exploration/index.html#the-group-by-clause">groups</a> results into 12-minute time intervals and per tag.
The query <a href="../data_exploration/index.html#the-limit-and-slimit-clauses">limits</a> the number of points and series returned to three and one, and it <a href="../data_exploration/index.html#the-offset-and-soffset-clauses">offsets</a> the series returned by one.</p>

<a class="dashingAutolink" name="autolink-8"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/SPREAD%28%29"></a><h3 id="spread">SPREAD()</h3>

<p>Returns the difference between the minimum and maximum <a href="../../concepts/glossary/index.html#field-value">field values</a>.</p>

<h4 id="syntax-6">Syntax</h4>

<pre><code>SELECT SPREAD( [ * | &lt;field_key&gt; | /&lt;regular_expression&gt;/ ] ) [INTO_clause] FROM_clause [WHERE_clause] [GROUP_BY_clause] [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p><code>SPREAD(field_key)</code><br/>
Returns the difference between the minimum and maximum field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>.</p>

<p><code>SPREAD(/regular_expression/)</code><br/>
Returns the difference between the minimum and maximum field values associated with each field key that matches the <a href="../data_exploration/index.html#regular-expressions">regular expression</a>.</p>

<p><code>SPREAD(*)</code><br/>
Returns the difference between the minimum and maximum field values associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a>.</p>

<p><code>SPREAD()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<h4 id="examples-6">Examples</h4>

<h5 id="calculate-the-spread-for-the-field-values-associated-with-a-field-key">Calculate the spread for the field values associated with a field key</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">SPREAD</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">spread</span>
<span class="c1">----                   ------
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">10</span><span class="p">.</span><span class="mi">574</span></code></pre></div>
<p>The query returns the difference between the minimum and maximum field values in the <code>water_level</code> field key and in the <code>h2o_feet</code> measurement.</p>

<h5 id="calculate-the-spread-for-the-field-values-associated-with-each-field-key-in-a-measurement">Calculate the spread for the field values associated with each field key in a measurement</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">SPREAD</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">spread_water_level</span>
<span class="c1">----                   ------------------
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">10</span><span class="p">.</span><span class="mi">574</span></code></pre></div>
<p>The query returns the difference between the minimum and maximum field values for every field key that stores numerical values in the <code>h2o_feet</code> measurement.
The <code>h2o_feet</code> measurement has one numerical field: <code>water_level</code>.</p>

<h5 id="calculate-the-spread-for-the-field-values-associated-with-each-field-key-that-matches-a-regular-expression">Calculate the spread for the field values associated with each field key that matches a regular expression</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">SPREAD</span><span class="p">(</span><span class="o">/</span><span class="n">water</span><span class="o">/</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">spread_water_level</span>
<span class="c1">----                   ------------------
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">10</span><span class="p">.</span><span class="mi">574</span></code></pre></div>
<p>The query returns the difference between the minimum and maximum field values for every field key that stores numerical values and includes the word <code>water</code> in the <code>h2o_feet</code> measurement.</p>

<h4 id="calculate-the-spread-for-the-field-values-associated-with-a-field-key-and-include-several-clauses">Calculate the spread for the field values associated with a field key and include several clauses</h4>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">SPREAD</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-17T23:48:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:54:00Z&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">),</span><span class="o">*</span> <span class="n">fill</span><span class="p">(</span><span class="mi">18</span><span class="p">)</span> <span class="k">LIMIT</span> <span class="mi">3</span> <span class="n">SLIMIT</span> <span class="mi">1</span> <span class="n">SOFFSET</span> <span class="mi">1</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">tags</span><span class="p">:</span> <span class="k">location</span><span class="o">=</span><span class="n">santa_monica</span>
<span class="n">time</span>                   <span class="n">spread</span>
<span class="c1">----                   ------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">17</span><span class="n">T23</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">18</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">0</span><span class="p">.</span><span class="mi">052000000000000046</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">0</span><span class="p">.</span><span class="mi">09799999999999986</span></code></pre></div>
<p>The query returns the difference between the minimum and maximum field values in the <code>water_level</code> field key.
It covers the <a href="../data_exploration/index.html#time-syntax">time range</a> between <code>2015-08-17T23:48:00Z</code> and <code>2015-08-18T00:54:00Z</code>and <a href="../data_exploration/index.html#the-group-by-clause">groups</a> results into 12-minute time intervals and per tag.
The query <a href="../data_exploration/index.html#group-by-time-intervals-and-fill">fills</a> empty time intervals with <code>18</code>, <a href="../data_exploration/index.html#the-limit-and-slimit-clauses">limits</a> the number of points and series returned to three and one, and <a href="../data_exploration/index.html#the-offset-and-soffset-clauses">offsets</a> the series returned by one.</p>

<a class="dashingAutolink" name="autolink-9"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/STDDEV%28%29"></a><h3 id="stddev">STDDEV()</h3>

<p>Returns the standard deviation of <a href="../../concepts/glossary/index.html#field-value">field values</a>.</p>

<h4 id="syntax-7">Syntax</h4>

<pre><code>SELECT STDDEV( [ * | &lt;field_key&gt; | /&lt;regular_expression&gt;/ ] ) [INTO_clause] FROM_clause [WHERE_clause] [GROUP_BY_clause] [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p><code>STDDEV(field_key)</code><br/>
Returns the standard deviation of field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>.</p>

<p><code>STDDEV(/regular_expression/)</code><br/>
Returns the standard deviation of field values associated with each field key that matches the <a href="../data_exploration/index.html#regular-expressions">regular expression</a>.</p>

<p><code>STDDEV(*)</code><br/>
Returns the standard deviation of field values associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a>.</p>

<p><code>STDDEV()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<h4 id="examples-7">Examples</h4>

<h5 id="calculate-the-standard-deviation-for-the-field-values-associated-with-a-field-key">Calculate the standard deviation for the field values associated with a field key</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">STDDEV</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">stddev</span>
<span class="c1">----                   ------
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">279144584196141</span></code></pre></div>
<p>The query returns the standard deviation of the field values in the <code>water_level</code> field key and in the <code>h2o_feet</code> measurement.</p>

<h5 id="calculate-the-standard-deviation-for-the-field-values-associated-with-each-field-key-in-a-measurement">Calculate the standard deviation for the field values associated with each field key in a measurement</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">STDDEV</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">stddev_water_level</span>
<span class="c1">----                   ------------------
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">279144584196141</span></code></pre></div>
<p>The query returns the standard deviation of the field values for each field key that stores numerical values in the <code>h2o_feet</code> measurement.
The <code>h2o_feet</code> measurement has one numerical field: <code>water_level</code>.</p>

<h5 id="calculate-the-standard-deviation-for-the-field-values-associated-with-each-field-key-that-matches-a-regular-expression">Calculate the standard deviation for the field values associated with each field key that matches a regular expression</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">STDDEV</span><span class="p">(</span><span class="o">/</span><span class="n">water</span><span class="o">/</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">stddev_water_level</span>
<span class="c1">----                   ------------------
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">279144584196141</span></code></pre></div>
<p>The query returns the standard deviation of the field values for each field key that stores numerical values and includes the word <code>water</code> in the <code>h2o_feet</code> measurement.</p>

<h4 id="calculate-the-standard-deviation-for-the-field-values-associated-with-a-field-key-and-include-several-clauses">Calculate the standard deviation for the field values associated with a field key and include several clauses</h4>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">STDDEV</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-17T23:48:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:54:00Z&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">),</span><span class="o">*</span> <span class="n">fill</span><span class="p">(</span><span class="mi">18000</span><span class="p">)</span> <span class="k">LIMIT</span> <span class="mi">2</span> <span class="n">SLIMIT</span> <span class="mi">1</span> <span class="n">SOFFSET</span> <span class="mi">1</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">tags</span><span class="p">:</span> <span class="k">location</span><span class="o">=</span><span class="n">santa_monica</span>
<span class="n">time</span>                   <span class="n">stddev</span>
<span class="c1">----                   ------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">17</span><span class="n">T23</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">18000</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">0</span><span class="p">.</span><span class="mi">03676955262170051</span></code></pre></div>
<p>The query returns the standard deviation of the field values in the <code>water_level</code> field key.
It covers the <a href="../data_exploration/index.html#time-syntax">time range</a> between <code>2015-08-17T23:48:00Z</code> and <code>2015-08-18T00:54:00Z</code> and <a href="../data_exploration/index.html#the-group-by-clause">groups</a> results into 12-minute time intervals and per tag.
The query <a href="../data_exploration/index.html#group-by-time-intervals-and-fill">fills</a> empty time intervals with <code>18000</code>, <a href="../data_exploration/index.html#the-limit-and-slimit-clauses">limits</a> the number of points and series returned to two and one, and <a href="../data_exploration/index.html#the-offset-and-soffset-clauses">offsets</a> the series returned by one.</p>

<a class="dashingAutolink" name="autolink-10"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/SUM%28%29"></a><h3 id="sum">SUM()</h3>

<p>Returns the sum of <a href="../../concepts/glossary/index.html#field-value">field values</a>.</p>

<h4 id="syntax-8">Syntax</h4>

<pre><code>SELECT SUM( [ * | &lt;field_key&gt; | /&lt;regular_expression&gt;/ ] ) [INTO_clause] FROM_clause [WHERE_clause] [GROUP_BY_clause] [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p><code>SUM(field_key)</code><br/>
Returns the sum of field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>.</p>

<p><code>SUM(/regular_expression/)</code><br/>
Returns the sum of field values associated with each field key that matches the <a href="../data_exploration/index.html#regular-expressions">regular expression</a>.</p>

<p><code>SUM(*)</code><br/>
Returns the sums of field values associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a>.</p>

<p><code>SUM()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<h4 id="examples-8">Examples</h4>

<h4 id="calculate-the-sum-of-the-field-values-associated-with-a-field-key">Calculate the sum of the field values associated with a field key</h4>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">SUM</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="k">sum</span>
<span class="c1">----                   ---
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">67777</span><span class="p">.</span><span class="mi">66900000004</span></code></pre></div>
<p>The query returns the summed total of the field values in the <code>water_level</code> field key and in the <code>h2o_feet</code> measurement.</p>

<h4 id="calculate-the-sum-of-the-field-values-associated-with-each-field-key-in-a-measurement">Calculate the sum of the field values associated with each field key in a measurement</h4>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">SUM</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">sum_water_level</span>
<span class="c1">----                   ---------------
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">67777</span><span class="p">.</span><span class="mi">66900000004</span></code></pre></div>
<p>The query returns the summed total of the field values for each field key that stores numerical values in the <code>h2o_feet</code> measurement.
The <code>h2o_feet</code> measurement has one numerical field: <code>water_level</code>.</p>

<h4 id="calculate-the-sum-of-the-field-values-associated-with-each-field-key-that-matches-a-regular-expression">Calculate the sum of the field values associated with each field key that matches a regular expression</h4>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">SUM</span><span class="p">(</span><span class="o">/</span><span class="n">water</span><span class="o">/</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">sum_water_level</span>
<span class="c1">----                   ---------------
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">67777</span><span class="p">.</span><span class="mi">66900000004</span></code></pre></div>
<p>The query returns the summed total of the field values for each field key that stores numerical values and includes the word <code>water</code> in the <code>h2o_feet</code> measurement.</p>

<h4 id="calculate-the-sum-of-the-field-values-associated-with-a-field-key-and-include-several-clauses">Calculate the sum of the field values associated with a field key and include several clauses</h4>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">SUM</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-17T23:48:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:54:00Z&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">),</span><span class="o">*</span> <span class="n">fill</span><span class="p">(</span><span class="mi">18000</span><span class="p">)</span> <span class="k">LIMIT</span> <span class="mi">4</span> <span class="n">SLIMIT</span> <span class="mi">1</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">tags</span><span class="p">:</span> <span class="k">location</span><span class="o">=</span><span class="n">coyote_creek</span>
<span class="n">time</span>                   <span class="k">sum</span>
<span class="c1">----                   ---
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">17</span><span class="n">T23</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">18000</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">16</span><span class="p">.</span><span class="mi">125</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">15</span><span class="p">.</span><span class="mi">649</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">15</span><span class="p">.</span><span class="mi">135</span></code></pre></div>
<p>The query returns the summed total of the field values in the <code>water_level</code> field key.
It covers the <a href="../data_exploration/index.html#time-syntax">time range</a> between <code>2015-08-17T23:48:00Z</code> and <code>2015-08-18T00:54:00Z</code> and <a href="../data_exploration/index.html#the-group-by-clause">groups</a> results into 12-minute time intervals and per tag. The query <a href="../data_exploration/index.html#group-by-time-intervals-and-fill">fills</a> empty time intervals with 18000, and it <a href="../data_exploration/index.html#the-limit-and-slimit-clauses">limits</a> the number of points and series returned to four and one.</p>

<h2 id="selectors">Selectors</h2>

<a class="dashingAutolink" name="autolink-11"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/BOTTOM%28%29"></a><h3 id="bottom">BOTTOM()</h3>

<p>Returns the smallest <code>N</code> <a href="../../concepts/glossary/index.html#field-value">field values</a>.</p>

<h4 id="syntax-9">Syntax</h4>

<pre><code>SELECT BOTTOM(&lt;field_key&gt;[,&lt;tag_key(s)&gt;],&lt;N&gt; )[,&lt;tag_key(s)&gt;|&lt;field_key(s)&gt;] [INTO_clause] FROM_clause [WHERE_clause] [GROUP_BY_clause] [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p><code>BOTTOM(field_key,N)</code><br/>
Returns the smallest N field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>.</p>

<p><code>BOTTOM(field_key,tag_key(s),N)</code><br/>
Returns the smallest field value for N tag values of the <a href="../../concepts/glossary/index.html#tag-key">tag key</a>.</p>

<p><code>BOTTOM(field_key,N),tag_key(s),field_key(s)</code><br/>
Returns the smallest N field values associated with the field key in the parentheses and the relevant <a href="../../concepts/glossary/index.html#tag">tag</a> and/or <a href="../../concepts/glossary/index.html#field">field</a>.</p>

<p><code>BOTTOM()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<blockquote>
<p><strong>Notes:</strong></p>

<ul>
<li><code>BOTTOM()</code> returns the field value with the earliest timestamp if there&rsquo;s a tie between two or more values for the smallest value.</li>
<li><code>BOTTOM()</code> differs from other InfluxQL functions when combined with an <a href="../data_exploration/index.html#the-into-clause"><code>INTO</code> clause</a>. See the <a href="index.html#common-issues-with-bottom">Common Issues</a> section for more information.</li>
</ul>
</blockquote>

<h4 id="examples-9">Examples</h4>

<h5 id="select-the-bottom-three-field-values-associated-with-a-field-key">Select the bottom three field values associated with a field key</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">BOTTOM</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">bottom</span>
<span class="c1">----                   ------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">29</span><span class="n">T14</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">61</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">29</span><span class="n">T14</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">591</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">30</span><span class="n">T15</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">594</span></code></pre></div>
<p>The query returns the smallest three field values in the <code>water_level</code> field key and in the <code>h2o_feet</code> <a href="../../concepts/glossary/index.html#measurement">measurement</a>.</p>

<h5 id="select-the-bottom-field-value-associated-with-a-field-key-for-two-tags">Select the bottom field value associated with a field key for two tags</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">BOTTOM</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">,</span><span class="s2">&#34;location&#34;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">bottom</span>   <span class="k">location</span>
<span class="c1">----                   ------   --------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">29</span><span class="n">T10</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">243</span>   <span class="n">santa_monica</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">29</span><span class="n">T14</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">61</span>    <span class="n">coyote_creek</span></code></pre></div>
<p>The query returns the smallest field values in the <code>water_level</code> field key for two tag values associated with the <code>location</code> tag key.</p>

<h5 id="select-the-bottom-four-field-values-associated-with-a-field-key-and-the-relevant-tags-and-fields">Select the bottom four field values associated with a field key and the relevant tags and fields</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">BOTTOM</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span><span class="s2">&#34;location&#34;</span><span class="p">,</span><span class="s2">&#34;level description&#34;</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">bottom</span>  <span class="k">location</span>      <span class="k">level</span> <span class="n">description</span>
<span class="c1">----                  ------  --------      -----------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">29</span><span class="n">T14</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">587</span>  <span class="n">coyote_creek</span>  <span class="n">below</span> <span class="mi">3</span> <span class="n">feet</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">29</span><span class="n">T14</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">61</span>   <span class="n">coyote_creek</span>  <span class="n">below</span> <span class="mi">3</span> <span class="n">feet</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">29</span><span class="n">T14</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">591</span>  <span class="n">coyote_creek</span>  <span class="n">below</span> <span class="mi">3</span> <span class="n">feet</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">30</span><span class="n">T15</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">594</span>  <span class="n">coyote_creek</span>  <span class="n">below</span> <span class="mi">3</span> <span class="n">feet</span></code></pre></div>
<p>The query returns the smallest four field values in the <code>water_level</code> field key and the relevant values of the <code>location</code> tag key and the <code>level description</code> field key.</p>

<h5 id="select-the-bottom-three-field-values-associated-with-a-field-key-and-include-several-clauses">Select the bottom three field values associated with a field key and include several clauses</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">BOTTOM</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span><span class="s2">&#34;location&#34;</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:54:00Z&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">24</span><span class="n">m</span><span class="p">)</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">time</span> <span class="k">DESC</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">bottom</span>  <span class="k">location</span>
<span class="c1">----                  ------  --------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">991</span>   <span class="n">santa_monica</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">54</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">054</span>   <span class="n">santa_monica</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">54</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">6</span><span class="p">.</span><span class="mi">982</span>   <span class="n">coyote_creek</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">041</span>   <span class="n">santa_monica</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">051</span>   <span class="n">santa_monica</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">057</span>   <span class="n">santa_monica</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">064</span>   <span class="n">santa_monica</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">116</span>   <span class="n">santa_monica</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">028</span>   <span class="n">santa_monica</span></code></pre></div>
<p>The query returns the smallest three values in the <code>water_level</code> field key for each 24-minute <a href="../data_exploration/index.html#basic-group-by-time-syntax">interval</a> between <code>2015-08-18T00:00:00Z</code> and <code>2015-08-18T00:54:00Z</code>.
It also returns results in <a href="../data_exploration/index.html#order-by-time-desc">descending timestamp</a> order.</p>

<p>Notice that the <a href="../data_exploration/index.html#group-by-time-intervals">GROUP BY time() clause</a> does not override the points&rsquo; original timestamps. See <a href="index.html#issue-1-bottom-with-a-group-by-time-clause">Issue 1</a> in the section below for a more detailed explanation of that behavior.</p>

<h4 id="common-issues-with-bottom">Common Issues with <code>BOTTOM()</code></h4>

<h5 id="bottom-with-a-group-by-time-clause"><code>BOTTOM()</code> with a <code>GROUP BY time()</code> clause</h5>

<p>Queries with <code>BOTTOM()</code> and a <code>GROUP BY time()</code> clause return the specified
number of points per <code>GROUP BY time()</code> interval.
For
<a href="../data_exploration/index.html#group-by-time-intervals">most <code>GROUP BY time()</code> queries</a>,
the returned timestamps mark the start of the <code>GROUP BY time()</code> interval.
<code>GROUP BY time()</code> queries with the <code>BOTTOM()</code> function behave differently;
they maintain the timestamp of the original data point.</p>

<h6 id="example-2">Example</h6>

<p>The query below returns two points per 18-minute
<code>GROUP BY time()</code> interval.
Notice that the returned timestamps are the points&rsquo; original timestamps; they
are not forced to match the start of the <code>GROUP BY time()</code> intervals.</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">BOTTOM</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">18</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">bottom</span>
<span class="c1">----                   ------
</span><span class="c1"></span>                           <span class="n">__</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">064</span> <span class="o">|</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">028</span> <span class="o">|</span> <span class="o">&lt;</span><span class="c1">------- Smallest points for the first time interval
</span><span class="c1"></span>                           <span class="c1">--
</span><span class="c1"></span>                           <span class="n">__</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">041</span> <span class="o">|</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">051</span> <span class="o">|</span> <span class="o">&lt;</span><span class="c1">------- Smallest points for the second time interval                      --</span></code></pre></div>
<h5 id="bottom-and-a-tag-key-with-fewer-than-n-tag-values">BOTTOM() and a tag key with fewer than N tag values</h5>

<p>Queries with the syntax <code>SELECT BOTTOM(&lt;field_key&gt;,&lt;tag_key&gt;,&lt;N&gt;)</code> can return fewer points than expected.
If the tag key has <code>X</code> tag values, the query specifies <code>N</code> values, and <code>X</code> is smaller than <code>N</code>, then the query returns <code>X</code> points.</p>

<h6 id="example-3">Example</h6>

<p>The query below asks for the smallest field values of <code>water_level</code> for three tag values of the <code>location</code> tag key.
Because the <code>location</code> tag key has two tag values (<code>santa_monica</code> and <code>coyote_creek</code>), the query returns two points instead of three.</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">BOTTOM</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">,</span><span class="s2">&#34;location&#34;</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">bottom</span>   <span class="k">location</span>
<span class="c1">----                   ------   --------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">29</span><span class="n">T10</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">243</span>   <span class="n">santa_monica</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">29</span><span class="n">T14</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">61</span>    <span class="n">coyote_creek</span></code></pre></div>
<h5 id="bottom-tags-and-the-into-clause">BOTTOM(), tags, and the INTO clause</h5>

<p>When combined with an <a href="../data_exploration/index.html#the-into-clause"><code>INTO</code> clause</a> and no <a href="../data_exploration/index.html#group-by-tags"><code>GROUP BY tag</code> clause</a>, most InfluxQL functions <a href="../../troubleshooting/frequently-asked-questions/index.html#why-are-my-into-queries-missing-data">convert</a> any tags in the initial data to fields in the newly written data.
This behavior also applies to the <code>BOTTOM()</code> function unless <code>BOTTOM()</code> includes a tag key as an argument: <code>BOTTOM(field_key,tag_key(s),N)</code>.
In those cases, the system preserves the specified tag as a tag in the newly written data.</p>

<h6 id="example-4">Example</h6>

<p>The first query in the codeblock below returns the smallest field values in the <code>water_level</code> field key for two tag values associated with the <code>location</code> tag key.
It also writes those results to the <code>bottom_water_levels</code> measurement.</p>

<p>The second query <a href="../schema_exploration/index.html#show-tag-keys">shows</a> that InfluxDB preserved the <code>location</code> tag as a tag in the <code>bottom_water_levels</code> measurement.</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">BOTTOM</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">,</span><span class="s2">&#34;location&#34;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="k">INTO</span> <span class="s2">&#34;bottom_water_levels&#34;</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="k">result</span>
<span class="n">time</span>                 <span class="n">written</span>
<span class="c1">----                 -------
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span> <span class="mi">2</span>

<span class="o">&gt;</span> <span class="k">SHOW</span> <span class="n">TAG</span> <span class="n">KEYS</span> <span class="k">FROM</span> <span class="s2">&#34;bottom_water_levels&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">bottom_water_levels</span>
<span class="n">tagKey</span>
<span class="c1">------
</span><span class="c1"></span><span class="k">location</span></code></pre></div>
<a class="dashingAutolink" name="autolink-12"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/FIRST%28%29"></a><h3 id="first">FIRST()</h3>

<p>Returns the <a href="../../concepts/glossary/index.html#field-value">field value </a> with the oldest timestamp.</p>

<h4 id="syntax-10">Syntax</h4>

<pre><code>SELECT FIRST(&lt;field_key&gt;)[,&lt;tag_key(s)&gt;|&lt;field_key(s)&gt;] [INTO_clause] FROM_clause [WHERE_clause] [GROUP_BY_clause] [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p><code>FIRST(field_key)</code><br/>
Returns the oldest field value (determined by timestamp) associated with the field key.</p>

<p><code>FIRST(/regular_expression/)</code><br/>
Returns the oldest field value (determined by timestamp) associated with each field key that matches the <a href="../data_exploration/index.html#regular-expressions">regular expression</a>.</p>

<p><code>FIRST(*)</code><br/>
Returns the oldest field value (determined by timestamp) associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a>.</p>

<p><code>FIRST(field_key),tag_key(s),field_key(s)</code><br/>
Returns the oldest field value (determined by timestamp) associated with the field key in the parentheses and the relevant <a href="../../concepts/glossary/index.html#tag">tag</a> and/or <a href="../../concepts/glossary/index.html#field">field</a>.</p>

<p><code>FIRST()</code> supports all field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<h4 id="examples-10">Examples</h4>

<h5 id="select-the-first-field-value-associated-with-a-field-key">Select the first field value associated with a field key</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">FIRST</span><span class="p">(</span><span class="s2">&#34;level description&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="k">first</span>
<span class="c1">----                   -----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="k">between</span> <span class="mi">6</span> <span class="k">and</span> <span class="mi">9</span> <span class="n">feet</span></code></pre></div>
<p>The query returns the oldest field value (determined by timestamp) associated with the <code>level description</code> field key and in the <code>h2o_feet</code> measurement.</p>

<h5 id="select-the-first-field-value-associated-with-each-field-key-in-a-measurement">Select the first field value associated with each field key in a measurement</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">FIRST</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">first_level</span> <span class="n">description</span>   <span class="n">first_water_level</span>
<span class="c1">----                   -----------------------   -----------------
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="k">between</span> <span class="mi">6</span> <span class="k">and</span> <span class="mi">9</span> <span class="n">feet</span>      <span class="mi">8</span><span class="p">.</span><span class="mi">12</span></code></pre></div>
<p>The query returns the oldest field value (determined by timestamp) for each field key in the <code>h2o_feet</code> measurement.
The <code>h2o_feet</code> measurement has two field keys: <code>level description</code> and <code>water_level</code>.</p>

<h5 id="select-the-first-field-value-associated-with-each-field-key-that-matches-a-regular-expression">Select the first field value associated with each field key that matches a regular expression</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">FIRST</span><span class="p">(</span><span class="o">/</span><span class="k">level</span><span class="o">/</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">first_level</span> <span class="n">description</span>   <span class="n">first_water_level</span>
<span class="c1">----                   -----------------------   -----------------
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="k">between</span> <span class="mi">6</span> <span class="k">and</span> <span class="mi">9</span> <span class="n">feet</span>      <span class="mi">8</span><span class="p">.</span><span class="mi">12</span></code></pre></div>
<p>The query returns the oldest field value for each field key that includes the word <code>level</code> in the <code>h2o_feet</code> measurement.</p>

<h5 id="select-the-first-value-associated-with-a-field-key-and-the-relevant-tags-and-fields">Select the first value associated with a field key and the relevant tags and fields</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">FIRST</span><span class="p">(</span><span class="s2">&#34;level description&#34;</span><span class="p">),</span><span class="s2">&#34;location&#34;</span><span class="p">,</span><span class="s2">&#34;water_level&#34;</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="k">first</span>                 <span class="k">location</span>      <span class="n">water_level</span>
<span class="c1">----                  -----                 --------      -----------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="k">between</span> <span class="mi">6</span> <span class="k">and</span> <span class="mi">9</span> <span class="n">feet</span>  <span class="n">coyote_creek</span>  <span class="mi">8</span><span class="p">.</span><span class="mi">12</span></code></pre></div>
<p>The query returns the oldest field value (determined by timestamp) in the <code>level description</code> field key and the relevant values of the <code>location</code> tag key and the <code>water_level</code> field key.</p>

<h5 id="select-the-first-field-value-associated-with-a-field-key-and-include-several-clauses">Select the first field value associated with a field key and include several clauses</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">FIRST</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-17T23:48:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:54:00Z&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">),</span><span class="o">*</span> <span class="n">fill</span><span class="p">(</span><span class="mi">9</span><span class="p">.</span><span class="mi">01</span><span class="p">)</span> <span class="k">LIMIT</span> <span class="mi">4</span> <span class="n">SLIMIT</span> <span class="mi">1</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">tags</span><span class="p">:</span> <span class="k">location</span><span class="o">=</span><span class="n">coyote_creek</span>
<span class="n">time</span>                   <span class="k">first</span>
<span class="c1">----                   -----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">17</span><span class="n">T23</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">9</span><span class="p">.</span><span class="mi">01</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">8</span><span class="p">.</span><span class="mi">12</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">7</span><span class="p">.</span><span class="mi">887</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">7</span><span class="p">.</span><span class="mi">635</span></code></pre></div>
<p>The query returns the oldest field value (determined by timestamp) in the <code>water_level</code> field key.
It covers the <a href="../data_exploration/index.html#time-syntax">time range</a> between <code>2015-08-17T23:48:00Z</code> and <code>2015-08-18T00:54:00Z</code> and <a href="../data_exploration/index.html#the-group-by-clause">groups</a> results into 12-minute time intervals and per tag.
The query <a href="../data_exploration/index.html#group-by-time-intervals-and-fill">fills</a> empty time intervals with <code>9.01</code>, and it <a href="../data_exploration/index.html#the-limit-and-slimit-clauses">limits</a> the number of points and series returned to four and one.</p>

<p>Notice that the <a href="../data_exploration/index.html#group-by-time-intervals"><code>GROUP BY time()</code> clause</a> overrides the points&rsquo; original timestamps.
The timestamps in the results indicate the the start of each 12-minute time interval;
the first point in the results covers the time interval between <code>2015-08-17T23:48:00Z</code> and just before <code>2015-08-18T00:00:00Z</code> and the last point in the results covers the time interval between <code>2015-08-18T00:24:00Z</code> and just before <code>2015-08-18T00:36:00Z</code>.</p>

<a class="dashingAutolink" name="autolink-13"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/LAST%28%29"></a><h3 id="last">LAST()</h3>

<p>Returns the <a href="../../concepts/glossary/index.html#field-value">field value</a> with the most recent timestamp.</p>

<h4 id="syntax-11">Syntax</h4>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="k">LAST</span><span class="p">(</span><span class="o">&lt;</span><span class="n">field_key</span><span class="o">&gt;</span><span class="p">)[,</span><span class="o">&lt;</span><span class="n">tag_key</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">&gt;|&lt;</span><span class="n">field_keys</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">&gt;</span><span class="p">]</span> <span class="p">[</span><span class="n">INTO_clause</span><span class="p">]</span> <span class="n">FROM_clause</span> <span class="p">[</span><span class="n">WHERE_clause</span><span class="p">]</span> <span class="p">[</span><span class="n">GROUP_BY_clause</span><span class="p">]</span> <span class="p">[</span><span class="n">ORDER_BY_clause</span><span class="p">]</span> <span class="p">[</span><span class="n">LIMIT_clause</span><span class="p">]</span> <span class="p">[</span><span class="n">OFFSET_clause</span><span class="p">]</span> <span class="p">[</span><span class="n">SLIMIT_clause</span><span class="p">]</span> <span class="p">[</span><span class="n">SOFFSET_clause</span><span class="p">]</span></code></pre></div>
<p><code>LAST(field_key)</code><br/>
Returns the newest field value (determined by timestamp) associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>.</p>

<p><code>LAST(/regular_expression/)</code><br/>
Returns the newest field value (determined by timestamp) associated with each field key that matches the <a href="../data_exploration/index.html#regular-expressions">regular expression</a>.</p>

<p><code>LAST(*)</code><br/>
Returns the newest field value (determined by timestamp) associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a>.</p>

<p><code>LAST(field_key),tag_key(s),field_key(s)</code><br/>
Returns the newest field value (determined by timestamp) associated with the field key in the parentheses and the relevant <a href="../../concepts/glossary/index.html#tag">tag</a> and/or <a href="../../concepts/glossary/index.html#field">field</a>.</p>

<p><code>LAST()</code> supports all field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<h4 id="examples-11">Examples</h4>

<h5 id="select-the-last-field-values-associated-with-a-field-key">Select the last field values associated with a field key</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">LAST</span><span class="p">(</span><span class="s2">&#34;level description&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="k">last</span>
<span class="c1">----                   ----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">18</span><span class="n">T21</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="k">between</span> <span class="mi">3</span> <span class="k">and</span> <span class="mi">6</span> <span class="n">feet</span></code></pre></div>
<p>The query returns the newest field value (determined by timestamp) associated with the <code>level description</code> field key and in the <code>h2o_feet</code> measurement.</p>

<h5 id="select-the-last-field-values-associated-with-each-field-key-in-a-measurement">Select the last field values associated with each field key in a measurement</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">LAST</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">last_level</span> <span class="n">description</span>   <span class="n">last_water_level</span>
<span class="c1">----                   -----------------------   -----------------
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="k">between</span> <span class="mi">3</span> <span class="k">and</span> <span class="mi">6</span> <span class="n">feet</span>      <span class="mi">4</span><span class="p">.</span><span class="mi">938</span></code></pre></div>
<p>The query returns the newest field value (determined by timestamp) for each field key in the <code>h2o_feet</code> measurement.
The <code>h2o_feet</code> measurement has two field keys: <code>level description</code> and <code>water_level</code>.</p>

<h5 id="select-the-last-field-value-associated-with-each-field-key-that-matches-a-regular-expression">Select the last field value associated with each field key that matches a regular expression</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">LAST</span><span class="p">(</span><span class="o">/</span><span class="k">level</span><span class="o">/</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">last_level</span> <span class="n">description</span>   <span class="n">last_water_level</span>
<span class="c1">----                   -----------------------   -----------------
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="k">between</span> <span class="mi">3</span> <span class="k">and</span> <span class="mi">6</span> <span class="n">feet</span>      <span class="mi">4</span><span class="p">.</span><span class="mi">938</span></code></pre></div>
<p>The query returns the newest field value for each field key that includes the word <code>level</code> in the <code>h2o_feet</code> measurement.</p>

<h5 id="select-the-last-field-value-associated-with-a-field-key-and-the-relevant-tags-and-fields">Select the last field value associated with a field key and the relevant tags and fields</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">LAST</span><span class="p">(</span><span class="s2">&#34;level description&#34;</span><span class="p">),</span><span class="s2">&#34;location&#34;</span><span class="p">,</span><span class="s2">&#34;water_level&#34;</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="k">last</span>                  <span class="k">location</span>      <span class="n">water_level</span>
<span class="c1">----                  ----                  --------      -----------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">18</span><span class="n">T21</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="k">between</span> <span class="mi">3</span> <span class="k">and</span> <span class="mi">6</span> <span class="n">feet</span>  <span class="n">santa_monica</span>  <span class="mi">4</span><span class="p">.</span><span class="mi">938</span></code></pre></div>
<p>The query returns the newest field value (determined by timestamp) in the <code>level description</code> field key and the relevant values of the <code>location</code> tag key and the <code>water_level</code> field key.</p>

<h5 id="select-the-last-field-value-associated-with-a-field-key-and-include-several-clauses">Select the last field value associated with a field key and include several clauses</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">LAST</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-17T23:48:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:54:00Z&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">),</span><span class="o">*</span> <span class="n">fill</span><span class="p">(</span><span class="mi">9</span><span class="p">.</span><span class="mi">01</span><span class="p">)</span> <span class="k">LIMIT</span> <span class="mi">4</span> <span class="n">SLIMIT</span> <span class="mi">1</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">tags</span><span class="p">:</span> <span class="k">location</span><span class="o">=</span><span class="n">coyote_creek</span>
<span class="n">time</span>                   <span class="k">last</span>
<span class="c1">----                   ----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">17</span><span class="n">T23</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">9</span><span class="p">.</span><span class="mi">01</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">8</span><span class="p">.</span><span class="mi">005</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">7</span><span class="p">.</span><span class="mi">762</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">7</span><span class="p">.</span><span class="mi">5</span></code></pre></div>
<p>The query returns the newest field value (determined by timestamp) in the <code>water_level</code> field key.
It covers the <a href="../data_exploration/index.html#time-syntax">time range</a> between <code>2015-08-17T23:48:00Z</code> and <code>2015-08-18T00:54:00Z</code> and <a href="../data_exploration/index.html#the-group-by-clause">groups</a> results into 12-minute time intervals and per tag.
The query <a href="../data_exploration/index.html#group-by-time-intervals-and-fill">fills</a> empty time intervals with <code>9.01</code>, and it <a href="../data_exploration/index.html#the-limit-and-slimit-clauses">limits</a> the number of points and series returned to four and one.</p>

<p>Notice that the <a href="../data_exploration/index.html#group-by-time-intervals"><code>GROUP BY time()</code> clause</a> overrides the points&rsquo; original timestamps.
The timestamps in the results indicate the the start of each 12-minute time interval;
the first point in the results covers the time interval between <code>2015-08-17T23:48:00Z</code> and just before <code>2015-08-18T00:00:00Z</code> and the last point in the results covers the time interval between <code>2015-08-18T00:24:00Z</code> and just before <code>2015-08-18T00:36:00Z</code>.</p>

<a class="dashingAutolink" name="autolink-14"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/MAX%28%29"></a><h3 id="max">MAX()</h3>

<p>Returns the greatest <a href="../../concepts/glossary/index.html#field-value">field value</a>.</p>

<h4 id="syntax-12">Syntax</h4>

<pre><code>SELECT MAX(&lt;field_key&gt;)[,&lt;tag_key(s)&gt;|&lt;field__key(s)&gt;] [INTO_clause] FROM_clause [WHERE_clause] [GROUP_BY_clause] [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p><code>MAX(field_key)</code><br/>
Returns the greatest field value associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>.</p>

<p><code>MAX(/regular_expression/)</code><br/>
Returns the greatest field value associated with each field key that matches the <a href="../data_exploration/index.html#regular-expressions">regular expression</a>.</p>

<p><code>MAX(*)</code><br/>
Returns the greatest field value associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a>.</p>

<p><code>MAX(field_key),tag_key(s),field_key(s)</code><br/>
Returns the greatest field value associated with the field key in the parentheses and the relevant <a href="../../concepts/glossary/index.html#tag">tag</a> and/or <a href="../../concepts/glossary/index.html#field">field</a>.</p>

<p><code>MAX()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<h4 id="examples-12">Examples</h4>

<h5 id="select-the-maximum-field-value-associated-with-a-field-key">Select the maximum field value associated with a field key</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">MAX</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="k">max</span>
<span class="c1">----                   ---
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">29</span><span class="n">T07</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">9</span><span class="p">.</span><span class="mi">964</span></code></pre></div>
<p>The query returns the greatest field value in the <code>water_level</code> field key and in the <code>h2o_feet</code> measurement.</p>

<h5 id="select-the-maximum-field-value-associated-with-each-field-key-in-a-measurement">Select the maximum field value associated with each field key in a measurement</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">MAX</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">max_water_level</span>
<span class="c1">----                   ---------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">29</span><span class="n">T07</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">9</span><span class="p">.</span><span class="mi">964</span></code></pre></div>
<p>The query returns the greatest field value for each field key that stores numerical values in the <code>h2o_feet</code> measurement.
The <code>h2o_feet</code> measurement has one numerical field: <code>water_level</code>.</p>

<h5 id="select-the-maximum-field-value-associated-with-each-field-key-that-matches-a-regular-expression">Select the maximum field value associated with each field key that matches a regular expression</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">MAX</span><span class="p">(</span><span class="o">/</span><span class="k">level</span><span class="o">/</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">max_water_level</span>
<span class="c1">----                   ---------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">29</span><span class="n">T07</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">9</span><span class="p">.</span><span class="mi">964</span></code></pre></div>
<p>The query returns the greatest field value for each field key that stores numerical values and includes the word <code>water</code> in the <code>h2o_feet</code> measurement.</p>

<h5 id="select-the-maximum-field-value-associated-with-a-field-key-and-the-relevant-tags-and-fields">Select the maximum field value associated with a field key and the relevant tags and fields</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">MAX</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">),</span><span class="s2">&#34;location&#34;</span><span class="p">,</span><span class="s2">&#34;level description&#34;</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="k">max</span>    <span class="k">location</span>      <span class="k">level</span> <span class="n">description</span>
<span class="c1">----                  ---    --------      -----------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">29</span><span class="n">T07</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">9</span><span class="p">.</span><span class="mi">964</span>  <span class="n">coyote_creek</span>  <span class="k">at</span> <span class="k">or</span> <span class="n">greater</span> <span class="k">than</span> <span class="mi">9</span> <span class="n">feet</span></code></pre></div>
<p>The query returns the greatest field value in the <code>water_level</code> field key and the relevant values of the <code>location</code> tag key and the <code>level description</code> field key.</p>

<h5 id="select-the-maximum-field-value-associated-with-a-field-key-and-include-several-clauses">Select the maximum field value associated with a field key and include several clauses</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">MAX</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-17T23:48:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:54:00Z&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">),</span><span class="o">*</span> <span class="n">fill</span><span class="p">(</span><span class="mi">9</span><span class="p">.</span><span class="mi">01</span><span class="p">)</span> <span class="k">LIMIT</span> <span class="mi">4</span> <span class="n">SLIMIT</span> <span class="mi">1</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">tags</span><span class="p">:</span> <span class="k">location</span><span class="o">=</span><span class="n">coyote_creek</span>
<span class="n">time</span>                   <span class="k">max</span>
<span class="c1">----                   ---
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">17</span><span class="n">T23</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">9</span><span class="p">.</span><span class="mi">01</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">8</span><span class="p">.</span><span class="mi">12</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">7</span><span class="p">.</span><span class="mi">887</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">7</span><span class="p">.</span><span class="mi">635</span></code></pre></div>
<p>The query returns the greatest field value in the <code>water_level</code> field key.
It covers the <a href="../data_exploration/index.html#time-syntax">time range</a> between <code>2015-08-17T23:48:00Z</code> and <code>2015-08-18T00:54:00Z</code> and <a href="../data_exploration/index.html#the-group-by-clause">groups</a> results in to 12-minute time intervals and per tag.
The query <a href="../data_exploration/index.html#group-by-time-intervals-and-fill">fills</a> empty time intervals with <code>9.01</code>, and it <a href="../data_exploration/index.html#the-limit-and-slimit-clauses">limits</a> the number of points and series returned to four and one.</p>

<p>Notice that the <a href="../data_exploration/index.html#group-by-time-intervals"><code>GROUP BY time()</code> clause</a> overrides the points&rsquo; original timestamps.
The timestamps in the results indicate the the start of each 12-minute time interval;
the first point in the results covers the time interval between <code>2015-08-17T23:48:00Z</code> and just before <code>2015-08-18T00:00:00Z</code> and the last point in the results covers the time interval between <code>2015-08-18T00:24:00Z</code> and just before <code>2015-08-18T00:36:00Z</code>.</p>

<a class="dashingAutolink" name="autolink-15"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/MIN%28%29"></a><h3 id="min">MIN()</h3>

<p>Returns the lowest <a href="../../concepts/glossary/index.html#field-value">field value</a>.</p>

<h4 id="syntax-13">Syntax</h4>

<pre><code>SELECT MIN(&lt;field_key&gt;)[,&lt;tag_key(s)&gt;|&lt;field_key(s)&gt;] [INTO_clause] FROM_clause [WHERE_clause] [GROUP_BY_clause] [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p><code>MIN(field_key)</code><br/>
Returns the lowest field value associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>.</p>

<p><code>MIN(/regular_expression/)</code><br/>
Returns the lowest field value associated with each field key that matches the <a href="../data_exploration/index.html#regular-expressions">regular expression</a>.</p>

<p><code>MIN(*)</code><br/>
Returns the lowest field value associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a>.</p>

<p><code>MIN(field_key),tag_key(s),field_key(s)</code><br/>
Returns the lowest field value associated with the field key in the parentheses and the relevant <a href="../../concepts/glossary/index.html#tag">tag</a> and/or <a href="../../concepts/glossary/index.html#field">field</a>.</p>

<p><code>MIN()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<h4 id="examples-13">Examples</h4>

<h5 id="select-the-minimum-field-value-associated-with-a-field-key">Select the minimum field value associated with a field key</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">MIN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="k">min</span>
<span class="c1">----                   ---
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">29</span><span class="n">T14</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">61</span></code></pre></div>
<p>The query returns the lowest field value in the <code>water_level</code> field key and in the <code>h2o_feet</code> measurement.</p>

<h5 id="select-the-minimum-field-value-associated-with-each-field-key-in-a-measurement">Select the minimum field value associated with each field key in a measurement</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">MIN</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">min_water_level</span>
<span class="c1">----                   ---------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">29</span><span class="n">T14</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">61</span></code></pre></div>
<p>The query returns the lowest field value for each field key that stores numerical values in the <code>h2o_feet</code> measurement.
The <code>h2o_feet</code> measurement has one numerical field: <code>water_level</code>.</p>

<h5 id="select-the-minimum-field-value-associated-with-each-field-key-that-matches-a-regular-expression">Select the minimum field value associated with each field key that matches a regular expression</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">MIN</span><span class="p">(</span><span class="o">/</span><span class="k">level</span><span class="o">/</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">min_water_level</span>
<span class="c1">----                   ---------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">29</span><span class="n">T14</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">61</span></code></pre></div>
<p>The query returns the lowest field value for each field key that stores numerical values and includes the word <code>water</code> in the <code>h2o_feet</code> measurement.</p>

<h5 id="select-the-minimum-field-value-associated-with-a-field-key-and-the-relevant-tags-and-fields">Select the minimum field value associated with a field key and the relevant tags and fields</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">MIN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">),</span><span class="s2">&#34;location&#34;</span><span class="p">,</span><span class="s2">&#34;level description&#34;</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="k">min</span>    <span class="k">location</span>      <span class="k">level</span> <span class="n">description</span>
<span class="c1">----                  ---    --------      -----------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">29</span><span class="n">T14</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">61</span>  <span class="n">coyote_creek</span>  <span class="n">below</span> <span class="mi">3</span> <span class="n">feet</span></code></pre></div>
<p>The query returns the lowest field value in the <code>water_level</code> field key and the relevant values of the <code>location</code> tag key and the <code>level description</code> field key.</p>

<h5 id="select-the-minimum-field-value-associated-with-a-field-key-and-include-several-clauses">Select the minimum field value associated with a field key and include several clauses</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">MIN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-17T23:48:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:54:00Z&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">),</span><span class="o">*</span> <span class="n">fill</span><span class="p">(</span><span class="mi">9</span><span class="p">.</span><span class="mi">01</span><span class="p">)</span> <span class="k">LIMIT</span> <span class="mi">4</span> <span class="n">SLIMIT</span> <span class="mi">1</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">tags</span><span class="p">:</span> <span class="k">location</span><span class="o">=</span><span class="n">coyote_creek</span>
<span class="n">time</span>                   <span class="k">min</span>
<span class="c1">----                   ---
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">17</span><span class="n">T23</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">9</span><span class="p">.</span><span class="mi">01</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">8</span><span class="p">.</span><span class="mi">005</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">7</span><span class="p">.</span><span class="mi">762</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">7</span><span class="p">.</span><span class="mi">5</span></code></pre></div>
<p>The query returns the lowest field value in the <code>water_level</code> field key.
It covers the <a href="../data_exploration/index.html#time-syntax">time range</a> between <code>2015-08-17T23:48:00Z</code> and <code>2015-08-18T00:54:00Z</code> and <a href="../data_exploration/index.html#the-group-by-clause">groups</a> results in to 12-minute time intervals and per tag.
The query <a href="../data_exploration/index.html#group-by-time-intervals-and-fill">fills</a> empty time intervals with <code>9.01</code>, and it <a href="../data_exploration/index.html#the-limit-and-slimit-clauses">limits</a> the number of points and series returned to four and one.</p>

<p>Notice that the <a href="../data_exploration/index.html#group-by-time-intervals"><code>GROUP BY time()</code> clause</a> overrides the points&rsquo; original timestamps.
The timestamps in the results indicate the the start of each 12-minute time interval;
the first point in the results covers the time interval between <code>2015-08-17T23:48:00Z</code> and just before <code>2015-08-18T00:00:00Z</code> and the last point in the results covers the time interval between <code>2015-08-18T00:24:00Z</code> and just before <code>2015-08-18T00:36:00Z</code>.</p>

<a class="dashingAutolink" name="autolink-16"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/PERCENTILE%28%29"></a><h3 id="percentile">PERCENTILE()</h3>

<p>Returns the <code>N</code>th percentile <a href="../../concepts/glossary/index.html#field-value">field value</a>.</p>

<h4 id="syntax-14">Syntax</h4>

<pre><code>SELECT PERCENTILE(&lt;field_key&gt;, &lt;N&gt;)[,&lt;tag_key(s)&gt;|&lt;field_key(s)&gt;] [INTO_clause] FROM_clause [WHERE_clause] [GROUP_BY_clause] [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p><code>PERCENTILE(field_key,N)</code><br/>
Returns the Nth percentile field value associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>.</p>

<p><code>PERCENTILE(/regular_expression/,N)</code><br/>
Returns the Nth percentile field value associated with each field key that matches the <a href="../data_exploration/index.html#regular-expressions">regular expression</a>.</p>

<p><code>PERCENTILE(*,N)</code><br/>
Returns the Nth percentile field value associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a>.</p>

<p><code>PERCENTILE(field_key,N),tag_key(s),field_key(s)</code><br/>
Returns the Nth percentile field value associated with the field key in the parentheses and the relevant <a href="../../concepts/glossary/index.html#tag">tag</a> and/or <a href="../../concepts/glossary/index.html#field">field</a>.</p>

<p><code>N</code> must be an integer or floating point number between <code>0</code> and <code>100</code>, inclusive.
<code>PERCENTILE()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<h4 id="examples-14">Examples</h4>

<h5 id="select-the-fifth-percentile-field-value-associated-with-a-field-key">Select the fifth percentile field value associated with a field key</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">PERCENTILE</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">percentile</span>
<span class="c1">----                   ----------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">31</span><span class="n">T03</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">1</span><span class="p">.</span><span class="mi">122</span></code></pre></div>
<p>The query returns the field value that is larger than five percent of the field values in the <code>water_level</code> field key and in the <code>h2o_feet</code> measurement.</p>

<h5 id="select-the-fifth-percentile-field-value-associated-with-each-field-key-in-a-measurement">Select the fifth percentile field value associated with each field key in a measurement</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">PERCENTILE</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">percentile_water_level</span>
<span class="c1">----                   ----------------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">31</span><span class="n">T03</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">1</span><span class="p">.</span><span class="mi">122</span></code></pre></div>
<p>The query returns the field value that is larger than five percent of the field values in each field key that stores numerical values in the <code>h2o_feet</code> measurement.
The <code>h2o_feet</code> measurement has one numerical field: <code>water_level</code>.</p>

<h5 id="select-fifth-percentile-field-value-associated-with-each-field-key-that-matches-a-regular-expression">Select fifth percentile field value associated with each field key that matches a regular expression</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">PERCENTILE</span><span class="p">(</span><span class="o">/</span><span class="k">level</span><span class="o">/</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">percentile_water_level</span>
<span class="c1">----                   ----------------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">31</span><span class="n">T03</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">1</span><span class="p">.</span><span class="mi">122</span></code></pre></div>
<p>The query returns the field value that is larger than five percent of the field values in each field key that stores numerical values and includes the word <code>water</code> in the <code>h2o_feet</code> measurement.</p>

<h5 id="select-the-fifth-percentile-field-values-associated-with-a-field-key-and-the-relevant-tags-and-fields">Select the fifth percentile field values associated with a field key and the relevant tags and fields</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">PERCENTILE</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span><span class="s2">&#34;location&#34;</span><span class="p">,</span><span class="s2">&#34;level description&#34;</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">percentile</span>  <span class="k">location</span>      <span class="k">level</span> <span class="n">description</span>
<span class="c1">----                  ----------  --------      -----------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">31</span><span class="n">T03</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">122</span>       <span class="n">coyote_creek</span>  <span class="n">below</span> <span class="mi">3</span> <span class="n">feet</span></code></pre></div>
<p>The query returns the field value that is larger than five percent of the field values in the <code>water_level</code> field key and the relevant values of the <code>location</code> tag key and the <code>level description</code> field key.</p>

<h5 id="select-the-twentieth-percentile-field-value-associated-with-a-field-key-and-include-several-clauses">Select the twentieth percentile field value associated with a field key and include several clauses</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">PERCENTILE</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">,</span><span class="mi">20</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-17T23:48:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:54:00Z&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">24</span><span class="n">m</span><span class="p">)</span> <span class="n">fill</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span> <span class="k">LIMIT</span> <span class="mi">2</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">percentile</span>
<span class="c1">----                   ----------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">17</span><span class="n">T23</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">15</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">064</span></code></pre></div>
<p>The query returns the field value that is larger than 20 percent of the values in the <code>water_level</code> field key.
It covers the <a href="../data_exploration/index.html#time-syntax">time range</a> between <code>2015-08-17T23:48:00Z</code> and <code>2015-08-18T00:54:00Z</code> and <a href="../data_exploration/index.html#group-by-time-intervals">groups</a> results into 24-minute intervals.
It <a href="../data_exploration/index.html#group-by-time-intervals-and-fill">fills</a> empty time intervals with <code>15</code> and it <a href="../data_exploration/index.html#the-limit-and-slimit-clauses">limits</a> the number of points returned to two.</p>

<p>Notice that the <a href="../data_exploration/index.html#group-by-time-intervals"><code>GROUP BY time()</code> clause</a> overrides the points&rsquo; original timestamps.
The timestamps in the results indicate the the start of each 24-minute time interval; the first point in the results covers the time interval between <code>2015-08-17T23:36:00Z</code> and just before <code>2015-08-18T00:00:00Z</code> and the last point in the results covers the time interval between <code>2015-08-18T00:00:00Z</code> and just before <code>2015-08-18T00:24:00Z</code>.</p>

<h4 id="common-issues-with-percentile">Common Issues with PERCENTILE()</h4>

<h5 id="percentile-compared-to-other-influxql-functions">PERCENTILE() compared to other InfluxQL functions</h5>

<ul>
<li><code>PERCENTILE(&lt;field_key&gt;,100)</code> is equivalent to <a href="index.html#max"><code>MAX(&lt;field_key&gt;)</code></a>.</li>
<li><code>PERCENTILE(&lt;field_key&gt;, 50)</code> is nearly equivalent to <a href="index.html#median"><code>MEDIAN(&lt;field_key&gt;)</code></a>, except the <code>MEDIAN()</code> function returns the average of the two middle values if the field key contains an even number of field values.</li>
<li><code>PERCENTILE(&lt;field_key&gt;,0)</code> is not equivalent to <a href="index.html#min"><code>MIN(&lt;field_key&gt;)</code></a>. This is a known <a href="https://github.com/influxdata/influxdb/issues/4418">issue</a>.</li>
</ul>

<a class="dashingAutolink" name="autolink-17"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/SAMPLE%28%29"></a><h3 id="sample">SAMPLE()</h3>

<p>Returns a random sample of <code>N</code> <a href="../../concepts/glossary/index.html#field-value">field values</a>.
<code>SAMPLE()</code> uses <a href="https://en.wikipedia.org/wiki/Reservoir_sampling">reservoir sampling</a> to generate the random points.</p>

<h4 id="syntax-15">Syntax</h4>

<pre><code>SELECT SAMPLE(&lt;field_key&gt;, &lt;N&gt;)[,&lt;tag_key(s)&gt;|&lt;field_key(s)&gt;] [INTO_clause] FROM_clause [WHERE_clause] [GROUP_BY_clause] [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p><code>SAMPLE(field_key,N)</code><br/>
Returns N randomly selected field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>.</p>

<p><code>SAMPLE(/regular_expression/,N)</code><br/>
Returns N randomly selected field values associated with each field key that matches the <a href="../data_exploration/index.html#regular-expressions">regular expression</a>.</p>

<p><code>SAMPLE(*,N)</code><br/>
Returns N randomly selected field values associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a>.</p>

<p><code>SAMPLE(field_key,N),tag_key(s),field_key(s)</code><br/>
Returns N randomly selected field values associated with the field key in the parentheses and the relevant <a href="../../concepts/glossary/index.html#tag">tag</a> and/or <a href="../../concepts/glossary/index.html#field">field</a>.</p>

<p><code>N</code> must be an integer.
<code>SAMPLE()</code> supports all field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<h4 id="examples-15">Examples</h4>

<h5 id="select-a-sample-of-the-field-values-associated-with-a-field-key">Select a sample of the field values associated with a field key</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">SAMPLE</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">sample</span>
<span class="c1">----                   ------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">09</span><span class="n">T21</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">5</span><span class="p">.</span><span class="mi">659</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">18</span><span class="n">T10</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">6</span><span class="p">.</span><span class="mi">939</span></code></pre></div>
<p>The query returns two randomly selected points from the <code>water_level</code> field key and in the <code>h2o_feet</code> measurement.</p>

<h4 id="select-a-sample-of-the-field-values-associated-with-each-field-key-in-a-measurement">Select a sample of the field values associated with each field key in a measurement</h4>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">SAMPLE</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">sample_level</span> <span class="n">description</span>   <span class="n">sample_water_level</span>
<span class="c1">----                   ------------------------   ------------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span><span class="n">T17</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>                              <span class="mi">3</span><span class="p">.</span><span class="mi">284</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">03</span><span class="n">T04</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="n">below</span> <span class="mi">3</span> <span class="n">feet</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">03</span><span class="n">T20</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="k">between</span> <span class="mi">3</span> <span class="k">and</span> <span class="mi">6</span> <span class="n">feet</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">08</span><span class="n">T21</span><span class="p">:</span><span class="mi">54</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>                              <span class="mi">3</span><span class="p">.</span><span class="mi">412</span></code></pre></div>
<p>The query returns two randomly selected points for each field key in the <code>h2o_feet</code> measurement.
The <code>h2o_feet</code> measurement has two field keys: <code>level description</code> and <code>water_level</code>.</p>

<h5 id="select-a-sample-of-the-field-values-associated-with-each-field-key-that-matches-a-regular-expression">Select a sample of the field values associated with each field key that matches a regular expression</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">SAMPLE</span><span class="p">(</span><span class="o">/</span><span class="k">level</span><span class="o">/</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">sample_level</span> <span class="n">description</span>   <span class="n">sample_water_level</span>
<span class="c1">----                   ------------------------   ------------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">30</span><span class="n">T05</span><span class="p">:</span><span class="mi">54</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="k">between</span> <span class="mi">6</span> <span class="k">and</span> <span class="mi">9</span> <span class="n">feet</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">07</span><span class="n">T01</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>                              <span class="mi">7</span><span class="p">.</span><span class="mi">854</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">09</span><span class="n">T20</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>                              <span class="mi">7</span><span class="p">.</span><span class="mi">32</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">13</span><span class="n">T19</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="k">between</span> <span class="mi">3</span> <span class="k">and</span> <span class="mi">6</span> <span class="n">feet</span></code></pre></div>
<p>The query returns two randomly selected points for each field key that includes the word <code>level</code> in the <code>h2o_feet</code> measurement.</p>

<h5 id="select-a-sample-of-the-field-values-associated-with-a-field-key-and-the-relevant-tags-and-fields">Select a sample of the field values associated with a field key and the relevant tags and fields</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">SAMPLE</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="s2">&#34;location&#34;</span><span class="p">,</span><span class="s2">&#34;level description&#34;</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">sample</span>  <span class="k">location</span>      <span class="k">level</span> <span class="n">description</span>
<span class="c1">----                  ------  --------      -----------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">29</span><span class="n">T10</span><span class="p">:</span><span class="mi">54</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">5</span><span class="p">.</span><span class="mi">689</span>   <span class="n">coyote_creek</span>  <span class="k">between</span> <span class="mi">3</span> <span class="k">and</span> <span class="mi">6</span> <span class="n">feet</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">08</span><span class="n">T15</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">6</span><span class="p">.</span><span class="mi">391</span>   <span class="n">coyote_creek</span>  <span class="k">between</span> <span class="mi">6</span> <span class="k">and</span> <span class="mi">9</span> <span class="n">feet</span></code></pre></div>
<p>The query returns two randomly selected points from the <code>water_level</code> field key and the relevant values of the <code>location</code> tag and the <code>level description</code> field.</p>

<h5 id="select-a-sample-of-the-field-values-associated-with-a-field-key-and-include-several-clauses">Select a sample of the field values associated with a field key and include several clauses</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">SAMPLE</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">18</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">sample</span>
<span class="c1">----                   ------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">028</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">051</span></code></pre></div>
<p>The query returns one randomly selected point from the <code>water_level</code> field key.
It covers the <a href="../data_exploration/index.html#time-syntax">time range</a> between <code>2015-08-18T00:00:00Z</code> and <code>2015-08-18T00:30:00Z</code> and <a href="../data_exploration/index.html#group-by-time-intervals">groups</a> results into 18-minute intervals.</p>

<p>Notice that the <a href="../data_exploration/index.html#group-by-time-intervals"><code>GROUP BY time()</code> clause</a> does not override the points&rsquo; original timestamps.
See <a href="index.html#issue-1-sample-with-a-group-by-time-clause">Issue 1</a> in the section below for a more detailed explanation of that behavior.</p>

<h4 id="common-issues-with-sample">Common Issues with <code>SAMPLE()</code></h4>

<h5 id="sample-with-a-group-by-time-clause"><code>SAMPLE()</code> with a <code>GROUP BY time()</code> clause</h5>

<p>Queries with <code>SAMPLE()</code> and a <code>GROUP BY time()</code> clause return the specified
number of points (<code>N</code>) per <code>GROUP BY time()</code> interval.
For
<a href="../data_exploration/index.html#group-by-time-intervals">most <code>GROUP BY time()</code> queries</a>,
the returned timestamps mark the start of the <code>GROUP BY time()</code> interval.
<code>GROUP BY time()</code> queries with the <code>SAMPLE()</code> function behave differently;
they maintain the timestamp of the original data point.</p>

<h6 id="example-5">Example</h6>

<p>The query below returns two randomly selected points per 18-minute
<code>GROUP BY time()</code> interval.
Notice that the returned timestamps are the points&rsquo; original timestamps; they
are not forced to match the start of the <code>GROUP BY time()</code> intervals.</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">SAMPLE</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">18</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">sample</span>
<span class="c1">----                   ------
</span><span class="c1"></span>                           <span class="n">__</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">116</span> <span class="o">|</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">028</span> <span class="o">|</span> <span class="o">&lt;</span><span class="c1">------- Randomly-selected points for the first time interval
</span><span class="c1"></span>                           <span class="c1">--
</span><span class="c1"></span>                           <span class="n">__</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">126</span> <span class="o">|</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">051</span> <span class="o">|</span> <span class="o">&lt;</span><span class="c1">------- Randomly-selected points for the second time interval
</span><span class="c1"></span>                           <span class="c1">--</span></code></pre></div>
<a class="dashingAutolink" name="autolink-18"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/TOP%28%29"></a><h3 id="top">TOP()</h3>

<p>Returns the greatest <code>N</code> <a href="../../concepts/glossary/index.html#field-value">field values</a>.</p>

<h4 id="syntax-16">Syntax</h4>

<pre><code>SELECT TOP( &lt;field_key&gt;[,&lt;tag_key(s)&gt;],&lt;N&gt; )[,&lt;tag_key(s)&gt;|&lt;field_key(s)&gt;] [INTO_clause] FROM_clause [WHERE_clause] [GROUP_BY_clause] [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p><code>TOP(field_key,N)</code><br/>
Returns the greatest N field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>.</p>

<p><code>TOP(field_key,tag_key(s),N)</code><br/>
Returns the greatest field value for N tag values of the <a href="../../concepts/glossary/index.html#tag-key">tag key</a>.</p>

<p><code>TOP(field_key,N),tag_key(s),field_key(s)</code><br/>
Returns the greatest N field values associated with the field key in the parentheses and the relevant <a href="../../concepts/glossary/index.html#tag">tag</a> and/or <a href="../../concepts/glossary/index.html#field">field</a>.</p>

<p><code>TOP()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<blockquote>
<p><strong>Notes:</strong></p>

<ul>
<li><code>TOP()</code> returns the field value with the earliest timestamp if there&rsquo;s a tie between two or more values for the greatest value.</li>
<li><code>TOP()</code> differs from other InfluxQL functions when combined with an <a href="../data_exploration/index.html#the-into-clause"><code>INTO</code> clause</a>.
See the <a href="index.html#common-issues-with-top">Common Issues</a> section for more information.</li>
</ul>
</blockquote>

<h4 id="examples-16">Examples</h4>

<h5 id="select-the-top-three-field-values-associated-with-a-field-key">Select the top three field values associated with a field key</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">TOP</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">top</span>
<span class="c1">----                   ---
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">29</span><span class="n">T07</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">9</span><span class="p">.</span><span class="mi">957</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">29</span><span class="n">T07</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">9</span><span class="p">.</span><span class="mi">964</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">29</span><span class="n">T07</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">9</span><span class="p">.</span><span class="mi">954</span></code></pre></div>
<p>The query returns the greatest three field values in the <code>water_level</code> field key and in the <code>h2o_feet</code> <a href="../../concepts/glossary/index.html#measurement">measurement</a>.</p>

<h5 id="select-the-top-field-value-associated-with-a-field-key-for-two-tags">Select the top field value associated with a field key for two tags</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">TOP</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">,</span><span class="s2">&#34;location&#34;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">top</span>     <span class="k">location</span>
<span class="c1">----                   ---     --------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">29</span><span class="n">T03</span><span class="p">:</span><span class="mi">54</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">7</span><span class="p">.</span><span class="mi">205</span>   <span class="n">santa_monica</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">29</span><span class="n">T07</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">9</span><span class="p">.</span><span class="mi">964</span>   <span class="n">coyote_creek</span></code></pre></div>
<p>The query returns the greatest field values in the <code>water_level</code> field key for two tag values associated with the <code>location</code> tag key.</p>

<h5 id="select-the-top-four-field-values-associated-with-a-field-key-and-the-relevant-tags-and-fields">Select the top four field values associated with a field key and the relevant tags and fields</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">TOP</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span><span class="s2">&#34;location&#34;</span><span class="p">,</span><span class="s2">&#34;level description&#34;</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">top</span>    <span class="k">location</span>      <span class="k">level</span> <span class="n">description</span>
<span class="c1">----                  ---    --------      -----------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">29</span><span class="n">T07</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">9</span><span class="p">.</span><span class="mi">957</span>  <span class="n">coyote_creek</span>  <span class="k">at</span> <span class="k">or</span> <span class="n">greater</span> <span class="k">than</span> <span class="mi">9</span> <span class="n">feet</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">29</span><span class="n">T07</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">9</span><span class="p">.</span><span class="mi">964</span>  <span class="n">coyote_creek</span>  <span class="k">at</span> <span class="k">or</span> <span class="n">greater</span> <span class="k">than</span> <span class="mi">9</span> <span class="n">feet</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">29</span><span class="n">T07</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">9</span><span class="p">.</span><span class="mi">954</span>  <span class="n">coyote_creek</span>  <span class="k">at</span> <span class="k">or</span> <span class="n">greater</span> <span class="k">than</span> <span class="mi">9</span> <span class="n">feet</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">29</span><span class="n">T07</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">9</span><span class="p">.</span><span class="mi">941</span>  <span class="n">coyote_creek</span>  <span class="k">at</span> <span class="k">or</span> <span class="n">greater</span> <span class="k">than</span> <span class="mi">9</span> <span class="n">feet</span></code></pre></div>
<p>The query returns the greatest four field values in the <code>water_level</code> field key and the relevant values of the <code>location</code> tag key and the <code>level description</code> field key.</p>

<h5 id="select-the-top-three-field-values-associated-with-a-field-key-and-include-several-clauses">Select the top three field values associated with a field key and include several clauses</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">TOP</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span><span class="s2">&#34;location&#34;</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:54:00Z&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">24</span><span class="n">m</span><span class="p">)</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">time</span> <span class="k">DESC</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">top</span>    <span class="k">location</span>
<span class="c1">----                  ---    --------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">7</span><span class="p">.</span><span class="mi">11</span>   <span class="n">coyote_creek</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">54</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">6</span><span class="p">.</span><span class="mi">982</span>  <span class="n">coyote_creek</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">54</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">054</span>  <span class="n">santa_monica</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">7</span><span class="p">.</span><span class="mi">635</span>  <span class="n">coyote_creek</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">7</span><span class="p">.</span><span class="mi">5</span>    <span class="n">coyote_creek</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">7</span><span class="p">.</span><span class="mi">372</span>  <span class="n">coyote_creek</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">8</span><span class="p">.</span><span class="mi">12</span>   <span class="n">coyote_creek</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">8</span><span class="p">.</span><span class="mi">005</span>  <span class="n">coyote_creek</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">7</span><span class="p">.</span><span class="mi">887</span>  <span class="n">coyote_creek</span></code></pre></div>
<p>The query returns the greatest three values in the <code>water_level</code> field key for each 24-minute <a href="../data_exploration/index.html#basic-group-by-time-syntax">interval</a> between <code>2015-08-18T00:00:00Z</code> and <code>2015-08-18T00:54:00Z</code>.
It also returns results in <a href="../data_exploration/index.html#order-by-time-desc">descending timestamp</a> order.</p>

<p>Notice that the <a href="../data_exploration/index.html#group-by-time-intervals">GROUP BY time() clause</a> does not override the points&rsquo; original timestamps.
See <a href="index.html#issue-1-top-with-a-group-by-time-clause">Issue 1</a> in the section below for a more detailed explanation of that behavior.</p>

<h4 id="common-issues-with-top">Common Issues with <code>TOP()</code></h4>

<h5 id="top-with-a-group-by-time-clause"><code>TOP()</code> with a <code>GROUP BY time()</code> clause</h5>

<p>Queries with <code>TOP()</code> and a <code>GROUP BY time()</code> clause return the specified
number of points per <code>GROUP BY time()</code> interval.
For
<a href="../data_exploration/index.html#group-by-time-intervals">most <code>GROUP BY time()</code> queries</a>,
the returned timestamps mark the start of the <code>GROUP BY time()</code> interval.
<code>GROUP BY time()</code> queries with the <code>TOP()</code> function behave differently;
they maintain the timestamp of the original data point.</p>

<h6 id="example-6">Example</h6>

<p>The query below returns two points per 18-minute
<code>GROUP BY time()</code> interval.
Notice that the returned timestamps are the points&rsquo; original timestamps; they
are not forced to match the start of the <code>GROUP BY time()</code> intervals.</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">TOP</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">18</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">top</span>
<span class="c1">----                   ------
</span><span class="c1"></span>                           <span class="n">__</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">064</span> <span class="o">|</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">116</span> <span class="o">|</span> <span class="o">&lt;</span><span class="c1">------- Greatest points for the first time interval
</span><span class="c1"></span>                           <span class="c1">--
</span><span class="c1"></span>                           <span class="n">__</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">126</span> <span class="o">|</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">051</span> <span class="o">|</span> <span class="o">&lt;</span><span class="c1">------- Greatest points for the second time interval
</span><span class="c1"></span>                           <span class="c1">--</span></code></pre></div>
<h5 id="top-and-a-tag-key-with-fewer-than-n-tag-values">TOP() and a tag key with fewer than N tag values</h5>

<p>Queries with the syntax <code>SELECT TOP(&lt;field_key&gt;,&lt;tag_key&gt;,&lt;N&gt;)</code> can return fewer points than expected.
If the tag key has <code>X</code> tag values, the query specifies <code>N</code> values, and <code>X</code> is smaller than <code>N</code>, then the query returns <code>X</code> points.</p>

<h6 id="example-7">Example</h6>

<p>The query below asks for the greatest field values of <code>water_level</code> for three tag values of the <code>location</code> tag key.
Because the <code>location</code> tag key has two tag values (<code>santa_monica</code> and <code>coyote_creek</code>), the query returns two points instead of three.</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">TOP</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">,</span><span class="s2">&#34;location&#34;</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">top</span>    <span class="k">location</span>
<span class="c1">----                  ---    --------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">29</span><span class="n">T03</span><span class="p">:</span><span class="mi">54</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">7</span><span class="p">.</span><span class="mi">205</span>  <span class="n">santa_monica</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">29</span><span class="n">T07</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">9</span><span class="p">.</span><span class="mi">964</span>  <span class="n">coyote_creek</span></code></pre></div>
<h5 id="top-tags-and-the-into-clause">TOP(), tags, and the INTO clause</h5>

<p>When combined with an <a href="../data_exploration/index.html#the-into-clause"><code>INTO</code> clause</a> and no <a href="../data_exploration/index.html#group-by-tags"><code>GROUP BY tag</code> clause</a>, most InfluxQL functions <a href="../../troubleshooting/frequently-asked-questions/index.html#why-are-my-into-queries-missing-data">convert</a> any tags in the initial data to fields in the newly written data.
This behavior also applies to the <code>TOP()</code> function unless <code>TOP()</code> includes a tag key as an argument: <code>TOP(field_key,tag_key(s),N)</code>.
In those cases, the system preserves the specified tag as a tag in the newly written data.</p>

<h6 id="example-8">Example</h6>

<p>The first query in the codeblock below returns the greatest field values in the <code>water_level</code> field key for two tag values associated with the <code>location</code> tag key.
It also writes those results to the <code>top_water_levels</code> measurement.</p>

<p>The second query <a href="../schema_exploration/index.html#show-tag-keys">shows</a> that InfluxDB preserved the <code>location</code> tag as a tag in the <code>top_water_levels</code> measurement.</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">TOP</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">,</span><span class="s2">&#34;location&#34;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="k">INTO</span> <span class="s2">&#34;top_water_levels&#34;</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="k">result</span>
<span class="n">time</span>                 <span class="n">written</span>
<span class="c1">----                 -------
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span> <span class="mi">2</span>

<span class="o">&gt;</span> <span class="k">SHOW</span> <span class="n">TAG</span> <span class="n">KEYS</span> <span class="k">FROM</span> <span class="s2">&#34;top_water_levels&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">top_water_levels</span>
<span class="n">tagKey</span>
<span class="c1">------
</span><span class="c1"></span><span class="k">location</span></code></pre></div>
<h2 id="transformations">Transformations</h2>

<a class="dashingAutolink" name="autolink-19"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/ABS%28%29"></a><h3 id="abs">ABS()</h3>

<p>Returns the absolute value of the field value.</p>

<h4 id="basic-syntax">Basic syntax</h4>

<pre><code>SELECT ABS( [ * | &lt;field_key&gt; ] ) [INTO_clause] FROM_clause [WHERE_clause] [GROUP_BY_clause] [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p><code>ABS(field_key)</code><br/>
Returns the absolute values of field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>.</p>

<!-- `ABS(/regular_expression/)`  
Returns the absolute value of field values associated with each field key that matches the [regular expression](/influxdb/v1.7/query_language/data_exploration/#regular-expressions). -->

<p><code>ABS(*)</code><br/>
Returns the absolute values of field values associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a>.</p>

<p><code>ABS()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<p>The basic syntax supports <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-tags">group by tags</a> but not <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-time-intervals">group by time</a>.
See the <a href="index.html#advanced-syntax">Advanced Syntax</a> section for how to use <code>ABS()</code> with a <code>GROUP BY time()</code> clause.</p>

<h5 id="examples-17">Examples</h5>

<p>The examples below use the following subsample of this <a href="https://gist.github.com/sanderson/8f8aec94a60b2c31a61f44a37737bfea">sample data</a>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="s2">&#34;data&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2018-06-24T12:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2018-06-24T12:05:00Z&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="k">data</span>
<span class="n">time</span>                 <span class="n">a</span>                   <span class="n">b</span>
<span class="c1">----                 -                   -
</span><span class="c1"></span><span class="mi">1529841600000000000</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">33909108671076</span>    <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">163643058925645</span>
<span class="mi">1529841660000000000</span>  <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">774984088561186</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">137034364053949</span>
<span class="mi">1529841720000000000</span>  <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">921037167720451</span>  <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">482943221384294</span>
<span class="mi">1529841780000000000</span>  <span class="o">-</span><span class="mi">1</span><span class="p">.</span><span class="mi">73880754843378</span>   <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">0729732928756677</span>
<span class="mi">1529841840000000000</span>  <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">905980032168252</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">77857552719844</span>
<span class="mi">1529841900000000000</span>  <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">891164752631417</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">741147445214238</span></code></pre></div>
<h6 id="calculate-the-absolute-values-of-field-values-associated-with-a-field-key">Calculate the absolute values of field values associated with a field key</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">ABS</span><span class="p">(</span><span class="s2">&#34;a&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;data&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2018-06-24T12:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2018-06-24T12:05:00Z&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="k">data</span>
<span class="n">time</span>                 <span class="k">abs</span>
<span class="c1">----                 ---
</span><span class="c1"></span><span class="mi">1529841600000000000</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">33909108671076</span>
<span class="mi">1529841660000000000</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">774984088561186</span>
<span class="mi">1529841720000000000</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">921037167720451</span>
<span class="mi">1529841780000000000</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">73880754843378</span>
<span class="mi">1529841840000000000</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">905980032168252</span>
<span class="mi">1529841900000000000</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">891164752631417</span></code></pre></div>
<p>The query returns the absolute values of field values in the <code>a</code> field key in the <code>data</code> measurement.</p>

<h6 id="calculate-the-absolute-values-of-field-values-associated-with-each-field-key-in-a-measurement">Calculate the absolute Values of field values associated with each field key in a measurement</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">ABS</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;data&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2018-06-24T12:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2018-06-24T12:05:00Z&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="k">data</span>
<span class="n">time</span>                 <span class="n">abs_a</span>              <span class="n">abs_b</span>
<span class="c1">----                 -----              -----
</span><span class="c1"></span><span class="mi">1529841600000000000</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">33909108671076</span>   <span class="mi">0</span><span class="p">.</span><span class="mi">163643058925645</span>
<span class="mi">1529841660000000000</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">774984088561186</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">137034364053949</span>
<span class="mi">1529841720000000000</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">921037167720451</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">482943221384294</span>
<span class="mi">1529841780000000000</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">73880754843378</span>   <span class="mi">0</span><span class="p">.</span><span class="mi">0729732928756677</span>
<span class="mi">1529841840000000000</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">905980032168252</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">77857552719844</span>
<span class="mi">1529841900000000000</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">891164752631417</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">741147445214238</span></code></pre></div>
<p>The query returns the absolute values of field values for each field key that stores
numerical values in the <code>data</code> measurement.
The <code>data</code> measurement has two numerical fields: <code>a</code> and <code>b</code>.</p>

<!-- ##### Calculate the absolute values of field values associated with each field key that matches a regular expression
```
> SELECT ABS(/a/) FROM "h2o_feet" WHERE time >= '2018-06-24T12:00:00Z' AND time <= '2018-06-24T12:05:00Z' AND "location" = 'santa_monica'

name: data
time                 abs
----                 ---
1529841600000000000  1.33909108671076
1529841660000000000  0.774984088561186
1529841720000000000  0.921037167720451
1529841780000000000  1.73880754843378
1529841840000000000  0.905980032168252
1529841900000000000  0.891164752631417
```

The query returns the absolute values of field values for each field key that stores numerical values and includes `a` in the `data` measurement. -->

<h6 id="calculate-the-absolute-values-of-field-values-associated-with-a-field-key-and-include-several-clauses">Calculate the absolute values of field values associated with a field key and include several clauses</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">ABS</span><span class="p">(</span><span class="s2">&#34;a&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;data&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2018-06-24T12:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2018-06-24T12:05:00Z&#39;</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">time</span> <span class="k">DESC</span> <span class="k">LIMIT</span> <span class="mi">4</span> <span class="k">OFFSET</span> <span class="mi">2</span>

<span class="n">name</span><span class="p">:</span> <span class="k">data</span>
<span class="n">time</span>                 <span class="k">abs</span>
<span class="c1">----                 ---
</span><span class="c1"></span><span class="mi">1529841780000000000</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">73880754843378</span>
<span class="mi">1529841720000000000</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">921037167720451</span>
<span class="mi">1529841660000000000</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">774984088561186</span>
<span class="mi">1529841600000000000</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">33909108671076</span></code></pre></div>
<p>The query returns the absolute values of field values associated with the <code>a</code> field key.
It covers the <a href="../data_exploration/index.html#time-syntax">time range</a> between <code>2018-06-24T12:00:00Z</code> and <code>2018-06-24T12:05:00Z</code> and returns results in <a href="../data_exploration/index.html#order-by-time-desc">descending timestamp order</a>.
The query also <a href="../data_exploration/index.html#the-limit-and-slimit-clauses">limits</a> the number of points returned to four and <a href="../data_exploration/index.html#the-offset-and-soffset-clauses">offsets</a> results by two points.</p>

<h4 id="advanced-syntax">Advanced syntax</h4>

<pre><code>SELECT ABS(&lt;function&gt;( [ * | &lt;field_key&gt; ] )) [INTO_clause] FROM_clause [WHERE_clause] GROUP_BY_clause [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p>The advanced syntax requires a <a href="../data_exploration/index.html#group-by-time-intervals"><code>GROUP BY time()</code> clause</a> and a nested InfluxQL function.
The query first calculates the results for the nested function at the specified <code>GROUP BY time()</code> interval and then applies the <code>ABS()</code> function to those results.</p>

<p><code>ABS()</code> supports the following nested functions:
<a href="index.html#count"><code>COUNT()</code></a>,
<a href="index.html#mean"><code>MEAN()</code></a>,
<a href="index.html#median"><code>MEDIAN()</code></a>,
<a href="index.html#mode"><code>MODE()</code></a>,
<a href="index.html#sum"><code>SUM()</code></a>,
<a href="index.html#first"><code>FIRST()</code></a>,
<a href="index.html#last"><code>LAST()</code></a>,
<a href="index.html#min"><code>MIN()</code></a>,
<a href="index.html#max"><code>MAX()</code></a>, and
<a href="index.html#percentile"><code>PERCENTILE()</code></a>.</p>

<h5 id="examples-18">Examples</h5>

<h6 id="calculate-the-absolute-values-of-mean-values">Calculate the absolute values of mean values</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">ABS</span><span class="p">(</span><span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;a&#34;</span><span class="p">))</span> <span class="k">FROM</span> <span class="s2">&#34;data&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2018-06-24T12:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2018-06-24T13:00:00Z&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="k">data</span>
<span class="n">time</span>                 <span class="k">abs</span>
<span class="c1">----                 ---
</span><span class="c1"></span><span class="mi">1529841600000000000</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">3960977256302787</span>
<span class="mi">1529842320000000000</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">0010541018316373302</span>
<span class="mi">1529843040000000000</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">04494733240283668</span>
<span class="mi">1529843760000000000</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">2553594777104415</span>
<span class="mi">1529844480000000000</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">20382988543108413</span>
<span class="mi">1529845200000000000</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">790836070736962</span></code></pre></div>
<p>The query returns the absolute values of <a href="index.html#mean">average</a> <code>a</code>s that are calculated at 12-minute intervals.</p>

<p>To get those results, InfluxDB first calculates the average <code>a</code>s at 12-minute intervals.
This step is the same as using the <code>MEAN()</code> function with the <code>GROUP BY time()</code> clause and without <code>ABS()</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;a&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;data&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2018-06-24T12:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2018-06-24T13:00:00Z&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="k">data</span>
<span class="n">time</span>                 <span class="n">mean</span>
<span class="c1">----                 ----
</span><span class="c1"></span><span class="mi">1529841600000000000</span>  <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">3960977256302787</span>
<span class="mi">1529842320000000000</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">0010541018316373302</span>
<span class="mi">1529843040000000000</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">04494733240283668</span>
<span class="mi">1529843760000000000</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">2553594777104415</span>
<span class="mi">1529844480000000000</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">20382988543108413</span>
<span class="mi">1529845200000000000</span>  <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">790836070736962</span></code></pre></div>
<p>InfluxDB then calculates absolute values of those averages.</p>

<a class="dashingAutolink" name="autolink-20"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/ACOS%28%29"></a><h3 id="acos">ACOS()</h3>

<p>Returns the arccosine (in radians) of the field value. Field values must be between -1 and 1.</p>

<h4 id="basic-syntax-1">Basic syntax</h4>

<pre><code>SELECT ACOS( [ * | &lt;field_key&gt; ] ) [INTO_clause] FROM_clause [WHERE_clause] [GROUP_BY_clause] [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p><code>ACOS(field_key)</code><br/>
Returns the arccosine of field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>.</p>

<!-- `ACOS(/regular_expression/)`  
Returns the arccosine of field values associated with each field key that matches the [regular expression](/influxdb/v1.7/query_language/data_exploration/#regular-expressions). -->

<p><code>ACOS(*)</code><br/>
Returns the arccosine of field values associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a>.</p>

<p><code>ACOS()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a> with values between -1 and 1.</p>

<p>The basic syntax supports <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-tags">group by tags</a> but not <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-time-intervals">group by time</a>.
See the <a href="index.html#advanced-syntax">Advanced Syntax</a> section for how to use <code>ACOS()</code> with a <code>GROUP BY time()</code> clause.</p>

<h5 id="examples-19">Examples</h5>

<p>The examples below use the following data sample of simulated park occupancy relative to total capacity. The important thing to note is that all field values fall within the calculable range (-1 to 1) of the <code>ACOS()</code> function:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="s2">&#34;of_capacity&#34;</span> <span class="k">FROM</span> <span class="s2">&#34;park_occupancy&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2017-05-01T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2017-05-09T00:00:00Z&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">park_occupancy</span>
<span class="n">time</span>                  <span class="n">capacity</span>
<span class="c1">----                  --------
</span><span class="c1"></span><span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">83</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">02</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">3</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">03</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">84</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">04</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">22</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">05</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">17</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">06</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">77</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">07</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">64</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">08</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">72</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">09</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">16</span></code></pre></div>
<h6 id="calculate-the-arccosine-of-field-values-associated-with-a-field-key">Calculate the arccosine of field values associated with a field key</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">ACOS</span><span class="p">(</span><span class="s2">&#34;of_capacity&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;park_occupancy&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2017-05-01T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2017-05-09T00:00:00Z&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">park_occupancy</span>
<span class="n">time</span>                  <span class="n">acos</span>
<span class="c1">----                  ----
</span><span class="c1"></span><span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">591688642426544</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">02</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">266103672779499</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">03</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">5735131044230969</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">04</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">3489818562981022</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">05</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">399966657665792</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">06</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">6919551751263169</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">07</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">8762980611683406</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">08</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">7669940078618667</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">09</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">410105673842986</span></code></pre></div>
<p>The query returns arccosine of field values in the <code>of_capacity</code> field key in the <code>park_occupancy</code> measurement.</p>

<h6 id="calculate-the-arccosine-of-field-values-associated-with-each-field-key-in-a-measurement">Calculate the arccosine of field values associated with each field key in a measurement</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">ACOS</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;park_occupancy&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2017-05-01T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2017-05-09T00:00:00Z&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">park_occupancy</span>
<span class="n">time</span>                  <span class="n">acos_of_capacity</span>
<span class="c1">----                  -------------
</span><span class="c1"></span><span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">591688642426544</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">02</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">266103672779499</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">03</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">5735131044230969</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">04</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">3489818562981022</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">05</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">399966657665792</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">06</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">6919551751263169</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">07</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">8762980611683406</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">08</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">7669940078618667</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">09</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">410105673842986</span></code></pre></div>
<p>The query returns arccosine of field values for each field key that stores numerical values in the <code>park_occupancy</code> measurement.
The <code>park_occupancy</code> measurement has one numerical field: <code>of_capacity</code>.</p>

<!-- ##### Calculate the arccosine of field values associated with each field key that matches a regular expression
```
> SELECT ACOS(/capacity/) FROM "park_occupancy" WHERE time >= '2017-05-01T00:00:00Z' AND time <= '2017-05-09T00:00:00Z'

name: park_occupancy
time                  acos_of_capacity
----                  ----------------
2017-05-01T00:00:00Z  0.591688642426544
2017-05-02T00:00:00Z  1.266103672779499
2017-05-03T00:00:00Z  0.5735131044230969
2017-05-04T00:00:00Z  1.3489818562981022
2017-05-05T00:00:00Z  1.399966657665792
2017-05-06T00:00:00Z  0.6919551751263169
2017-05-07T00:00:00Z  0.8762980611683406
2017-05-08T00:00:00Z  0.7669940078618667
2017-05-09T00:00:00Z  1.410105673842986
```

The query returns arccosine of field values for each field key that stores numerical values and includes the word `capacity` in the `park_occupancy` measurement. -->

<h6 id="calculate-the-arccosine-of-field-values-associated-with-a-field-key-and-include-several-clauses">Calculate the arccosine of field values associated with a field key and include several clauses</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">ACOS</span><span class="p">(</span><span class="s2">&#34;of_capacity&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;park_occupancy&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2017-05-01T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2017-05-09T00:00:00Z&#39;</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">time</span> <span class="k">DESC</span> <span class="k">LIMIT</span> <span class="mi">4</span> <span class="k">OFFSET</span> <span class="mi">2</span>

<span class="n">name</span><span class="p">:</span> <span class="n">park_occupancy</span>
<span class="n">time</span>                  <span class="n">acos</span>
<span class="c1">----                  ----
</span><span class="c1"></span><span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">07</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">8762980611683406</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">06</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">6919551751263169</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">05</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">399966657665792</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">04</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">3489818562981022</span></code></pre></div>
<p>The query returns arccosine of field values associated with the <code>of_capacity</code> field key.
It covers the <a href="../data_exploration/index.html#time-syntax">time range</a> between <code>2017-05-01T00:00:00Z</code> and <code>2017-05-09T00:00:00Z</code> and returns results in <a href="../data_exploration/index.html#order-by-time-desc">descending timestamp order</a>.
The query also <a href="../data_exploration/index.html#the-limit-and-slimit-clauses">limits</a> the number of points returned to four and <a href="../data_exploration/index.html#the-offset-and-soffset-clauses">offsets</a> results by two points.</p>

<h4 id="advanced-syntax-1">Advanced syntax</h4>

<pre><code>SELECT ACOS(&lt;function&gt;( [ * | &lt;field_key&gt; ] )) [INTO_clause] FROM_clause [WHERE_clause] GROUP_BY_clause [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p>The advanced syntax requires a <a href="../data_exploration/index.html#group-by-time-intervals"><code>GROUP BY time()</code> clause</a> and a nested InfluxQL function.
The query first calculates the results for the nested function at the specified <code>GROUP BY time()</code> interval and then applies the <code>ACOS()</code> function to those results.</p>

<p><code>ACOS()</code> supports the following nested functions:
<a href="index.html#count"><code>COUNT()</code></a>,
<a href="index.html#mean"><code>MEAN()</code></a>,
<a href="index.html#median"><code>MEDIAN()</code></a>,
<a href="index.html#mode"><code>MODE()</code></a>,
<a href="index.html#sum"><code>SUM()</code></a>,
<a href="index.html#first"><code>FIRST()</code></a>,
<a href="index.html#last"><code>LAST()</code></a>,
<a href="index.html#min"><code>MIN()</code></a>,
<a href="index.html#max"><code>MAX()</code></a>, and
<a href="index.html#percentile"><code>PERCENTILE()</code></a>.</p>

<h5 id="examples-20">Examples</h5>

<h6 id="calculate-the-arccosine-of-mean-values">Calculate the arccosine of mean values</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">ACOS</span><span class="p">(</span><span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;of_capacity&#34;</span><span class="p">))</span> <span class="k">FROM</span> <span class="s2">&#34;park_occupancy&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2017-05-01T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2017-05-09T00:00:00Z&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">3</span><span class="n">d</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">park_occupancy</span>
<span class="n">time</span>                  <span class="n">acos</span>
<span class="c1">----                  ----
</span><span class="c1"></span><span class="mi">2017</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">30</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">9703630732143733</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">03</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">1483422646081407</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">06</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">7812981174487247</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">09</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">410105673842986</span></code></pre></div>
<p>The query returns arccosine of <a href="index.html#mean">average</a> <code>of_capacity</code>s that are calculated at 3-day intervals.</p>

<p>To get those results, InfluxDB first calculates the average <code>of_capacity</code>s at 3-day intervals.
This step is the same as using the <code>MEAN()</code> function with the <code>GROUP BY time()</code> clause and without <code>ACOS()</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;of_capacity&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;park_occupancy&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2017-05-01T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2017-05-09T00:00:00Z&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">3</span><span class="n">d</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">park_occupancy</span>
<span class="n">time</span>                  <span class="n">mean</span>
<span class="c1">----                  ----
</span><span class="c1"></span><span class="mi">2017</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">30</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">565</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">03</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">41</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">06</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">71</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">09</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">16</span></code></pre></div>
<p>InfluxDB then calculates arccosine of those averages.</p>

<a class="dashingAutolink" name="autolink-21"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/ASIN%28%29"></a><h3 id="asin">ASIN()</h3>

<p>Returns the arcsine (in radians) of the field value. Field values must be between -1 and 1.</p>

<h4 id="basic-syntax-2">Basic syntax</h4>

<pre><code>SELECT ASIN( [ * | &lt;field_key&gt; ] ) [INTO_clause] FROM_clause [WHERE_clause] [GROUP_BY_clause] [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p><code>ASIN(field_key)</code><br/>
Returns the arcsine of field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>.</p>

<!-- `ASIN(/regular_expression/)`  
Returns the arcsine of field values associated with each field key that matches the [regular expression](/influxdb/v1.7/query_language/data_exploration/#regular-expressions). -->

<p><code>ASIN(*)</code><br/>
Returns the arcsine of field values associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a>.</p>

<p><code>ASIN()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a> with values between -1 and 1.</p>

<p>The basic syntax supports <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-tags">group by tags</a> but not <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-time-intervals">group by time</a>.
See the <a href="index.html#advanced-syntax">Advanced Syntax</a> section for how to use <code>ASIN()</code> with a <code>GROUP BY time()</code> clause.</p>

<h5 id="examples-21">Examples</h5>

<p>The examples below use the following data sample of simulated park occupancy relative to total capacity. The important thing to note is that all field values fall within the calculable range (-1 to 1) of the <code>ASIN()</code> function:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="s2">&#34;of_capacity&#34;</span> <span class="k">FROM</span> <span class="s2">&#34;park_occupancy&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2017-05-01T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2017-05-09T00:00:00Z&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">park_occupancy</span>
<span class="n">time</span>                  <span class="n">capacity</span>
<span class="c1">----                  --------
</span><span class="c1"></span><span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">83</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">02</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">3</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">03</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">84</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">04</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">22</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">05</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">17</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">06</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">77</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">07</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">64</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">08</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">72</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">09</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">16</span></code></pre></div>
<h6 id="calculate-the-arcsine-of-field-values-associated-with-a-field-key">Calculate the arcsine of field values associated with a field key</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">ASIN</span><span class="p">(</span><span class="s2">&#34;of_capacity&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;park_occupancy&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2017-05-01T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2017-05-09T00:00:00Z&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">park_occupancy</span>
<span class="n">time</span>                  <span class="n">asin</span>
<span class="c1">----                  ----
</span><span class="c1"></span><span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">9791076843683526</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">02</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">3046926540153975</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">03</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">9972832223717997</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">04</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">22181447049679442</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">05</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">1708296691291045</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">06</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">8788411516685797</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">07</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">6944982656265559</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">08</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">8038023189330299</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">09</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">1606906529519106</span></code></pre></div>
<p>The query returns arcsine of field values in the <code>of_capacity</code> field key in the <code>park_capacity</code> measurement.</p>

<h6 id="calculate-the-arcsine-of-field-values-associated-with-each-field-key-in-a-measurement">Calculate the arcsine of field values associated with each field key in a measurement</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">ASIN</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;park_occupancy&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2017-05-01T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2017-05-09T00:00:00Z&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">park_occupancy</span>
<span class="n">time</span>                  <span class="n">asin_of_capacity</span>
<span class="c1">----                  -------------
</span><span class="c1"></span><span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">9791076843683526</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">02</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">3046926540153975</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">03</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">9972832223717997</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">04</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">22181447049679442</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">05</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">1708296691291045</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">06</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">8788411516685797</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">07</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">6944982656265559</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">08</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">8038023189330299</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">09</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">1606906529519106</span></code></pre></div>
<p>The query returns arcsine of field values for each field key that stores numerical values in the <code>park_capacity</code> measurement.
The <code>h2o_feet</code> measurement has one numerical field: <code>of_capacity</code>.</p>

<!-- ##### Calculate the arcsine of field values associated with each field key that matches a regular expression
```
> SELECT ASIN(/capacity/) FROM "park_occupancy" WHERE time >= '2017-05-01T00:00:00Z' AND time <= '2017-05-09T00:00:00Z'

name: park_occupancy
time                  asin
----                  ----
2017-05-01T00:00:00Z  0.9791076843683526
2017-05-02T00:00:00Z  0.3046926540153975
2017-05-03T00:00:00Z  0.9972832223717997
2017-05-04T00:00:00Z  0.22181447049679442
2017-05-05T00:00:00Z  0.1708296691291045
2017-05-06T00:00:00Z  0.8788411516685797
2017-05-07T00:00:00Z  0.6944982656265559
2017-05-08T00:00:00Z  0.8038023189330299
2017-05-09T00:00:00Z  0.1606906529519106
```

The query returns arcsine of field values for each field key that stores numerical values and includes the word `of_capacity` in the `park_occupancy` measurement. -->

<h6 id="calculate-the-arcsine-of-field-values-associated-with-a-field-key-and-include-several-clauses">Calculate the arcsine of field values associated with a field key and include several clauses</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">ASIN</span><span class="p">(</span><span class="s2">&#34;of_capacity&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;park_occupancy&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2017-05-01T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2017-05-09T00:00:00Z&#39;</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">time</span> <span class="k">DESC</span> <span class="k">LIMIT</span> <span class="mi">4</span> <span class="k">OFFSET</span> <span class="mi">2</span>

<span class="n">name</span><span class="p">:</span> <span class="n">park_occupancy</span>
<span class="n">time</span>                  <span class="n">asin</span>
<span class="c1">----                  ----
</span><span class="c1"></span><span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">07</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">6944982656265559</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">06</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">8788411516685797</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">05</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">1708296691291045</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">04</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">22181447049679442</span></code></pre></div>
<p>The query returns arcsine of field values associated with the <code>of_capacity</code> field key.
It covers the <a href="../data_exploration/index.html#time-syntax">time range</a> between <code>2017-05-01T00:00:00Z</code> and <code>2017-05-09T00:00:00Z</code> and returns results in <a href="../data_exploration/index.html#order-by-time-desc">descending timestamp order</a>.
The query also <a href="../data_exploration/index.html#the-limit-and-slimit-clauses">limits</a> the number of points returned to four and <a href="../data_exploration/index.html#the-offset-and-soffset-clauses">offsets</a> results by two points.</p>

<h4 id="advanced-syntax-2">Advanced syntax</h4>

<pre><code>SELECT ASIN(&lt;function&gt;( [ * | &lt;field_key&gt; ] )) [INTO_clause] FROM_clause [WHERE_clause] GROUP_BY_clause [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p>The advanced syntax requires a <a href="../data_exploration/index.html#group-by-time-intervals"><code>GROUP BY time()</code> clause</a> and a nested InfluxQL function.
The query first calculates the results for the nested function at the specified <code>GROUP BY time()</code> interval and then applies the <code>ASIN()</code> function to those results.</p>

<p><code>ASIN()</code> supports the following nested functions:
<a href="index.html#count"><code>COUNT()</code></a>,
<a href="index.html#mean"><code>MEAN()</code></a>,
<a href="index.html#median"><code>MEDIAN()</code></a>,
<a href="index.html#mode"><code>MODE()</code></a>,
<a href="index.html#sum"><code>SUM()</code></a>,
<a href="index.html#first"><code>FIRST()</code></a>,
<a href="index.html#last"><code>LAST()</code></a>,
<a href="index.html#min"><code>MIN()</code></a>,
<a href="index.html#max"><code>MAX()</code></a>, and
<a href="index.html#percentile"><code>PERCENTILE()</code></a>.</p>

<h5 id="examples-22">Examples</h5>

<h6 id="calculate-the-arcsine-of-mean-values">Calculate the arcsine of mean values.</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">ASIN</span><span class="p">(</span><span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;of_capacity&#34;</span><span class="p">))</span> <span class="k">FROM</span> <span class="s2">&#34;park_occupancy&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2017-05-01T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2017-05-09T00:00:00Z&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">3</span><span class="n">d</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">park_occupancy</span>
<span class="n">time</span>                  <span class="n">asin</span>
<span class="c1">----                  ----
</span><span class="c1"></span><span class="mi">2017</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">30</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">6004332535805232</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">03</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">42245406218675574</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">06</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">7894982093461719</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">09</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">1606906529519106</span></code></pre></div>
<p>The query returns arcsine of <a href="index.html#mean">average</a> <code>of_capacity</code>s that are calculated at 3-day intervals.</p>

<p>To get those results, InfluxDB first calculates the average <code>of_capacity</code>s at 3-day intervals.
This step is the same as using the <code>MEAN()</code> function with the <code>GROUP BY time()</code> clause and without <code>ASIN()</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;of_capacity&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;park_occupancy&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2017-05-01T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2017-05-09T00:00:00Z&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">3</span><span class="n">d</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">park_occupancy</span>
<span class="n">time</span>                  <span class="n">mean</span>
<span class="c1">----                  ----
</span><span class="c1"></span><span class="mi">2017</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">30</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">565</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">03</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">41</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">06</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">71</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">09</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">16</span></code></pre></div>
<p>InfluxDB then calculates arcsine of those averages.</p>

<a class="dashingAutolink" name="autolink-22"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/ATAN%28%29"></a><h3 id="atan">ATAN()</h3>

<p>Returns the arctangent (in radians) of the field value. Field values must be between -1 and 1.</p>

<h4 id="basic-syntax-3">Basic syntax</h4>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="n">ATAN</span><span class="p">(</span> <span class="p">[</span> <span class="o">*</span> <span class="o">|</span> <span class="o">&lt;</span><span class="n">field_key</span><span class="o">&gt;</span> <span class="p">]</span> <span class="p">)</span> <span class="p">[</span><span class="n">INTO_clause</span><span class="p">]</span> <span class="n">FROM_clause</span> <span class="p">[</span><span class="n">WHERE_clause</span><span class="p">]</span> <span class="p">[</span><span class="n">GROUP_BY_clause</span><span class="p">]</span> <span class="p">[</span><span class="n">ORDER_BY_clause</span><span class="p">]</span> <span class="p">[</span><span class="n">LIMIT_clause</span><span class="p">]</span> <span class="p">[</span><span class="n">OFFSET_clause</span><span class="p">]</span> <span class="p">[</span><span class="n">SLIMIT_clause</span><span class="p">]</span> <span class="p">[</span><span class="n">SOFFSET_clause</span><span class="p">]</span></code></pre></div>
<p><code>ATAN(field_key)</code><br/>
Returns the arctangent of field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>.</p>

<!-- `ATAN(/regular_expression/)`  
Returns the arctangent of field values associated with each field key that matches the [regular expression](/influxdb/v1.7/query_language/data_exploration/#regular-expressions). -->

<p><code>ATAN(*)</code><br/>
Returns the arctangent of field values associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a>.</p>

<p><code>ATAN()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a> with values between -1 and 1.</p>

<p>The basic syntax supports <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-tags">group by tags</a> but not <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-time-intervals">group by time</a>.
See the <a href="index.html#advanced-syntax">Advanced Syntax</a> section for how to use <code>ATAN()</code> with a <code>GROUP BY time()</code> clause.</p>

<h5 id="examples-23">Examples</h5>

<p>The examples below use the following data sample of simulated park occupancy relative to total capacity. The important thing to note is that all field values fall within the calculable range (-1 to 1) of the <code>ATAN()</code> function:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="s2">&#34;of_capacity&#34;</span> <span class="k">FROM</span> <span class="s2">&#34;park_occupancy&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2017-05-01T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2017-05-09T00:00:00Z&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">park_occupancy</span>
<span class="n">time</span>                  <span class="n">capacity</span>
<span class="c1">----                  --------
</span><span class="c1"></span><span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">83</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">02</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">3</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">03</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">84</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">04</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">22</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">05</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">17</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">06</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">77</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">07</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">64</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">08</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">72</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">09</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">16</span></code></pre></div>
<h6 id="calculate-the-arctangent-of-field-values-associated-with-a-field-key">Calculate the arctangent of field values associated with a field key</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">ATAN</span><span class="p">(</span><span class="s2">&#34;of_capacity&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;park_occupancy&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2017-05-01T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2017-05-09T00:00:00Z&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">park_occupancy</span>
<span class="n">time</span>                  <span class="n">atan</span>
<span class="c1">----                  ----
</span><span class="c1"></span><span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">6927678353971222</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">02</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">2914567944778671</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">03</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">6986598247214632</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">04</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">2165503049760893</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">05</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">16839015714752992</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">06</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">6561787179913948</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">07</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">5693131911006619</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">08</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">6240230529767568</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">09</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">1586552621864014</span></code></pre></div>
<p>The query returns arctangent of field values in the <code>of_capacity</code> field key in the <code>park_occupancy</code> measurement.</p>

<h6 id="calculate-the-arctangent-of-field-values-associated-with-each-field-key-in-a-measurement">Calculate the arctangent of field values associated with each field key in a measurement</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">ATAN</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;park_occupancy&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2017-05-01T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2017-05-09T00:00:00Z&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">park_occupancy</span>
<span class="n">time</span>                  <span class="n">atan_of_capacity</span>
<span class="c1">----                  -------------
</span><span class="c1"></span><span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">6927678353971222</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">02</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">2914567944778671</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">03</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">6986598247214632</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">04</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">2165503049760893</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">05</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">16839015714752992</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">06</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">6561787179913948</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">07</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">5693131911006619</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">08</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">6240230529767568</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">09</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">1586552621864014</span></code></pre></div>
<p>The query returns arctangent of field values for each field key that stores numerical values in the <code>park_occupancy</code> measurement.
The <code>park_occupancy</code> measurement has one numerical field: <code>of_capacity</code>.</p>

<!-- ##### Calculate the arctangent of field values associated with each field key that matches a regular expression
```
> SELECT ATAN(/capacity/) FROM "park_occupancy" WHERE time >= '2017-05-01T00:00:00Z' AND time <= '2017-05-09T00:00:00Z'

name: park_occupancy
time                  atan_of_capacity
----                  -------------
2017-05-01T00:00:00Z  0.6927678353971222
2017-05-02T00:00:00Z  0.2914567944778671
2017-05-03T00:00:00Z  0.6986598247214632
2017-05-04T00:00:00Z  0.2165503049760893
2017-05-05T00:00:00Z  0.16839015714752992
2017-05-06T00:00:00Z  0.6561787179913948
2017-05-07T00:00:00Z  0.5693131911006619
2017-05-08T00:00:00Z  0.6240230529767568
2017-05-09T00:00:00Z  0.1586552621864014
```

The query returns arctangent of field values for each field key that stores numerical values and includes the word `capacity` in the `park_occupancy` measurement. -->

<h6 id="calculate-the-arctangent-of-field-values-associated-with-a-field-key-and-include-several-clauses">Calculate the arctangent of field values associated with a field key and include several clauses</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">ATAN</span><span class="p">(</span><span class="s2">&#34;of_capacity&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;park_occupancy&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2017-05-01T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2017-05-09T00:00:00Z&#39;</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">time</span> <span class="k">DESC</span> <span class="k">LIMIT</span> <span class="mi">4</span> <span class="k">OFFSET</span> <span class="mi">2</span>

<span class="n">name</span><span class="p">:</span> <span class="n">park_occupancy</span>
<span class="n">time</span>                  <span class="n">atan</span>
<span class="c1">----                  ----
</span><span class="c1"></span><span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">07</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">5693131911006619</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">06</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">6561787179913948</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">05</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">16839015714752992</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">04</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">2165503049760893</span></code></pre></div>
<p>The query returns arctangent of field values associated with the <code>of_capacity</code> field key.
It covers the <a href="../data_exploration/index.html#time-syntax">time range</a> between <code>2017-05-01T00:00:00Z</code> and <code>2017-05-09T00:00:00Z</code> and returns results in <a href="../data_exploration/index.html#order-by-time-desc">descending timestamp order</a>.
The query also <a href="../data_exploration/index.html#the-limit-and-slimit-clauses">limits</a> the number of points returned to four and <a href="../data_exploration/index.html#the-offset-and-soffset-clauses">offsets</a> results by two points.</p>

<h4 id="advanced-syntax-3">Advanced syntax</h4>

<pre><code>SELECT ATAN(&lt;function&gt;( [ * | &lt;field_key&gt; ] )) [INTO_clause] FROM_clause [WHERE_clause] GROUP_BY_clause [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p>The advanced syntax requires a <a href="../data_exploration/index.html#group-by-time-intervals"><code>GROUP BY time()</code> clause</a> and a nested InfluxQL function.
The query first calculates the results for the nested function at the specified <code>GROUP BY time()</code> interval and then applies the <code>ATAN()</code> function to those results.</p>

<p><code>ATAN()</code> supports the following nested functions:
<a href="index.html#count"><code>COUNT()</code></a>,
<a href="index.html#mean"><code>MEAN()</code></a>,
<a href="index.html#median"><code>MEDIAN()</code></a>,
<a href="index.html#mode"><code>MODE()</code></a>,
<a href="index.html#sum"><code>SUM()</code></a>,
<a href="index.html#first"><code>FIRST()</code></a>,
<a href="index.html#last"><code>LAST()</code></a>,
<a href="index.html#min"><code>MIN()</code></a>,
<a href="index.html#max"><code>MAX()</code></a>, and
<a href="index.html#percentile"><code>PERCENTILE()</code></a>.</p>

<h5 id="examples-of-advanced-syntax">Examples of advanced syntax</h5>

<h6 id="calculate-the-arctangent-of-mean-values">Calculate the arctangent of mean values.</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">ATAN</span><span class="p">(</span><span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;of_capacity&#34;</span><span class="p">))</span> <span class="k">FROM</span> <span class="s2">&#34;park_occupancy&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2017-05-01T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2017-05-09T00:00:00Z&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">3</span><span class="n">d</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">park_occupancy</span>
<span class="n">time</span>                 <span class="n">atan</span>
<span class="c1">----                 ----
</span><span class="c1"></span><span class="mi">2017</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">30</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5142865412694495</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">03</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3890972310552784</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">06</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span> <span class="mi">0</span><span class="p">.</span><span class="mi">6174058917515726</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">09</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1586552621864014</span></code></pre></div>
<p>The query returns arctangent of <a href="index.html#mean">average</a> <code>of_capacity</code>s that are calculated at 3-day intervals.</p>

<p>To get those results, InfluxDB first calculates the average <code>of_capacity</code>s at 3-day intervals.
This step is the same as using the <code>MEAN()</code> function with the <code>GROUP BY time()</code> clause and without <code>ATAN()</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;of_capacity&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;park_occupancy&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2017-05-01T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2017-05-09T00:00:00Z&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">3</span><span class="n">d</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">park_occupancy</span>
<span class="n">time</span>                  <span class="n">mean</span>
<span class="c1">----                  ----
</span><span class="c1"></span><span class="mi">2017</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">30</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">565</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">03</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">41</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">06</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">71</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">09</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">16</span></code></pre></div>
<p>InfluxDB then calculates arctangent of those averages.</p>

<a class="dashingAutolink" name="autolink-23"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/ATAN2%28%29"></a><h3 id="atan2">ATAN2()</h3>

<p>Returns the the arctangent of <code>y/x</code> in radians.</p>

<h4 id="basic-syntax-4">Basic syntax</h4>

<pre><code>SELECT ATAN2( [ * | &lt;field_key&gt; | num ], [ &lt;field_key&gt; | num ] ) [INTO_clause] FROM_clause [WHERE_clause] [GROUP_BY_clause] [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p><code>ATAN2(field_key_y, field_key_x)</code><br/>
Returns the arctangent of field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>, <code>field_key_y</code>, divided by field values associated with <code>field_key_x</code>.</p>

<!-- `ATAN2(/regular_expression/, field_key_x)`  
Returns the arctangent of field values associated with each field key that matches the [regular expression](/influxdb/v1.7/query_language/data_exploration/#regular-expressions)
divided by field values associated with `field_key_x`. -->

<p><code>ATAN2(*, field_key_x)</code><br/>
Returns the field values associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a>
divided by field values associated with <code>field_key_x</code>.</p>

<p><code>ATAN2()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<p>The basic syntax supports <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-tags">group by tags</a> but not <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-time-intervals">group by time</a>.
See the <a href="index.html#advanced-syntax">Advanced Syntax</a> section for how to use <code>ATAN2()</code> with a <code>GROUP BY time()</code> clause.</p>

<h5 id="examples-24">Examples</h5>

<p>The examples below use the following sample of simulated flight data:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="s2">&#34;altitude_ft&#34;</span><span class="p">,</span> <span class="s2">&#34;distance_ft&#34;</span> <span class="k">FROM</span> <span class="s2">&#34;flight_data&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2018-05-16T12:01:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2018-05-16T12:10:00Z&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">flight_data</span>
<span class="n">time</span>                  <span class="n">altitude_ft</span>  <span class="n">distance_ft</span>
<span class="c1">----                  -----------  -----------
</span><span class="c1"></span><span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1026</span>         <span class="mi">50094</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">02</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2549</span>         <span class="mi">53576</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">03</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">4033</span>         <span class="mi">55208</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">04</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">5579</span>         <span class="mi">58579</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">05</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">7065</span>         <span class="mi">61213</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">8589</span>         <span class="mi">64807</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">07</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">10180</span>        <span class="mi">67707</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">08</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">11777</span>        <span class="mi">69819</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">13321</span>        <span class="mi">72452</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">14885</span>        <span class="mi">75881</span></code></pre></div>
<h6 id="calculate-the-arctangent-of-field-key-y-over-field-key-x">Calculate the arctangent of field_key_y over field_key_x</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">ATAN2</span><span class="p">(</span><span class="s2">&#34;altitude_ft&#34;</span><span class="p">,</span> <span class="s2">&#34;distance_ft&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;flight_data&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2018-05-16T12:01:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2018-05-16T12:10:00Z&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">flight_data</span>
<span class="n">time</span>                  <span class="n">atan2</span>
<span class="c1">----                  -----
</span><span class="c1"></span><span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">020478631571881498</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">02</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">04754142349303296</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">03</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">07292147724575364</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">04</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">09495251193874832</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">05</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">11490822875441563</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">13176409347584003</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">07</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">14923587589682233</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">08</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">1671059946640312</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">18182893717409565</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">1937028631495223</span></code></pre></div>
<p>The query returns the arctangents of field values in the <code>altitude_ft</code> field key divided by values in the <code>distance_ft</code> field key. Both are part of the <code>flight_data</code> measurement.</p>

<h6 id="calculate-the-arctangent-of-values-associated-with-each-field-key-in-a-measurement-divided-by-field-key-x">Calculate the arctangent of values associated with each field key in a measurement divided by field_key_x</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">ATAN2</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="s2">&#34;distance_ft&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;flight_data&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2018-05-16T12:01:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2018-05-16T12:10:00Z&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">flight_data</span>
<span class="n">time</span>                  <span class="n">atan2_altitude_ft</span>     <span class="n">atan2_distance_ft</span>
<span class="c1">----                  -----------------     -----------------
</span><span class="c1"></span><span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">020478631571881498</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">7853981633974483</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">02</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">04754142349303296</span>   <span class="mi">0</span><span class="p">.</span><span class="mi">7853981633974483</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">03</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">07292147724575364</span>   <span class="mi">0</span><span class="p">.</span><span class="mi">7853981633974483</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">04</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">09495251193874832</span>   <span class="mi">0</span><span class="p">.</span><span class="mi">7853981633974483</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">05</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">11490822875441563</span>   <span class="mi">0</span><span class="p">.</span><span class="mi">7853981633974483</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">13176409347584003</span>   <span class="mi">0</span><span class="p">.</span><span class="mi">7853981633974483</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">07</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">14923587589682233</span>   <span class="mi">0</span><span class="p">.</span><span class="mi">7853981633974483</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">08</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">1671059946640312</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">7853981633974483</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">18182893717409565</span>   <span class="mi">0</span><span class="p">.</span><span class="mi">7853981633974483</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">19370286314952234</span>   <span class="mi">0</span><span class="p">.</span><span class="mi">7853981633974483</span></code></pre></div>
<p>The query returns the arctangents of all numeric field values in the <code>flight_data</code> measurement divided by values in the <code>distance_ft</code> field key.
The <code>flight_data</code> measurement has two numeric fields: <code>altitude_ft</code> and <code>distance_ft</code>.</p>

<!-- ##### Calculate the arctangent of values associated with each field key matching a regular expression divided by field_key_x
```
> SELECT ATAN2(/ft/, "distance_ft") FROM "flight_data" WHERE time >= '2018-05-16T12:01:00Z' AND time <= '2018-05-16T12:10:00Z'

name: flight_data
time                  atan2_altitude_ft     atan2_distance_ft
----                  -----------------     -----------------
2018-05-16T12:01:00Z  0.020478631571881498  0.7853981633974483
2018-05-16T12:02:00Z  0.04754142349303296   0.7853981633974483
2018-05-16T12:03:00Z  0.07292147724575364   0.7853981633974483
2018-05-16T12:04:00Z  0.09495251193874832   0.7853981633974483
2018-05-16T12:05:00Z  0.11490822875441563   0.7853981633974483
2018-05-16T12:06:00Z  0.13176409347584003   0.7853981633974483
2018-05-16T12:07:00Z  0.14923587589682233   0.7853981633974483
2018-05-16T12:08:00Z  0.1671059946640312    0.7853981633974483
2018-05-16T12:09:00Z  0.18182893717409565   0.7853981633974483
2018-05-16T12:10:00Z  0.19370286314952234   0.7853981633974483
```

The query returns the arctangents of all numeric field values in the `flight_data` measurement that match the `/ft/` regular expression divided by values in the `distance_ft` field key.
The `flight_data` measurement has two matching numeric fields: `altitude_ft` and `distance_ft`.
-->

<h6 id="calculate-the-arctangents-of-field-values-and-include-several-clauses">Calculate the arctangents of field values and include several clauses</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">ATAN2</span><span class="p">(</span><span class="s2">&#34;altitude_ft&#34;</span><span class="p">,</span> <span class="s2">&#34;distance_ft&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;flight_data&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2018-05-16T12:01:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2018-05-16T12:10:00Z&#39;</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">time</span> <span class="k">DESC</span> <span class="k">LIMIT</span> <span class="mi">4</span> <span class="k">OFFSET</span> <span class="mi">2</span>

<span class="n">name</span><span class="p">:</span> <span class="n">flight_data</span>
<span class="n">time</span>                  <span class="n">atan2</span>
<span class="c1">----                  -----
</span><span class="c1"></span><span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">08</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">1671059946640312</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">07</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">14923587589682233</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">13176409347584003</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">05</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">11490822875441563</span></code></pre></div>
<p>The query returns the arctangent of field values associated with the <code>altitude_ft</code> field key divided by the <code>distance_ft</code> field key.
It covers the <a href="../data_exploration/index.html#time-syntax">time range</a> between <code>2018-05-16T12:10:00Z</code> and <code>2018-05-16T12:10:00Z</code> and returns results in <a href="../data_exploration/index.html#order-by-time-desc">descending timestamp order</a>.
The query also <a href="../data_exploration/index.html#the-limit-and-slimit-clauses">limits</a> the number of points returned to four and <a href="../data_exploration/index.html#the-offset-and-soffset-clauses">offsets</a> results by two points.</p>

<h4 id="advanced-syntax-4">Advanced syntax</h4>

<pre><code>SELECT ATAN2(&lt;function()&gt;, &lt;function()&gt;) [INTO_clause] FROM_clause [WHERE_clause] GROUP_BY_clause [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p>The advanced syntax requires a <a href="../data_exploration/index.html#group-by-time-intervals"><code>GROUP BY time()</code> clause</a> and a nested InfluxQL function.
The query first calculates the results for the nested function at the specified <code>GROUP BY time()</code> interval and then applies the <code>ATAN2()</code> function to those results.</p>

<p><code>ATAN2()</code> supports the following nested functions:
<a href="index.html#count"><code>COUNT()</code></a>,
<a href="index.html#mean"><code>MEAN()</code></a>,
<a href="index.html#median"><code>MEDIAN()</code></a>,
<a href="index.html#mode"><code>MODE()</code></a>,
<a href="index.html#sum"><code>SUM()</code></a>,
<a href="index.html#first"><code>FIRST()</code></a>,
<a href="index.html#last"><code>LAST()</code></a>,
<a href="index.html#min"><code>MIN()</code></a>,
<a href="index.html#max"><code>MAX()</code></a>, and
<a href="index.html#percentile"><code>PERCENTILE()</code></a>.</p>

<h5 id="examples-25">Examples</h5>

<h6 id="calculate-arctangents-of-mean-values">Calculate arctangents of mean values</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">ATAN2</span><span class="p">(</span><span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;altitude_ft&#34;</span><span class="p">),</span> <span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;distance_ft&#34;</span><span class="p">))</span> <span class="k">FROM</span> <span class="s2">&#34;flight_data&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2018-05-16T12:01:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2018-05-16T13:01:00Z&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">flight_data</span>
<span class="n">time</span>                  <span class="n">atan2</span>
<span class="c1">----                  -----
</span><span class="c1"></span><span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">133815587896842</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">2662716308351908</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">2958845306108965</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">23783439588429497</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">1906803720242831</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T13</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">17291511946158172</span></code></pre></div>
<p>The query returns the argtangents of <a href="index.html#mean">average</a> <code>altitude_ft</code>s divided by average <code>distance_ft</code>s. Averages are calculated at 12-minute intervals.</p>

<p>To get those results, InfluxDB first calculates the average <code>altitude_ft</code>s and <code>distance_ft</code> at 12-minute intervals.
This step is the same as using the <code>MEAN()</code> function with the <code>GROUP BY time()</code> clause and without <code>ATAN2()</code>:
^</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;altitude_ft&#34;</span><span class="p">),</span> <span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;distance_ft&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;flight_data&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2018-05-16T12:01:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2018-05-16T13:01:00Z&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">flight_data</span>
<span class="n">time</span>                  <span class="n">mean</span>                <span class="n">mean_1</span>
<span class="c1">----                  ----                ------
</span><span class="c1"></span><span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">8674</span>                <span class="mi">64433</span><span class="p">.</span><span class="mi">181818181816</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">26419</span><span class="p">.</span><span class="mi">833333333332</span>  <span class="mi">96865</span><span class="p">.</span><span class="mi">25</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">40337</span><span class="p">.</span><span class="mi">416666666664</span>  <span class="mi">132326</span><span class="p">.</span><span class="mi">41666666666</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">41149</span><span class="p">.</span><span class="mi">583333333336</span>  <span class="mi">169743</span><span class="p">.</span><span class="mi">16666666666</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T12</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">41230</span><span class="p">.</span><span class="mi">416666666664</span>  <span class="mi">213600</span><span class="p">.</span><span class="mi">91666666666</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">16</span><span class="n">T13</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">41184</span><span class="p">.</span><span class="mi">5</span>             <span class="mi">235799</span></code></pre></div>
<p>InfluxDB then calculates the arctangents of those averages.</p>

<a class="dashingAutolink" name="autolink-24"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/CEIL%28%29"></a><h3 id="ceil">CEIL()</h3>

<p>Returns the subsequent value rounded up to the nearest integer.</p>

<h4 id="basic-syntax-5">Basic syntax</h4>

<pre><code>SELECT CEIL( [ * | &lt;field_key&gt; ] ) [INTO_clause] FROM_clause [WHERE_clause] [GROUP_BY_clause] [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p><code>CEIL(field_key)</code><br/>
Returns the field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a> rounded up to the nearest integer.</p>

<!-- `CEIL(/regular_expression/)`  
Returns the field values associated with each field key that matches the [regular expression](/influxdb/v1.7/query_language/data_exploration/#regular-expressions) rounded up to the nearest integer. -->

<p><code>CEIL(*)</code><br/>
Returns the field values associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a> rounded up to the nearest integer.</p>

<p><code>CEIL()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<p>The basic syntax supports <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-tags">group by tags</a> but not <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-time-intervals">group by time</a>.
See the <a href="index.html#advanced-syntax">Advanced Syntax</a> section for how to use <code>CEIL()</code> with a <code>GROUP BY time()</code> clause.</p>

<h5 id="examples-26">Examples</h5>

<p>The examples below use the following subsample of the <a href="../data_download/index.html"><code>NOAA_water_database</code> data</a>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="s2">&#34;water_level&#34;</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">water_level</span>
<span class="c1">----                  -----------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">064</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">116</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">028</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">126</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">041</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">051</span></code></pre></div>
<h6 id="calculate-the-ceiling-of-field-values-associated-with-a-field-key">Calculate the ceiling of field values associated with a field key</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">CEIL</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">ceil</span>
<span class="c1">----                  ----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">3</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">3</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">3</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">3</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">3</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">3</span></code></pre></div>
<p>The query returns field values in the <code>water_level</code> field key in the <code>h2o_feet</code> measurement rounded up to the nearest integer.</p>

<h6 id="calculate-the-ceiling-of-field-values-associated-with-each-field-key-in-a-measurement">Calculate the ceiling of field values associated with each field key in a measurement</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">CEIL</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">ceil_water_level</span>
<span class="c1">----                  ----------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">3</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">3</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">3</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">3</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">3</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">3</span></code></pre></div>
<p>The query returns field values for each field key that stores numerical values in the <code>h2o_feet</code> measurement rounded up to the nearest integer.
The <code>h2o_feet</code> measurement has one numerical field: <code>water_level</code>.</p>

<!-- ##### Calculate the ceiling of the field values associated with each field key that matches a regular expression
```
> SELECT CEIL(/water/) FROM "h2o_feet" WHERE time >= '2015-08-18T00:00:00Z' AND time <= '2015-08-18T00:30:00Z' AND "location" = 'santa_monica'

name: h2o_feet
time                   ceil_water_level
----                   ----------------
2015-08-18T00:00:00Z   3
2015-08-18T00:06:00Z   3
2015-08-18T00:12:00Z   3
2015-08-18T00:18:00Z   3
2015-08-18T00:24:00Z   3
2015-08-18T00:30:00Z   3
```

The query returns field values for each field key that stores numerical values and includes the word `water` in the `h2o_feet` measurement rounded up to the nearest integer. -->

<h6 id="calculate-the-ceiling-of-field-values-associated-with-a-field-key-and-include-several-clauses">Calculate the ceiling of field values associated with a field key and include several clauses</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">CEIL</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">time</span> <span class="k">DESC</span> <span class="k">LIMIT</span> <span class="mi">4</span> <span class="k">OFFSET</span> <span class="mi">2</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">ceil</span>
<span class="c1">----                  ----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">3</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">3</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">3</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">3</span></code></pre></div>
<p>The query returns field values associated with the <code>water_level</code> field key rounded up to the nearest integer.
It covers the <a href="../data_exploration/index.html#time-syntax">time range</a> between <code>2015-08-18T00:00:00Z</code> and <code>2015-08-18T00:30:00Z</code> and returns results in <a href="../data_exploration/index.html#order-by-time-desc">descending timestamp order</a>.
The query also <a href="../data_exploration/index.html#the-limit-and-slimit-clauses">limits</a> the number of points returned to four and <a href="../data_exploration/index.html#the-offset-and-soffset-clauses">offsets</a> results by two points.</p>

<h4 id="advanced-syntax-5">Advanced syntax</h4>

<pre><code>SELECT CEIL(&lt;function&gt;( [ * | &lt;field_key&gt; | /&lt;regular_expression&gt;/ ] )) [INTO_clause] FROM_clause [WHERE_clause] GROUP_BY_clause [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p>The advanced syntax requires a <a href="../data_exploration/index.html#group-by-time-intervals"><code>GROUP BY time()</code> clause</a> and a nested InfluxQL function.
The query first calculates the results for the nested function at the specified <code>GROUP BY time()</code> interval and then applies the <code>CEIL()</code> function to those results.</p>

<p><code>CEIL()</code> supports the following nested functions:
<a href="index.html#count"><code>COUNT()</code></a>,
<a href="index.html#mean"><code>MEAN()</code></a>,
<a href="index.html#median"><code>MEDIAN()</code></a>,
<a href="index.html#mode"><code>MODE()</code></a>,
<a href="index.html#sum"><code>SUM()</code></a>,
<a href="index.html#first"><code>FIRST()</code></a>,
<a href="index.html#last"><code>LAST()</code></a>,
<a href="index.html#min"><code>MIN()</code></a>,
<a href="index.html#max"><code>MAX()</code></a>, and
<a href="index.html#percentile"><code>PERCENTILE()</code></a>.</p>

<h5 id="examples-27">Examples</h5>

<h6 id="calculate-mean-values-rounded-up-to-the-nearest-integer">Calculate mean values rounded up to the nearest integer</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">CEIL</span><span class="p">(</span><span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">))</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">ceil</span>
<span class="c1">----                  ----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">3</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">3</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">3</span></code></pre></div>
<p>The query returns the <a href="index.html#mean">average</a> <code>water_level</code>s that are calculated at 12-minute intervals and rounds them up to the nearest integer.</p>

<p>To get those results, InfluxDB first calculates the average <code>water_level</code>s at 12-minute intervals.
This step is the same as using the <code>MEAN()</code> function with the <code>GROUP BY time()</code> clause and without <code>CEIL()</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">mean</span>
<span class="c1">----                   ----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">09</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">077</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">0460000000000003</span></code></pre></div>
<p>InfluxDB then rounds those averages up to the nearest integer.</p>

<a class="dashingAutolink" name="autolink-25"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/COS%28%29"></a><h3 id="cos">COS()</h3>

<p>Returns the cosine of the field value.</p>

<h4 id="basic-syntax-6">Basic syntax</h4>

<pre><code>SELECT COS( [ * | &lt;field_key&gt; ] ) [INTO_clause] FROM_clause [WHERE_clause] [GROUP_BY_clause] [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p><code>COS(field_key)</code><br/>
Returns the cosine of field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>.</p>

<!-- `COS(/regular_expression/)`  
Returns the cosine of field values associated with each field key that matches the [regular expression](/influxdb/v1.7/query_language/data_exploration/#regular-expressions). -->

<p><code>COS(*)</code><br/>
Returns the cosine of field values associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a>.</p>

<p><code>COS()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<p>The basic syntax supports <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-tags">group by tags</a> but not <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-time-intervals">group by time</a>.
See the <a href="index.html#advanced-syntax">Advanced Syntax</a> section for how to use <code>COS()</code> with a <code>GROUP BY time()</code> clause.</p>

<h5 id="examples-28">Examples</h5>

<p>The examples below use the following subsample of the <a href="../data_download/index.html"><code>NOAA_water_database</code> data</a>:
^</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="s2">&#34;water_level&#34;</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">water_level</span>
<span class="c1">----                  -----------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">064</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">116</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">028</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">126</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">041</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">051</span></code></pre></div>
<h6 id="calculate-the-cosine-of-field-values-associated-with-a-field-key">Calculate the cosine of field values associated with a field key</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">COS</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">cos</span>
<span class="c1">----                  ---
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">47345017433543124</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">5185922462666872</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">4414407189100776</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">5271163912192579</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">45306786455514825</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">4619598230611262</span></code></pre></div>
<p>The query returns cosine of field values in the <code>water_level</code> field key in the <code>h2o_feet</code> measurement.</p>

<h6 id="calculate-the-cosine-of-field-values-associated-with-each-field-key-in-a-measurement">Calculate the cosine of field values associated with each field key in a measurement</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">COS</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">cos_water_level</span>
<span class="c1">----                  ---------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">47345017433543124</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">5185922462666872</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">4414407189100776</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">5271163912192579</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">45306786455514825</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">4619598230611262</span></code></pre></div>
<p>The query returns cosine of field values for each field key that stores numerical values in the <code>h2o_feet</code> measurement.
The <code>h2o_feet</code> measurement has one numerical field: <code>water_level</code>.</p>

<!-- ##### Calculate the cosine of field values associated with each field key that matches a regular expression
```
> SELECT COS(/water/) FROM "h2o_feet" WHERE time >= '2015-08-18T00:00:00Z' AND time <= '2015-08-18T00:30:00Z' AND "location" = 'santa_monica'

name: h2o_feet
time                  cos
----                  ---
2015-08-18T00:00:00Z  -0.47345017433543124
2015-08-18T00:06:00Z  -0.5185922462666872
2015-08-18T00:12:00Z  -0.4414407189100776
2015-08-18T00:18:00Z  -0.5271163912192579
2015-08-18T00:24:00Z  -0.45306786455514825
2015-08-18T00:30:00Z  -0.4619598230611262
```

The query returns cosine of field values for each field key that stores numerical values and includes the word `water` in the `h2o_feet` measurement. -->

<h6 id="calculate-the-cosine-of-field-values-associated-with-a-field-key-and-include-several-clauses">Calculate the cosine of field values associated with a field key and include several clauses</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">COS</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">time</span> <span class="k">DESC</span> <span class="k">LIMIT</span> <span class="mi">4</span> <span class="k">OFFSET</span> <span class="mi">2</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">cos</span>
<span class="c1">----                  ---
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">5271163912192579</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">4414407189100776</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">5185922462666872</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">47345017433543124</span></code></pre></div>
<p>The query returns cosine of field values associated with the <code>water_level</code> field key.
It covers the <a href="../data_exploration/index.html#time-syntax">time range</a> between <code>2015-08-18T00:00:00Z</code> and <code>2015-08-18T00:30:00Z</code> and returns results in <a href="../data_exploration/index.html#order-by-time-desc">descending timestamp order</a>.
The query also <a href="../data_exploration/index.html#the-limit-and-slimit-clauses">limits</a> the number of points returned to four and <a href="../data_exploration/index.html#the-offset-and-soffset-clauses">offsets</a> results by two points.</p>

<h4 id="advanced-syntax-6">Advanced syntax</h4>

<pre><code>SELECT COS(&lt;function&gt;( [ * | &lt;field_key&gt; ] )) [INTO_clause] FROM_clause [WHERE_clause] GROUP_BY_clause [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p>The advanced syntax requires a <a href="../data_exploration/index.html#group-by-time-intervals"><code>GROUP BY time()</code> clause</a> and a nested InfluxQL function.
The query first calculates the results for the nested function at the specified <code>GROUP BY time()</code> interval and then applies the <code>COS()</code> function to those results.</p>

<p><code>COS()</code> supports the following nested functions:
<a href="index.html#count"><code>COUNT()</code></a>,
<a href="index.html#mean"><code>MEAN()</code></a>,
<a href="index.html#median"><code>MEDIAN()</code></a>,
<a href="index.html#mode"><code>MODE()</code></a>,
<a href="index.html#sum"><code>SUM()</code></a>,
<a href="index.html#first"><code>FIRST()</code></a>,
<a href="index.html#last"><code>LAST()</code></a>,
<a href="index.html#min"><code>MIN()</code></a>,
<a href="index.html#max"><code>MAX()</code></a>, and
<a href="index.html#percentile"><code>PERCENTILE()</code></a>.</p>

<h4 id="examples-29">Examples</h4>

<h6 id="calculate-the-cosine-of-mean-values">Calculate the cosine of mean values</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">COS</span><span class="p">(</span><span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">))</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">cos</span>
<span class="c1">----                  ---
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">49618891270599885</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">4848605136571181</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">4575195627907578</span></code></pre></div>
<p>The query returns cosine of <a href="index.html#mean">average</a> <code>water_level</code>s that are calculated at 12-minute intervals.</p>

<p>To get those results, InfluxDB first calculates the average <code>water_level</code>s at 12-minute intervals.
This step is the same as using the <code>MEAN()</code> function with the <code>GROUP BY time()</code> clause and without <code>COS()</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">mean</span>
<span class="c1">----                   ----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">09</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">077</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">0460000000000003</span></code></pre></div>
<p>InfluxDB then calculates cosine of those averages.</p>

<a class="dashingAutolink" name="autolink-26"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/CUMULATIVE_SUM%28%29"></a><h3 id="cumulative-sum">CUMULATIVE_SUM()</h3>

<p>Returns the running total of subsequent <a href="../../concepts/glossary/index.html#field-value">field values</a>.</p>

<h4 id="basic-syntax-7">Basic syntax</h4>

<pre><code>SELECT CUMULATIVE_SUM( [ * | &lt;field_key&gt; | /&lt;regular_expression&gt;/ ] ) [INTO_clause] FROM_clause [WHERE_clause] [GROUP_BY_clause] [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p><code>CUMULATIVE_SUM(field_key)</code><br/>
Returns the running total of subsequent field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>.</p>

<p><code>CUMULATIVE_SUM(/regular_expression/)</code><br/>
Returns the running total of subsequent field values associated with each field key that matches the <a href="../data_exploration/index.html#regular-expressions">regular expression</a>.</p>

<p><code>CUMULATIVE_SUM(*)</code><br/>
Returns the running total of subsequent field values associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a>.</p>

<p><code>CUMULATIVE_SUM()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<p>The basic syntax supports <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-tags">group by tags</a> but not <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-time-intervals">group by time</a>.
See the <a href="index.html#advanced-syntax">Advanced Syntax</a> section for how to use <code>CUMULATIVE_SUM()</code> with a <code>GROUP BY time()</code> clause.</p>

<h5 id="examples-30">Examples</h5>

<p>The examples below use the following subsample of the <a href="../data_download/index.html"><code>NOAA_water_database</code> data</a>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="s2">&#34;water_level&#34;</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">water_level</span>
<span class="c1">----                   -----------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">064</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">116</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">028</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">126</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">041</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">051</span></code></pre></div>
<h6 id="calculate-the-cumulative-sum-of-the-field-values-associated-with-a-field-key">Calculate the cumulative sum of the field values associated with a field key</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">CUMULATIVE_SUM</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">cumulative_sum</span>
<span class="c1">----                   --------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">064</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">4</span><span class="p">.</span><span class="mi">18</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">6</span><span class="p">.</span><span class="mi">208</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">8</span><span class="p">.</span><span class="mi">334</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">10</span><span class="p">.</span><span class="mi">375</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">12</span><span class="p">.</span><span class="mi">426</span></code></pre></div>
<p>The query returns the running total of the field values in the <code>water_level</code> field key and in the <code>h2o_feet</code> measurement.</p>

<h6 id="calculate-the-cumulative-sum-of-the-field-values-associated-with-each-field-key-in-a-measurement">Calculate the cumulative sum of the field values associated with each field key in a measurement</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">CUMULATIVE_SUM</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">cumulative_sum_water_level</span>
<span class="c1">----                   --------------------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">064</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">4</span><span class="p">.</span><span class="mi">18</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">6</span><span class="p">.</span><span class="mi">208</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">8</span><span class="p">.</span><span class="mi">334</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">10</span><span class="p">.</span><span class="mi">375</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">12</span><span class="p">.</span><span class="mi">426</span></code></pre></div>
<p>The query returns the running total of the field values for each field key that stores numerical values in the <code>h2o_feet</code> measurement.
The <code>h2o_feet</code> measurement has one numerical field: <code>water_level</code>.</p>

<h6 id="calculate-the-cumulative-sum-of-the-field-values-associated-with-each-field-key-that-matches-a-regular-expression">Calculate the cumulative sum of the field values associated with each field key that matches a regular expression</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">CUMULATIVE_SUM</span><span class="p">(</span><span class="o">/</span><span class="n">water</span><span class="o">/</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">cumulative_sum_water_level</span>
<span class="c1">----                   --------------------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">064</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">4</span><span class="p">.</span><span class="mi">18</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">6</span><span class="p">.</span><span class="mi">208</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">8</span><span class="p">.</span><span class="mi">334</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">10</span><span class="p">.</span><span class="mi">375</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">12</span><span class="p">.</span><span class="mi">426</span></code></pre></div>
<p>The query returns the running total of the field values for each field key that stores numerical values and includes the word <code>water</code> in the <code>h2o_feet</code> measurement.</p>

<h6 id="calculate-the-cumulative-sum-of-the-field-values-associated-with-a-field-key-and-include-several-clauses">Calculate the cumulative sum of the field values associated with a field key and include several clauses</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">CUMULATIVE_SUM</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">time</span> <span class="k">DESC</span> <span class="k">LIMIT</span> <span class="mi">4</span> <span class="k">OFFSET</span> <span class="mi">2</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">cumulative_sum</span>
<span class="c1">----                  --------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">6</span><span class="p">.</span><span class="mi">218</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">8</span><span class="p">.</span><span class="mi">246</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">10</span><span class="p">.</span><span class="mi">362</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">12</span><span class="p">.</span><span class="mi">426</span></code></pre></div>
<p>The query returns the running total of the field values associated with the <code>water_level</code> field key.
It covers the <a href="../data_exploration/index.html#time-syntax">time range</a> between <code>2015-08-18T00:00:00Z</code> and <code>2015-08-18T00:30:00Z</code> and returns results in <a href="../data_exploration/index.html#order-by-time-desc">descending timestamp order</a>.
The query also <a href="../data_exploration/index.html#the-limit-and-slimit-clauses">limits</a> the number of points returned to four and <a href="../data_exploration/index.html#the-offset-and-soffset-clauses">offsets</a> results by two points.</p>

<h4 id="advanced-syntax-7">Advanced syntax</h4>

<pre><code>SELECT CUMULATIVE_SUM(&lt;function&gt;( [ * | &lt;field_key&gt; | /&lt;regular_expression&gt;/ ] )) [INTO_clause] FROM_clause [WHERE_clause] GROUP_BY_clause [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p>The advanced syntax requires a <a href="../data_exploration/index.html#group-by-time-intervals"><code>GROUP BY time()</code> clause</a> and a nested InfluxQL function.
The query first calculates the results for the nested function at the specified <code>GROUP BY time()</code> interval and then applies the <code>CUMULATIVE_SUM()</code> function to those results.</p>

<p><code>CUMULATIVE_SUM()</code> supports the following nested functions:
<a href="index.html#count"><code>COUNT()</code></a>,
<a href="index.html#mean"><code>MEAN()</code></a>,
<a href="index.html#median"><code>MEDIAN()</code></a>,
<a href="index.html#mode"><code>MODE()</code></a>,
<a href="index.html#sum"><code>SUM()</code></a>,
<a href="index.html#first"><code>FIRST()</code></a>,
<a href="index.html#last"><code>LAST()</code></a>,
<a href="index.html#min"><code>MIN()</code></a>,
<a href="index.html#max"><code>MAX()</code></a>, and
<a href="index.html#percentile"><code>PERCENTILE()</code></a>.</p>

<h5 id="examples-31">Examples</h5>

<h6 id="calculate-the-cumulative-sum-of-mean-values">Calculate the cumulative sum of mean values</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">CUMULATIVE_SUM</span><span class="p">(</span><span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">))</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">cumulative_sum</span>
<span class="c1">----                   --------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">09</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">4</span><span class="p">.</span><span class="mi">167</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">6</span><span class="p">.</span><span class="mi">213</span></code></pre></div>
<p>The query returns the running total of <a href="index.html#mean">average</a> <code>water_level</code>s that are calculated at 12-minute intervals.</p>

<p>To get those results, InfluxDB first calculates the average <code>water_level</code>s at 12-minute intervals.
This step is the same as using the <code>MEAN()</code> function with the <code>GROUP BY time()</code> clause and without <code>CUMULATIVE_SUM()</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">mean</span>
<span class="c1">----                   ----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">09</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">077</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">0460000000000003</span></code></pre></div>
<p>Next, InfluxDB calculates the running total of those averages.
The second point in the final results (<code>4.167</code>) is the sum of <code>2.09</code> and <code>2.077</code>
and the third point (<code>6.213</code>) is the sum of <code>2.09</code>, <code>2.077</code>, and <code>2.0460000000000003</code>.</p>

<a class="dashingAutolink" name="autolink-27"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/DERIVATIVE%28%29"></a><h3 id="derivative">DERIVATIVE()</h3>

<p>Returns the rate of change between subsequent <a href="../../concepts/glossary/index.html#field-value">field values</a>.</p>

<h4 id="basic-syntax-8">Basic syntax</h4>

<pre><code>SELECT DERIVATIVE( [ * | &lt;field_key&gt; | /&lt;regular_expression&gt;/ ] [ , &lt;unit&gt; ] ) [INTO_clause] FROM_clause [WHERE_clause] [GROUP_BY_clause] [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p>InfluxDB calculates the difference between subsequent field values and converts those results into the rate of change per <code>unit</code>.
The <code>unit</code> argument is an integer followed by a <a href="../spec/index.html#literals">duration literal</a> and it is optional.
If the query does not specify the <code>unit</code> the unit defaults to one second (<code>1s</code>).</p>

<p><code>DERIVATIVE(field_key)</code><br/>
Returns the rate of change between subsequent field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>.</p>

<p><code>DERIVATIVE(/regular_expression/)</code><br/>
Returns the rate of change between subsequent field values associated with each field key that matches the <a href="../data_exploration/index.html#regular-expressions">regular expression</a>.</p>

<p><code>DERIVATIVE(*)</code><br/>
Returns the rate of change between subsequent field values associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a>.</p>

<p><code>DERIVATIVE()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<p>The basic syntax supports <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-tags">group by tags</a> but not <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-time-intervals">group by time</a>.
See the <a href="index.html#advanced-syntax-1">Advanced Syntax</a> section for how to use <code>DERIVATIVE()</code> with a <code>GROUP BY time()</code> clause.</p>

<h5 id="examples-32">Examples</h5>

<p>Examples 1-5 use the following subsample of the <a href="../data_download/index.html"><code>NOAA_water_database</code> data</a>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="s2">&#34;water_level&#34;</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">water_level</span>
<span class="c1">----                   -----------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">064</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">116</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">028</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">126</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">041</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">051</span></code></pre></div>
<h6 id="calculate-the-derivative-between-the-field-values-associated-with-a-field-key">Calculate the derivative between the field values associated with a field key</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">DERIVATIVE</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">derivative</span>
<span class="c1">----                   ----------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">0</span><span class="p">.</span><span class="mi">00014444444444444457</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">00024444444444444465</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">0</span><span class="p">.</span><span class="mi">0002722222222222218</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">000236111111111111</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">777777777777842</span><span class="n">e</span><span class="o">-</span><span class="mi">05</span></code></pre></div>
<p>The query returns the one-second rate of change between the field values associated with the <code>water_level</code> field key and in the <code>h2o_feet</code> measurement.</p>

<p>The first result (<code>0.00014444444444444457</code>) is the one-second rate of change between the first two subsequent field values in the raw data.
InfluxDB calculates the difference between the field values and normalizes that value to the one-second rate of change:</p>

<pre><code>(2.116 - 2.064) / (360s / 1s)
--------------    ----------
       |               |
       |          the difference between the field values&#39; timestamps / the default unit
second field value - first field value
</code></pre>

<h6 id="calculate-the-derivative-between-the-field-values-associated-with-a-field-key-and-specify-the-unit-option">Calculate the derivative between the field values associated with a field key and specify the unit option</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">DERIVATIVE</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">,</span><span class="mi">6</span><span class="n">m</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>			<span class="n">derivative</span>
<span class="c1">----			----------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>	<span class="mi">0</span><span class="p">.</span><span class="mi">052000000000000046</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>	<span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">08800000000000008</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>	<span class="mi">0</span><span class="p">.</span><span class="mi">09799999999999986</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>	<span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">08499999999999996</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>	<span class="mi">0</span><span class="p">.</span><span class="mi">010000000000000231</span></code></pre></div>
<p>The query returns the six-minute rate of change between the field values associated with the <code>water_level</code> field key and in the <code>h2o_feet</code> measurement.</p>

<p>The first result (<code>0.052000000000000046</code>) is the six-minute rate of change between the first two subsequent field values in the raw data.
InfluxDB calculates the difference between the field values and normalizes that value to the six-minute rate of change:</p>

<pre><code>(2.116 - 2.064) / (6m / 6m)
--------------    ----------
       |              |
       |          the difference between the field values&#39; timestamps / the specified unit
second field value - first field value
</code></pre>

<h6 id="calculate-the-derivative-between-the-field-values-associated-with-each-field-key-in-a-measurement-and-specify-the-unit-option">Calculate the derivative between the field values associated with each field key in a measurement and specify the unit option</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">DERIVATIVE</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="mi">3</span><span class="n">m</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span>


<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">derivative_water_level</span>
<span class="c1">----                   ----------------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">0</span><span class="p">.</span><span class="mi">026000000000000023</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">04400000000000004</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">0</span><span class="p">.</span><span class="mi">04899999999999993</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">04249999999999998</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">0</span><span class="p">.</span><span class="mi">0050000000000001155</span></code></pre></div>
<p>The query returns the three-minute rate of change between the field values associated with each field key that stores numerical values in the <code>h2o_feet</code> measurement.
The <code>h2o_feet</code> measurement has one numerical field: <code>water_level</code>.</p>

<p>The first result (<code>0.026000000000000023</code>) is the three-minute rate of change between the first two subsequent field values in the raw data.
InfluxDB calculates the difference between the field values and normalizes that value to the three-minute rate of change:</p>

<pre><code>(2.116 - 2.064) / (6m / 3m)
--------------    ----------
       |              |
       |          the difference between the field values&#39; timestamps / the specified unit
second field value - first field value
</code></pre>

<h6 id="calculate-the-derivative-between-the-field-values-associated-with-each-field-key-that-matches-a-regular-expression-and-specify-the-unit-option">Calculate the derivative between the field values associated with each field key that matches a regular expression and specify the unit option</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">DERIVATIVE</span><span class="p">(</span><span class="o">/</span><span class="n">water</span><span class="o">/</span><span class="p">,</span><span class="mi">2</span><span class="n">m</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">derivative_water_level</span>
<span class="c1">----                   ----------------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">0</span><span class="p">.</span><span class="mi">01733333333333335</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">02933333333333336</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">0</span><span class="p">.</span><span class="mi">03266666666666662</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">02833333333333332</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">0</span><span class="p">.</span><span class="mi">0033333333333334103</span></code></pre></div>
<p>The query returns the two-minute rate of change between the field values associated with each field key that stores numerical values and includes the word <code>water</code> in the <code>h2o_feet</code> measurement.</p>

<p>The first result (<code>0.01733333333333335</code>) is the two-minute rate of change between the first two subsequent field values in the raw data.
InfluxDB calculates the difference between the field values and normalizes that value to the two-minute rate of change:</p>

<pre><code>(2.116 - 2.064) / (6m / 2m)
--------------    ----------
       |              |
       |          the difference between the field values&#39; timestamps / the specified unit
second field value - first field value
</code></pre>

<h6 id="calculate-the-derivative-between-the-field-values-associated-with-a-field-key-and-include-several-clauses">Calculate the derivative between the field values associated with a field key and include several clauses</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">DERIVATIVE</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">time</span> <span class="k">DESC</span> <span class="k">LIMIT</span> <span class="mi">1</span> <span class="k">OFFSET</span> <span class="mi">2</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">derivative</span>
<span class="c1">----                   ----------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">0002722222222222218</span></code></pre></div>
<p>The query returns the one-second rate of change between the field values associated with the <code>water_level</code> field key and in the <code>h2o_feet</code> measurement.
It covers the <a href="../data_exploration/index.html#time-syntax">time range</a> between <code>2015-08-18T00:00:00Z</code> and <code>2015-08-18T00:30:00Z</code> and returns results in <a href="../data_exploration/index.html#order-by-time-desc">descending timestamp order</a>.
The query also <a href="../data_exploration/index.html#the-limit-and-slimit-clauses">limits</a> the number of points returned to one and <a href="../data_exploration/index.html#the-offset-and-soffset-clauses">offsets</a> results by two points.</p>

<p>The only result (<code>-0.0002722222222222218</code>) is the one-second rate of change between the relevant subsequent field values in the raw data.
InfluxDB calculates the difference between the field values and normalizes that value to the one-second rate of change:</p>

<pre><code>(2.126 - 2.028) / (360s / 1s)
--------------    ----------
       |              |
       |          the difference between the field values&#39; timestamps / the default unit
second field value - first field value
</code></pre>

<h4 id="advanced-syntax-8">Advanced syntax</h4>

<pre><code>SELECT DERIVATIVE(&lt;function&gt; ([ * | &lt;field_key&gt; | /&lt;regular_expression&gt;/ ]) [ , &lt;unit&gt; ] ) [INTO_clause] FROM_clause [WHERE_clause] GROUP_BY_clause [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p>The advanced syntax requires a <a href="../data_exploration/index.html#group-by-time-intervals"><code>GROUP BY time()</code> clause</a> and a nested InfluxQL function.
The query first calculates the results for the nested function at the specified <code>GROUP BY time()</code> interval and then applies the <code>DERIVATIVE()</code> function to those results.</p>

<p>The <code>unit</code> argument is an integer followed by a <a href="../spec/index.html#literals">duration literal</a> and it is optional.
If the query does not specify the <code>unit</code> the <code>unit</code> defaults to the <code>GROUP BY time()</code> interval.
Note that this behavior is different from the <a href="index.html#basic-syntax-1">basic syntax&rsquo;s</a> default behavior.</p>

<p><code>DERIVATIVE()</code> supports the following nested functions:
<a href="index.html#count"><code>COUNT()</code></a>,
<a href="index.html#mean"><code>MEAN()</code></a>,
<a href="index.html#median"><code>MEDIAN()</code></a>,
<a href="index.html#mode"><code>MODE()</code></a>,
<a href="index.html#sum"><code>SUM()</code></a>,
<a href="index.html#first"><code>FIRST()</code></a>,
<a href="index.html#last"><code>LAST()</code></a>,
<a href="index.html#min"><code>MIN()</code></a>,
<a href="index.html#max"><code>MAX()</code></a>, and
<a href="index.html#percentile"><code>PERCENTILE()</code></a>.</p>

<h5 id="examples-33">Examples</h5>

<h6 id="calculate-the-derivative-of-mean-values">Calculate the derivative of mean values</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">DERIVATIVE</span><span class="p">(</span><span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">))</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">derivative</span>
<span class="c1">----                   ----------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">0129999999999999</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">030999999999999694</span></code></pre></div>
<p>The query returns the 12-minute rate of change between <a href="index.html#mean">average</a> <code>water_level</code>s that are calculated at 12-minute intervals.</p>

<p>To get those results, InfluxDB first calculates the average <code>water_level</code>s at 12-minute intervals.
This step is the same as using the <code>MEAN()</code> function with the <code>GROUP BY time()</code> clause and without <code>DERIVATIVE()</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">mean</span>
<span class="c1">----                   ----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">09</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">077</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">0460000000000003</span></code></pre></div>
<p>Next, InfluxDB calculates the 12-minute rate of change between those averages.
The first result (<code>-0.0129999999999999</code>) is the 12-minute rate of change between the first two averages.
InfluxDB calculates the difference between the field values and normalizes that value to the 12-minute rate of change.</p>

<pre><code>(2.077 - 2.09) / (12m / 12m)
-------------    ----------
       |               |
       |          the difference between the field values&#39; timestamps / the default unit
second field value - first field value
</code></pre>

<h6 id="calculate-the-derivative-of-mean-values-and-specify-the-unit-option">Calculate the derivative of mean values and specify the unit option</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">DERIVATIVE</span><span class="p">(</span><span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">),</span><span class="mi">6</span><span class="n">m</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">derivative</span>
<span class="c1">----                   ----------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">00649999999999995</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">015499999999999847</span></code></pre></div>
<p>The query returns the six-minute rate of change between average <code>water_level</code>s that are calculated at 12-minute intervals.</p>

<p>To get those results, InfluxDB first calculates the average <code>water_level</code>s at 12-minute intervals.
This step is the same as using the <code>MEAN()</code> function with the <code>GROUP BY time()</code> clause and without <code>DERIVATIVE()</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">mean</span>
<span class="c1">----                   ----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">09</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">077</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">0460000000000003</span></code></pre></div>
<p>Next, InfluxDB calculates the six-minute rate of change between those averages.
The first result (<code>-0.00649999999999995</code>) is the six-minute rate of change between the first two averages.
InfluxDB calculates the difference between the field values and normalizes that value to the six-minute rate of change.</p>

<pre><code>(2.077 - 2.09) / (12m / 6m)
-------------    ----------
       |               |
       |          the difference between the field values&#39; timestamps / the specified unit
second field value - first field value
</code></pre>

<a class="dashingAutolink" name="autolink-28"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/DIFFERENCE%28%29"></a><h3 id="difference">DIFFERENCE()</h3>

<p>Returns the result of subtraction between subsequent <a href="../../concepts/glossary/index.html#field-value">field values</a>.</p>

<h4 id="basic-syntax-9">Basic syntax</h4>

<pre><code>SELECT DIFFERENCE( [ * | &lt;field_key&gt; | /&lt;regular_expression&gt;/ ] ) [INTO_clause] FROM_clause [WHERE_clause] [GROUP_BY_clause] [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p><code>DIFFERENCE(field_key)</code><br/>
Returns the difference between subsequent field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>.</p>

<p><code>DIFFERENCE(/regular_expression/)</code><br/>
Returns the difference between subsequent field values associated with each field key that matches the <a href="../data_exploration/index.html#regular-expressions">regular expression</a>.</p>

<p><code>DIFFERENCE(*)</code><br/>
Returns the difference between subsequent field values associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a>.</p>

<p><code>DIFFERENCE()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<p>The basic syntax supports <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-tags">group by tags</a> but not <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-time-intervals">group by time</a>.
See the <a href="index.html#advanced-syntax-2">Advanced Syntax</a> section for how to use <code>DIFFERENCE()</code> with a <code>GROUP BY time()</code> clause.</p>

<h5 id="examples-34">Examples</h5>

<p>The examples below use the following subsample of the <a href="../data_download/index.html"><code>NOAA_water_database</code> data</a>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="s2">&#34;water_level&#34;</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">water_level</span>
<span class="c1">----                   -----------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">064</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">116</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">028</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">126</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">041</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">051</span></code></pre></div>
<h6 id="calculate-the-difference-between-the-field-values-associated-with-a-field-key">Calculate the difference between the field values associated with a field key</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">DIFFERENCE</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">difference</span>
<span class="c1">----                   ----------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">0</span><span class="p">.</span><span class="mi">052000000000000046</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">08800000000000008</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">0</span><span class="p">.</span><span class="mi">09799999999999986</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">08499999999999996</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">0</span><span class="p">.</span><span class="mi">010000000000000231</span></code></pre></div>
<p>The query returns the difference between the subsequent field values in the <code>water_level</code> field key and in the <code>h2o_feet</code> measurement.</p>

<h6 id="calculate-the-difference-between-the-field-values-associated-with-each-field-key-in-a-measurement">Calculate the difference between the field values associated with each field key in a measurement</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">DIFFERENCE</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">difference_water_level</span>
<span class="c1">----                   ----------------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">0</span><span class="p">.</span><span class="mi">052000000000000046</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">08800000000000008</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">0</span><span class="p">.</span><span class="mi">09799999999999986</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">08499999999999996</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">0</span><span class="p">.</span><span class="mi">010000000000000231</span></code></pre></div>
<p>The query returns the difference between the subsequent field values for each field key that stores numerical values in the <code>h2o_feet</code> measurement.
The <code>h2o_feet</code> measurement has one numerical field: <code>water_level</code>.</p>

<h6 id="calculate-the-difference-between-the-field-values-associated-with-each-field-key-that-matches-a-regular-expression">Calculate the difference between the field values associated with each field key that matches a regular expression</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">DIFFERENCE</span><span class="p">(</span><span class="o">/</span><span class="n">water</span><span class="o">/</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">difference_water_level</span>
<span class="c1">----                   ----------------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">0</span><span class="p">.</span><span class="mi">052000000000000046</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">08800000000000008</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">0</span><span class="p">.</span><span class="mi">09799999999999986</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">08499999999999996</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">0</span><span class="p">.</span><span class="mi">010000000000000231</span></code></pre></div>
<p>The query returns the difference between the subsequent field values for each field key that stores numerical values and includes the word <code>water</code> in the <code>h2o_feet</code> measurement.</p>

<h6 id="calculate-the-difference-between-the-field-values-associated-with-a-field-key-and-include-several-clauses">Calculate the difference between the field values associated with a field key and include several clauses</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">DIFFERENCE</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">time</span> <span class="k">DESC</span> <span class="k">LIMIT</span> <span class="mi">2</span> <span class="k">OFFSET</span> <span class="mi">2</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">difference</span>
<span class="c1">----                   ----------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">09799999999999986</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">0</span><span class="p">.</span><span class="mi">08800000000000008</span></code></pre></div>
<p>The query returns the difference between the subsequent field values in the <code>water_level</code> field key.
It covers the <a href="../data_exploration/index.html#time-syntax">time range</a> between <code>2015-08-18T00:00:00Z</code> and <code>2015-08-18T00:30:00Z</code> and returns results in <a href="../data_exploration/index.html#order-by-time-desc">descending timestamp order</a>.
They query also <a href="../data_exploration/index.html#the-limit-and-slimit-clauses">limits</a> the number of points returned to two and <a href="../data_exploration/index.html#the-offset-and-soffset-clauses">offsets</a> results by two points.</p>

<h4 id="advanced-syntax-9">Advanced syntax</h4>

<pre><code>SELECT DIFFERENCE(&lt;function&gt;( [ * | &lt;field_key&gt; | /&lt;regular_expression&gt;/ ] )) [INTO_clause] FROM_clause [WHERE_clause] GROUP_BY_clause [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p>The advanced syntax requires a <a href="../data_exploration/index.html#group-by-time-intervals"><code>GROUP BY time()</code> clause</a> and a nested InfluxQL function.
The query first calculates the results for the nested function at the specified <code>GROUP BY time()</code> interval and then applies the <code>DIFFERENCE()</code> function to those results.</p>

<p><code>DIFFERENCE()</code> supports the following nested functions:
<a href="index.html#count"><code>COUNT()</code></a>,
<a href="index.html#mean"><code>MEAN()</code></a>,
<a href="index.html#median"><code>MEDIAN()</code></a>,
<a href="index.html#mode"><code>MODE()</code></a>,
<a href="index.html#sum"><code>SUM()</code></a>,
<a href="index.html#first"><code>FIRST()</code></a>,
<a href="index.html#last"><code>LAST()</code></a>,
<a href="index.html#min"><code>MIN()</code></a>,
<a href="index.html#max"><code>MAX()</code></a>, and
<a href="index.html#percentile"><code>PERCENTILE()</code></a>.</p>

<h5 id="examples-35">Examples</h5>

<h6 id="calculate-the-difference-between-maximum-values">Calculate the difference between maximum values</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">DIFFERENCE</span><span class="p">(</span><span class="k">MAX</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">))</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">difference</span>
<span class="c1">----                   ----------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">0</span><span class="p">.</span><span class="mi">009999999999999787</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">07499999999999973</span></code></pre></div>
<p>The query returns the difference between <a href="index.html#max">maximum</a> <code>water_level</code>s that are calculated at 12-minute intervals.</p>

<p>To get those results, InfluxDB first calculates the maximum <code>water_level</code>s at 12-minute intervals.
This step is the same as using the <code>MAX()</code> function with the <code>GROUP BY time()</code> clause and without <code>DIFFERENCE()</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">MAX</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="k">max</span>
<span class="c1">----                   ---
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">116</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">126</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">051</span></code></pre></div>
<p>Next, InfluxDB calculates the difference between those maximum values.
The first point in the final results (<code>0.009999999999999787</code>) is the difference between <code>2.126</code> and <code>2.116</code>, and the second point in the final results (<code>-0.07499999999999973</code>) is the difference between <code>2.051</code> and <code>2.126</code>.</p>

<a class="dashingAutolink" name="autolink-29"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/ELAPSED%28%29"></a><h3 id="elapsed">ELAPSED()</h3>

<p>Returns the difference between subsequent <a href="../../concepts/glossary/index.html#field-value">field value&rsquo;s</a> timestamps.</p>

<h4 id="syntax-17">Syntax</h4>

<pre><code>SELECT ELAPSED( [ * | &lt;field_key&gt; | /&lt;regular_expression&gt;/ ] [ , &lt;unit&gt; ] ) [INTO_clause] FROM_clause [WHERE_clause] [GROUP_BY_clause] [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p>InfluxDB calculates the difference between subsequent timestamps.
The <code>unit</code> option is an integer followed by a <a href="../spec/index.html#literals">duration literal</a> and it determines the unit of the returned difference.
If the query does not specify the <code>unit</code> option the query returns the difference between timestamps in nanoseconds.</p>

<p><code>ELAPSED(field_key)</code><br/>
Returns the difference between subsequent timestamps associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>.</p>

<p><code>ELAPSED(/regular_expression/)</code><br/>
Returns the difference between subsequent timestamps associated with each field key that matches the <a href="../data_exploration/index.html#regular-expressions">regular expression</a>.</p>

<p><code>ELAPSED(*)</code><br/>
Returns the difference between subsequent timestamps associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a>.</p>

<p><code>ELAPSED()</code> supports all field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<h4 id="examples-36">Examples</h4>

<p>The examples use the following subsample of the <a href="../data_download/index.html"><code>NOAA_water_database</code> data</a>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="s2">&#34;water_level&#34;</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:12:00Z&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">water_level</span>
<span class="c1">----                   -----------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">064</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">116</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">028</span></code></pre></div>
<h5 id="calculate-the-elapsed-time-between-field-values-associated-with-a-field-key">Calculate the elapsed time between field values associated with a field key</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">ELAPSED</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:12:00Z&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">elapsed</span>
<span class="c1">----                   -------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">360000000000</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">360000000000</span></code></pre></div>
<p>The query returns the difference (in nanoseconds) between subsequent timestamps in the <code>water_level</code> field key and in the <code>h2o_feet</code> measurement.</p>

<h5 id="calculate-the-elapsed-time-between-field-values-associated-with-a-field-key-and-specify-the-unit-option">Calculate the elapsed time between field values associated with a field key and specify the unit option</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">ELAPSED</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">,</span><span class="mi">1</span><span class="n">m</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:12:00Z&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">elapsed</span>
<span class="c1">----                   -------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">6</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">6</span></code></pre></div>
<p>The query returns the difference (in minutes) between subsequent timestamps in the <code>water_level</code> field key and in the <code>h2o_feet</code> measurement.</p>

<h5 id="calculate-the-elapsed-time-between-field-values-associated-with-each-field-key-in-a-measurement-and-specify-the-unit-option">Calculate the elapsed time between field values associated with each field key in a measurement and specify the unit option</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">ELAPSED</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="mi">1</span><span class="n">m</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:12:00Z&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">elapsed_level</span> <span class="n">description</span>   <span class="n">elapsed_water_level</span>
<span class="c1">----                   -------------------------   -------------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">6</span>                           <span class="mi">6</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">6</span>                           <span class="mi">6</span></code></pre></div>
<p>The query returns the difference (in minutes) between subsequent timestamps associated with each field key in the <code>h2o_feet</code>
measurement.
The <code>h2o_feet</code> measurement has two field keys: <code>level description</code> and <code>water_level</code>.</p>

<h5 id="calculate-the-elapsed-time-between-field-values-associated-with-each-field-key-that-matches-a-regular-expression-and-specify-the-unit-option">Calculate the elapsed time between field values associated with each field key that matches a regular expression and specify the unit option</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">ELAPSED</span><span class="p">(</span><span class="o">/</span><span class="k">level</span><span class="o">/</span><span class="p">,</span><span class="mi">1</span><span class="n">s</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:12:00Z&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">elapsed_level</span> <span class="n">description</span>   <span class="n">elapsed_water_level</span>
<span class="c1">----                   -------------------------   -------------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">360</span>                         <span class="mi">360</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">360</span>                         <span class="mi">360</span></code></pre></div>
<p>The query returns the difference (in seconds) between subsequent timestamps associated with each field key that includes the word <code>level</code> in the <code>h2o_feet</code> measurement.</p>

<h5 id="calculate-the-elapsed-time-between-field-values-associated-with-a-field-key-and-include-several-clauses">Calculate the elapsed time between field values associated with a field key and include several clauses</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">ELAPSED</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">,</span><span class="mi">1</span><span class="n">ms</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:12:00Z&#39;</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">time</span> <span class="k">DESC</span> <span class="k">LIMIT</span> <span class="mi">1</span> <span class="k">OFFSET</span> <span class="mi">1</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">elapsed</span>
<span class="c1">----                   -------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="o">-</span><span class="mi">360000</span></code></pre></div>
<p>The query returns the difference (in milliseconds) between subsequent timestamps in the <code>water_level</code> field key and in the <code>h2o_feet</code> measurement.
It covers the <a href="../data_exploration/index.html#time-syntax">time range</a> between <code>2015-08-18T00:00:00Z</code> and <code>2015-08-18T00:12:00Z</code> and sorts timestamps in <a href="../data_exploration/index.html#order-by-time-desc">descending order</a>.
The query also <a href="../data_exploration/index.html#the-limit-and-slimit-clauses">limits</a> the number of points returned to one and <a href="../data_exploration/index.html#the-offset-and-soffset-clauses">offsets</a> results by one point.</p>

<p>Notice that the result is negative; the <a href="../data_exploration/index.html#order-by-time-desc"><code>ORDER BY time DESC</code> clause</a> sorts timestamps in descending order so <code>ELAPSED()</code> calculates the difference between timestamps in reverse order.</p>

<a class="dashingAutolink" name="autolink-30"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/Common%20Issues%20with%20ELAPSED%28%29"></a><h3 id="common-issues-with-elapsed">Common Issues with ELAPSED()</h3>

<h4 id="elapsed-and-units-greater-than-the-elapsed-time">ELAPSED() and units greater than the elapsed time</h4>

<p>InfluxDB returns <code>0</code> if the <code>unit</code> option is greater than the difference between the timestamps.</p>

<h5 id="example-9">Example</h5>

<p>The timestamps in the <code>h2o_feet</code> measurement occur at six-minute intervals.
If the query sets the <code>unit</code> option to one hour, InfluxDB returns <code>0</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">ELAPSED</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">,</span><span class="mi">1</span><span class="n">h</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:12:00Z&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">elapsed</span>
<span class="c1">----                   -------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">0</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">0</span></code></pre></div>
<h4 id="elapsed-with-group-by-time-clauses">ELAPSED() with GROUP BY time() clauses</h4>

<p>The <code>ELAPSED()</code> function supports the <a href="../data_exploration/index.html#group-by-time-intervals"><code>GROUP BY time()</code> clause</a> but the query results aren&rsquo;t particularly useful.
Currently, an <code>ELAPSED()</code> query with a nested function and a <code>GROUP BY time()</code> clause simply returns the interval specified in the <code>GROUP BY time()</code> clause.</p>

<p>The <code>GROUP BY time()</code> clause determines the timestamps in the results; each timestamp marks the start of a time interval.
That behavior also applies to nested selector functions (like <a href="index.html#first"><code>FIRST()</code></a> or <a href="index.html#max"><code>MAX()</code></a>) which would, in all other cases, return a specific timestamp from the raw data.
Because the <code>GROUP BY time()</code> clause overrides the original timestamps, the <code>ELAPSED()</code> calculation always returns the same value as the <code>GROUP BY time()</code> interval.</p>

<h5 id="example-10">Example</h5>

<p>In the codeblock below, the first query attempts to use the <code>ELAPSED()</code> function with a <code>GROUP BY time()</code> clause to find the time elapsed (in minutes) between <a href="index.html#min">minimum</a> <code>water_level</code>s.
The query returns 12 minutes for both time intervals.</p>

<p>To get those results, InfluxDB first calculates the minimum <code>water_level</code>s at 12-minute intervals.
The second query in the codeblock shows the results of that step.
The step is the same as using the <code>MIN()</code> function with the <code>GROUP BY time()</code> clause and without the <code>ELAPSED()</code> function.
Notice that the timestamps returned by the second query are 12 minutes apart.
In the raw data, the first result (<code>2.057</code>) occurs at <code>2015-08-18T00:42:00Z</code> but the <code>GROUP BY time()</code> clause overrides that original timestamp.
Because the timestamps are determined by the <code>GROUP BY time()</code> interval and not by the original data, the <code>ELAPSED()</code> calculation always returns the same value as the <code>GROUP BY time()</code> interval.</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">ELAPSED</span><span class="p">(</span><span class="k">MIN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">),</span><span class="mi">1</span><span class="n">m</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:36:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:54:00Z&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">elapsed</span>
<span class="c1">----                   -------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">12</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">12</span>

<span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">MIN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:36:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:54:00Z&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="k">min</span>
<span class="c1">----                   ---
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">057</span>    <span class="o">&lt;</span><span class="c1">--- Actually occurs at 2015-08-18T00:42:00Z
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">1</span><span class="p">.</span><span class="mi">991</span></code></pre></div>
<a class="dashingAutolink" name="autolink-31"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/EXP%28%29"></a><h3 id="exp">EXP()</h3>

<p>Returns the exponential of the field value.</p>

<h4 id="basic-syntax-10">Basic syntax</h4>

<pre><code>SELECT EXP( [ * | &lt;field_key&gt; ] ) [INTO_clause] FROM_clause [WHERE_clause] [GROUP_BY_clause] [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p><code>EXP(field_key)</code><br/>
Returns the exponential of field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>.</p>

<!-- `EXP(/regular_expression/)`  
Returns the exponential of field values associated with each field key that matches the [regular expression](/influxdb/v1.7/query_language/data_exploration/#regular-expressions). -->

<p><code>EXP(*)</code><br/>
Returns the exponential of field values associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a>.</p>

<p><code>EXP()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<p>The basic syntax supports <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-tags">group by tags</a> but not <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-time-intervals">group by time</a>.
See the <a href="index.html#advanced-syntax">Advanced Syntax</a> section for how to use <code>EXP()</code> with a <code>GROUP BY time()</code> clause.</p>

<h5 id="examples-37">Examples</h5>

<p>The examples below use the following subsample of the <a href="../data_download/index.html"><code>NOAA_water_database</code> data</a>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="s2">&#34;water_level&#34;</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">water_level</span>
<span class="c1">----                  -----------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">064</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">116</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">028</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">126</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">041</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">051</span></code></pre></div>
<h6 id="calculate-the-exponential-of-field-values-associated-with-a-field-key">Calculate the exponential of field values associated with a field key</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">EXP</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">exp</span>
<span class="c1">----                  ---
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">7</span><span class="p">.</span><span class="mi">877416541092307</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">8</span><span class="p">.</span><span class="mi">297879498060171</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">7</span><span class="p">.</span><span class="mi">598873404088091</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">8</span><span class="p">.</span><span class="mi">381274573459967</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">7</span><span class="p">.</span><span class="mi">6983036546645645</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">7</span><span class="p">.</span><span class="mi">775672892658607</span></code></pre></div>
<p>The query returns the exponential of field values in the <code>water_level</code> field key in the <code>h2o_feet</code> measurement.</p>

<h6 id="calculate-the-exponential-of-field-values-associated-with-each-field-key-in-a-measurement">Calculate the exponential of field values associated with each field key in a measurement</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">EXP</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">exp_water_level</span>
<span class="c1">----                  ---------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">7</span><span class="p">.</span><span class="mi">877416541092307</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">8</span><span class="p">.</span><span class="mi">297879498060171</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">7</span><span class="p">.</span><span class="mi">598873404088091</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">8</span><span class="p">.</span><span class="mi">381274573459967</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">7</span><span class="p">.</span><span class="mi">6983036546645645</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">7</span><span class="p">.</span><span class="mi">775672892658607</span></code></pre></div>
<p>The query returns the exponential of field values for each field key that stores numerical values in the <code>h2o_feet</code> measurement.
The <code>h2o_feet</code> measurement has one numerical field: <code>water_level</code>.</p>

<!-- ##### Calculate the exponential of field values associated with each field key that matches a regular expression
```
> SELECT EXP(/water/) FROM "h2o_feet" WHERE time >= '2015-08-18T00:00:00Z' AND time <= '2015-08-18T00:30:00Z' AND "location" = 'santa_monica'

name: h2o_feet
time                  exp_water_level
----                  ---------------
2015-08-18T00:00:00Z  7.877416541092307
2015-08-18T00:06:00Z  8.297879498060171
2015-08-18T00:12:00Z  7.598873404088091
2015-08-18T00:18:00Z  8.381274573459967
2015-08-18T00:24:00Z  7.6983036546645645
2015-08-18T00:30:00Z  7.775672892658607
```
```

The query returns the exponential of field values for each field key that stores numerical values and includes the word `water` in the `h2o_feet` measurement. 
-->

<h6 id="calculate-the-exponential-of-field-values-associated-with-a-field-key-and-include-several-clauses">Calculate the exponential of field values associated with a field key and include several clauses</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">EXP</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">time</span> <span class="k">DESC</span> <span class="k">LIMIT</span> <span class="mi">4</span> <span class="k">OFFSET</span> <span class="mi">2</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">exp</span>
<span class="c1">----                  ---
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">8</span><span class="p">.</span><span class="mi">381274573459967</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">7</span><span class="p">.</span><span class="mi">598873404088091</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">8</span><span class="p">.</span><span class="mi">297879498060171</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">7</span><span class="p">.</span><span class="mi">877416541092307</span></code></pre></div>
<p>The query returns the exponentials of field values associated with the <code>water_level</code> field key.
It covers the <a href="../data_exploration/index.html#time-syntax">time range</a> between <code>2015-08-18T00:00:00Z</code> and <code>2015-08-18T00:30:00Z</code> and returns results in <a href="../data_exploration/index.html#order-by-time-desc">descending timestamp order</a>.
The query also <a href="../data_exploration/index.html#the-limit-and-slimit-clauses">limits</a> the number of points returned to four and <a href="../data_exploration/index.html#the-offset-and-soffset-clauses">offsets</a> results by two points.</p>

<h4 id="advanced-syntax-10">Advanced syntax</h4>

<pre><code>SELECT EXP(&lt;function&gt;( [ * | &lt;field_key&gt; ] )) [INTO_clause] FROM_clause [WHERE_clause] GROUP_BY_clause [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p>The advanced syntax requires a <a href="../data_exploration/index.html#group-by-time-intervals"><code>GROUP BY time()</code> clause</a> and a nested InfluxQL function.
The query first calculates the results for the nested function at the specified <code>GROUP BY time()</code> interval and then applies the <code>EXP()</code> function to those results.</p>

<p><code>EXP()</code> supports the following nested functions:
<a href="index.html#count"><code>COUNT()</code></a>,
<a href="index.html#mean"><code>MEAN()</code></a>,
<a href="index.html#median"><code>MEDIAN()</code></a>,
<a href="index.html#mode"><code>MODE()</code></a>,
<a href="index.html#sum"><code>SUM()</code></a>,
<a href="index.html#first"><code>FIRST()</code></a>,
<a href="index.html#last"><code>LAST()</code></a>,
<a href="index.html#min"><code>MIN()</code></a>,
<a href="index.html#max"><code>MAX()</code></a>, and
<a href="index.html#percentile"><code>PERCENTILE()</code></a>.</p>

<h5 id="examples-38">Examples</h5>

<h6 id="calculate-the-exponential-of-mean-values">Calculate the exponential of mean values.</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">EXP</span><span class="p">(</span><span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">))</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">exp</span>
<span class="c1">----                  ---
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">8</span><span class="p">.</span><span class="mi">084915164305059</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">7</span><span class="p">.</span><span class="mi">980491491670466</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">7</span><span class="p">.</span><span class="mi">736891562315577</span></code></pre></div>
<p>The query returns the exponential of <a href="index.html#mean">average</a> <code>water_level</code>s that are calculated at 12-minute intervals.</p>

<p>To get those results, InfluxDB first calculates the average <code>water_level</code>s at 12-minute intervals.
This step is the same as using the <code>MEAN()</code> function with the <code>GROUP BY time()</code> clause and without <code>EXP()</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">mean</span>
<span class="c1">----                   ----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">09</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">077</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">0460000000000003</span></code></pre></div>
<p>InfluxDB then calculates the exponentials of those averages.</p>

<a class="dashingAutolink" name="autolink-32"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/FLOOR%28%29"></a><h3 id="floor">FLOOR()</h3>

<p>Returns the subsequent value rounded down to the nearest integer.</p>

<h4 id="basic-syntax-11">Basic syntax</h4>

<pre><code>SELECT FLOOR( [ * | &lt;field_key&gt; ] ) [INTO_clause] FROM_clause [WHERE_clause] [GROUP_BY_clause] [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p><code>FLOOR(field_key)</code><br/>
Returns the field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a> rounded down to the nearest integer.</p>

<!-- `FLOOR(/regular_expression/)`  
Returns the field values associated with each field key that matches the [regular expression](/influxdb/v1.7/query_language/data_exploration/#regular-expressions) rounded down to the nearest integer. -->

<p><code>FLOOR(*)</code><br/>
Returns the field values associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a> rounded down to the nearest integer.</p>

<p><code>FLOOR()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<p>The basic syntax supports <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-tags">group by tags</a> but not <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-time-intervals">group by time</a>.
See the <a href="index.html#advanced-syntax">Advanced Syntax</a> section for how to use <code>FLOOR()</code> with a <code>GROUP BY time()</code> clause.</p>

<h5 id="examples-39">Examples</h5>

<p>The examples below use the following subsample of the <a href="../data_download/index.html"><code>NOAA_water_database</code> data</a>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="s2">&#34;water_level&#34;</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">water_level</span>
<span class="c1">----                  -----------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">064</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">116</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">028</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">126</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">041</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">051</span></code></pre></div>
<h6 id="calculate-the-floor-of-field-values-associated-with-a-field-key">Calculate the floor of field values associated with a field key</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">FLOOR</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">floor</span>
<span class="c1">----                  -----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span></code></pre></div>
<p>The query returns field values in the <code>water_level</code> field key in the <code>h2o_feet</code> measurement rounded down to the nearest integer.</p>

<h6 id="calculate-the-floor-of-field-values-associated-with-each-field-key-in-a-measurement">Calculate the floor of field values associated with each field key in a measurement</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">FLOOR</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">floor_water_level</span>
<span class="c1">----                  -----------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span></code></pre></div>
<p>The query returns field values for each field key that stores numerical values in the <code>h2o_feet</code> measurement rounded down to the nearest integer.
The <code>h2o_feet</code> measurement has one numerical field: <code>water_level</code>.</p>

<!-- ##### Calculate the floor of the field values associated with each field key that matches a regular expression
```
> SELECT FLOOR(/water/) FROM "h2o_feet" WHERE time >= '2015-08-18T00:00:00Z' AND time <= '2015-08-18T00:30:00Z' AND "location" = 'santa_monica'

name: h2o_feet
time                   floor_water_level
----                   -----------------
2015-08-18T00:00:00Z   2
2015-08-18T00:06:00Z   2
2015-08-18T00:12:00Z   2
2015-08-18T00:18:00Z   2
2015-08-18T00:24:00Z   2
2015-08-18T00:30:00Z   2
```

The query returns field values for each field key that stores numerical values and includes the word `water` in the `h2o_feet` measurement rounded down to the nearest integer. -->

<h6 id="calculate-the-floor-of-field-values-associated-with-a-field-key-and-include-several-clauses">Calculate the floor of field values associated with a field key and include several clauses</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">FLOOR</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">time</span> <span class="k">DESC</span> <span class="k">LIMIT</span> <span class="mi">4</span> <span class="k">OFFSET</span> <span class="mi">2</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">floor</span>
<span class="c1">----                  -----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span></code></pre></div>
<p>The query returns field values associated with the <code>water_level</code> field key rounded down to the nearest integer.
It covers the <a href="../data_exploration/index.html#time-syntax">time range</a> between <code>2015-08-18T00:00:00Z</code> and <code>2015-08-18T00:30:00Z</code> and returns results in <a href="../data_exploration/index.html#order-by-time-desc">descending timestamp order</a>.
The query also <a href="../data_exploration/index.html#the-limit-and-slimit-clauses">limits</a> the number of points returned to four and <a href="../data_exploration/index.html#the-offset-and-soffset-clauses">offsets</a> results by two points.</p>

<h4 id="advanced-syntax-11">Advanced syntax</h4>

<pre><code>SELECT FLOOR(&lt;function&gt;( [ * | &lt;field_key&gt; ] )) [INTO_clause] FROM_clause [WHERE_clause] GROUP_BY_clause [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p>The advanced syntax requires a <a href="../data_exploration/index.html#group-by-time-intervals"><code>GROUP BY time()</code> clause</a> and a nested InfluxQL function.
The query first calculates the results for the nested function at the specified <code>GROUP BY time()</code> interval and then applies the <code>FLOOR()</code> function to those results.</p>

<p><code>FLOOR()</code> supports the following nested functions:
<a href="index.html#count"><code>COUNT()</code></a>,
<a href="index.html#mean"><code>MEAN()</code></a>,
<a href="index.html#median"><code>MEDIAN()</code></a>,
<a href="index.html#mode"><code>MODE()</code></a>,
<a href="index.html#sum"><code>SUM()</code></a>,
<a href="index.html#first"><code>FIRST()</code></a>,
<a href="index.html#last"><code>LAST()</code></a>,
<a href="index.html#min"><code>MIN()</code></a>,
<a href="index.html#max"><code>MAX()</code></a>, and
<a href="index.html#percentile"><code>PERCENTILE()</code></a>.</p>

<h5 id="examples-40">Examples</h5>

<h6 id="calculate-mean-values-rounded-down-to-the-nearest-integer">Calculate mean values rounded down to the nearest integer.</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">FLOOR</span><span class="p">(</span><span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">))</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">floor</span>
<span class="c1">----                  -----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span></code></pre></div>
<p>The query returns the <a href="index.html#mean">average</a> <code>water_level</code>s that are calculated at 12-minute intervals and rounds them up to the nearest integer.</p>

<p>To get those results, InfluxDB first calculates the average <code>water_level</code>s at 12-minute intervals.
This step is the same as using the <code>MEAN()</code> function with the <code>GROUP BY time()</code> clause and without <code>FLOOR()</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">mean</span>
<span class="c1">----                   ----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">09</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">077</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">0460000000000003</span></code></pre></div>
<p>InfluxDB then rounds those averages down to the nearest integer.</p>

<a class="dashingAutolink" name="autolink-33"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/HISTOGRAM%28%29"></a><h3 id="histogram">HISTOGRAM()</h3>

<p><em>InfluxQL does not currently support histogram generation.
For information about creating histograms with data stored in InfluxDB, see
<a href="https://docs.influxdata.com/flux/v0.7/functions/transformations/histogram">Flux&rsquo;s <code>histogram()</code> function</a>.</em></p>

<a class="dashingAutolink" name="autolink-34"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/LN%28%29"></a><h3 id="ln">LN()</h3>

<p>Returns the natural logarithm of the field value.</p>

<h4 id="basic-syntax-12">Basic syntax</h4>

<pre><code>SELECT LN( [ * | &lt;field_key&gt; ] ) [INTO_clause] FROM_clause [WHERE_clause] [GROUP_BY_clause] [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p><code>LN(field_key)</code><br/>
Returns the natural logarithm of field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>.</p>

<!-- `LN(/regular_expression/)`  
Returns the natural logarithm of field values associated with each field key that matches the [regular expression](/influxdb/v1.7/query_language/data_exploration/#regular-expressions). -->

<p><code>LN(*)</code><br/>
Returns the natural logarithm of field values associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a>.</p>

<p><code>LN()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<p>The basic syntax supports <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-tags">group by tags</a> but not <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-time-intervals">group by time</a>.
See the <a href="index.html#advanced-syntax">Advanced Syntax</a> section for how to use <code>LN()</code> with a <code>GROUP BY time()</code> clause.</p>

<h5 id="examples-41">Examples</h5>

<p>The examples below use the following subsample of the <a href="../data_download/index.html"><code>NOAA_water_database</code> data</a>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="s2">&#34;water_level&#34;</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">water_level</span>
<span class="c1">----                  -----------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">064</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">116</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">028</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">126</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">041</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">051</span></code></pre></div>
<h6 id="calculate-the-natural-logarithm-of-field-values-associated-with-a-field-key">Calculate the natural logarithm of field values associated with a field key</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">LN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">ln</span>
<span class="c1">----                  --
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">7246458476193163</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">749527513996053</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">7070500857289368</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">7542422799197561</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">7134398838277077</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">7183274790902436</span></code></pre></div>
<p>The query returns the natural logarithm of field values in the <code>water_level</code> field key in the <code>h2o_feet</code> measurement.</p>

<h6 id="calculate-the-natural-logarithm-of-field-values-associated-with-each-field-key-in-a-measurement">Calculate the natural logarithm of field values associated with each field key in a measurement</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">LN</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">ln_water_level</span>
<span class="c1">----                  --------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">7246458476193163</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">749527513996053</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">7070500857289368</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">7542422799197561</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">7134398838277077</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">7183274790902436</span></code></pre></div>
<p>The query returns the natural logarithm of field values for each field key that stores numerical values in the <code>h2o_feet</code> measurement.
The <code>h2o_feet</code> measurement has one numerical field: <code>water_level</code>.</p>

<!-- ##### Calculate the natural logarithm of field values associated with each field key that matches a regular expression
```
> SELECT LN(/water/) FROM "h2o_feet" WHERE time >= '2015-08-18T00:00:00Z' AND time <= '2015-08-18T00:30:00Z' AND "location" = 'santa_monica'

name: h2o_feet
time                  ln_water_level
----                  --------------
2015-08-18T00:00:00Z  0.7246458476193163
2015-08-18T00:06:00Z  0.749527513996053
2015-08-18T00:12:00Z  0.7070500857289368
2015-08-18T00:18:00Z  0.7542422799197561
2015-08-18T00:24:00Z  0.7134398838277077
2015-08-18T00:30:00Z  0.7183274790902436
```
```

The query returns the natural logarithm of field values for each field key that stores numerical values and includes the word `water` in the `h2o_feet` measurement. -->

<h6 id="calculate-the-natural-logarithm-of-field-values-associated-with-a-field-key-and-include-several-clauses">Calculate the natural logarithm of field values associated with a field key and include several clauses</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">LN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">time</span> <span class="k">DESC</span> <span class="k">LIMIT</span> <span class="mi">4</span> <span class="k">OFFSET</span> <span class="mi">2</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">ln</span>
<span class="c1">----                  --
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">7542422799197561</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">7070500857289368</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">749527513996053</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">7246458476193163</span></code></pre></div>
<p>The query returns the natural logarithms of field values associated with the <code>water_level</code> field key.
It covers the <a href="../data_exploration/index.html#time-syntax">time range</a> between <code>2015-08-18T00:00:00Z</code> and <code>2015-08-18T00:30:00Z</code> and returns results in <a href="../data_exploration/index.html#order-by-time-desc">descending timestamp order</a>.
The query also <a href="../data_exploration/index.html#the-limit-and-slimit-clauses">limits</a> the number of points returned to four and <a href="../data_exploration/index.html#the-offset-and-soffset-clauses">offsets</a> results by two points.</p>

<h4 id="advanced-syntax-12">Advanced syntax</h4>

<pre><code>SELECT LN(&lt;function&gt;( [ * | &lt;field_key&gt; ] )) [INTO_clause] FROM_clause [WHERE_clause] GROUP_BY_clause [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p>The advanced syntax requires a <a href="../data_exploration/index.html#group-by-time-intervals"><code>GROUP BY time()</code> clause</a> and a nested InfluxQL function.
The query first calculates the results for the nested function at the specified <code>GROUP BY time()</code> interval and then applies the <code>LN()</code> function to those results.</p>

<p><code>LN()</code> supports the following nested functions:
<a href="index.html#count"><code>COUNT()</code></a>,
<a href="index.html#mean"><code>MEAN()</code></a>,
<a href="index.html#median"><code>MEDIAN()</code></a>,
<a href="index.html#mode"><code>MODE()</code></a>,
<a href="index.html#sum"><code>SUM()</code></a>,
<a href="index.html#first"><code>FIRST()</code></a>,
<a href="index.html#last"><code>LAST()</code></a>,
<a href="index.html#min"><code>MIN()</code></a>,
<a href="index.html#max"><code>MAX()</code></a>, and
<a href="index.html#percentile"><code>PERCENTILE()</code></a>.</p>

<h5 id="examples-42">Examples</h5>

<h6 id="calculate-the-natural-logarithm-of-mean-values">Calculate the natural logarithm of mean values.</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">LN</span><span class="p">(</span><span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">))</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">ln</span>
<span class="c1">----                  --
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">7371640659767196</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">7309245448939752</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">7158866675294349</span></code></pre></div>
<p>The query returns the natural logarithm of <a href="index.html#mean">average</a> <code>water_level</code>s that are calculated at 12-minute intervals.</p>

<p>To get those results, InfluxDB first calculates the average <code>water_level</code>s at 12-minute intervals.
This step is the same as using the <code>MEAN()</code> function with the <code>GROUP BY time()</code> clause and without <code>LN()</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">mean</span>
<span class="c1">----                   ----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">09</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">077</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">0460000000000003</span></code></pre></div>
<p>InfluxDB then calculates the natural logarithms of those averages.</p>

<a class="dashingAutolink" name="autolink-35"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/LOG%28%29"></a><h3 id="log">LOG()</h3>

<p>Returns the logarithm of the field value with base <code>b</code>.</p>

<h4 id="basic-syntax-13">Basic syntax</h4>

<pre><code>SELECT LOG( [ * | &lt;field_key&gt; ], &lt;b&gt; ) [INTO_clause] FROM_clause [WHERE_clause] [GROUP_BY_clause] [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p><code>LOG(field_key, b)</code><br/>
Returns the logarithm of field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a> with base <code>b</code>.</p>

<!-- `LOG(/regular_expression/, b)`  
Returns the logarithm of field values associated with each field key that matches the [regular expression](/influxdb/v1.7/query_language/data_exploration/#regular-expressions) with base `b`. -->

<p><code>LOG(*, b)</code><br/>
Returns the logarithm of field values associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a> with base <code>b</code>.</p>

<p><code>LOG()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<p>The basic syntax supports <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-tags">group by tags</a> but not <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-time-intervals">group by time</a>.
See the <a href="index.html#advanced-syntax">Advanced Syntax</a> section for how to use <code>LOG()</code> with a <code>GROUP BY time()</code> clause.</p>

<h5 id="examples-43">Examples</h5>

<p>The examples below use the following subsample of the <a href="../data_download/index.html"><code>NOAA_water_database</code> data</a>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="s2">&#34;water_level&#34;</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">water_level</span>
<span class="c1">----                  -----------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">064</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">116</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">028</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">126</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">041</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">051</span></code></pre></div>
<h6 id="calculate-the-logarithm-base-4-of-field-values-associated-with-a-field-key">Calculate the logarithm base 4 of field values associated with a field key</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">LOG</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">log</span>
<span class="c1">----                  ---
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">5227214853805835</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">5406698137259695</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">5100288261706268</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">5440707984345088</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">5146380911853161</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">5181637459088826</span></code></pre></div>
<p>The query returns the logarithm base 4 of field values in the <code>water_level</code> field key in the <code>h2o_feet</code> measurement.</p>

<h6 id="calculate-the-logarithm-base-4-of-field-values-associated-with-each-field-key-in-a-measurement">Calculate the logarithm base 4 of field values associated with each field key in a measurement</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">LOG</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">log_water_level</span>
<span class="c1">----                  ---------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">5227214853805835</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">5406698137259695</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">5100288261706268</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">5440707984345088</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">5146380911853161</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">5181637459088826</span></code></pre></div>
<p>The query returns the logarithm base 4 of field values for each field key that stores numerical values in the <code>h2o_feet</code> measurement.
The <code>h2o_feet</code> measurement has one numerical field: <code>water_level</code>.</p>

<!-- ##### Calculate the logarithm base 4 of field values associated with each field key that matches a regular expression
```
> SELECT LOG(/water/) FROM "h2o_feet" WHERE time >= '2015-08-18T00:00:00Z' AND time <= '2015-08-18T00:30:00Z' AND "location" = 'santa_monica'

name: h2o_feet
time                  log
----                  ---
2015-08-18T00:00:00Z  0.5227214853805835
2015-08-18T00:06:00Z  0.5406698137259695
2015-08-18T00:12:00Z  0.5100288261706268
2015-08-18T00:18:00Z  0.5440707984345088
2015-08-18T00:24:00Z  0.5146380911853161
2015-08-18T00:30:00Z  0.5181637459088826
```
```

The query returns the logarithm base 4 of field values for each field key that stores numerical values and includes the word `water` in the `h2o_feet` measurement. -->

<h6 id="calculate-the-logarithm-base-4-of-field-values-associated-with-a-field-key-and-include-several-clauses">Calculate the logarithm base 4 of field values associated with a field key and include several clauses</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">LOG</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">time</span> <span class="k">DESC</span> <span class="k">LIMIT</span> <span class="mi">4</span> <span class="k">OFFSET</span> <span class="mi">2</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">log</span>
<span class="c1">----                  ---
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">5440707984345088</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">5100288261706268</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">5406698137259695</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">5227214853805835</span></code></pre></div>
<p>The query returns the logarithm base 4 of field values associated with the <code>water_level</code> field key.
It covers the <a href="../data_exploration/index.html#time-syntax">time range</a> between <code>2015-08-18T00:00:00Z</code> and <code>2015-08-18T00:30:00Z</code> and returns results in <a href="../data_exploration/index.html#order-by-time-desc">descending timestamp order</a>.
The query also <a href="../data_exploration/index.html#the-limit-and-slimit-clauses">limits</a> the number of points returned to four and <a href="../data_exploration/index.html#the-offset-and-soffset-clauses">offsets</a> results by two points.</p>

<h4 id="advanced-syntax-13">Advanced syntax</h4>

<pre><code>SELECT LOG(&lt;function&gt;( [ * | &lt;field_key&gt; ] ), &lt;b&gt;) [INTO_clause] FROM_clause [WHERE_clause] GROUP_BY_clause [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p>The advanced syntax requires a <a href="../data_exploration/index.html#group-by-time-intervals"><code>GROUP BY time()</code> clause</a> and a nested InfluxQL function.
The query first calculates the results for the nested function at the specified <code>GROUP BY time()</code> interval and then applies the <code>LOG()</code> function to those results.</p>

<p><code>LOG()</code> supports the following nested functions:
<a href="index.html#count"><code>COUNT()</code></a>,
<a href="index.html#mean"><code>MEAN()</code></a>,
<a href="index.html#median"><code>MEDIAN()</code></a>,
<a href="index.html#mode"><code>MODE()</code></a>,
<a href="index.html#sum"><code>SUM()</code></a>,
<a href="index.html#first"><code>FIRST()</code></a>,
<a href="index.html#last"><code>LAST()</code></a>,
<a href="index.html#min"><code>MIN()</code></a>,
<a href="index.html#max"><code>MAX()</code></a>, and
<a href="index.html#percentile"><code>PERCENTILE()</code></a>.</p>

<h5 id="examples-44">Examples</h5>

<h6 id="calculate-the-logarithm-base-4-of-mean-values">Calculate the logarithm base 4 of mean values</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">LOG</span><span class="p">(</span><span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">),</span> <span class="mi">4</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">log</span>
<span class="c1">----                  ---
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">531751471153079</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">5272506080912802</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">5164030725416209</span></code></pre></div>
<p>The query returns the logarithm base 4 of <a href="index.html#mean">average</a> <code>water_level</code>s that are calculated at 12-minute intervals.</p>

<p>To get those results, InfluxDB first calculates the average <code>water_level</code>s at 12-minute intervals.
This step is the same as using the <code>MEAN()</code> function with the <code>GROUP BY time()</code> clause and without <code>LOG()</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">mean</span>
<span class="c1">----                   ----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">09</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">077</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">0460000000000003</span></code></pre></div>
<p>InfluxDB then calculates the logarithm base 4 of those averages.</p>

<a class="dashingAutolink" name="autolink-36"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/LOG2%28%29"></a><h3 id="log2">LOG2()</h3>

<p>Returns the logarithm of the field value to the base 2.</p>

<h4 id="basic-syntax-14">Basic syntax</h4>

<pre><code>SELECT LOG2( [ * | &lt;field_key&gt; ] ) [INTO_clause] FROM_clause [WHERE_clause] [GROUP_BY_clause] [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p><code>LOG2(field_key)</code><br/>
Returns the logarithm of field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a> to the base 2.</p>

<!-- `LOG2(/regular_expression/)`  
Returns the logarithm of field values associated with each field key that matches the [regular expression](/influxdb/v1.7/query_language/data_exploration/#regular-expressions) to the base 2. -->

<p><code>LOG2(*)</code><br/>
Returns the logarithm of field values associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a> to the base 2.</p>

<p><code>LOG2()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<p>The basic syntax supports <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-tags">group by tags</a> but not <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-time-intervals">group by time</a>.
See the <a href="index.html#advanced-syntax">Advanced syntax</a> section for how to use <code>LOG2()</code> with a <code>GROUP BY time()</code> clause.</p>

<h5 id="examples-45">Examples</h5>

<p>The examples below use the following subsample of the <a href="../data_download/index.html"><code>NOAA_water_database</code> data</a>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="s2">&#34;water_level&#34;</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">water_level</span>
<span class="c1">----                  -----------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">064</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">116</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">028</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">126</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">041</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">051</span></code></pre></div>
<h6 id="calculate-the-logarithm-base-2-of-field-values-associated-with-a-field-key">Calculate the logarithm base 2 of field values associated with a field key</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">LOG2</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">log2</span>
<span class="c1">----                  ----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">045442970761167</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">081339627451939</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">0200576523412537</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">0881415968690176</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">0292761823706322</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">0363274918177652</span></code></pre></div>
<p>The query returns the logarithm base 2 of field values in the <code>water_level</code> field key in the <code>h2o_feet</code> measurement.</p>

<h6 id="calculate-the-logarithm-base-2-of-field-values-associated-with-each-field-key-in-a-measurement">Calculate the logarithm base 2 of field values associated with each field key in a measurement</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">LOG2</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">log2_water_level</span>
<span class="c1">----                  ----------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">045442970761167</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">081339627451939</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">0200576523412537</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">0881415968690176</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">0292761823706322</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">0363274918177652</span></code></pre></div>
<p>The query returns the logarithm base 2 of field values for each field key that stores numerical values in the <code>h2o_feet</code> measurement.
The <code>h2o_feet</code> measurement has one numerical field: <code>water_level</code>.</p>

<!-- ##### Calculate the logarithm base 2 of field values associated with each field key that matches a regular expression
```
> SELECT LOG2(/water/) FROM "h2o_feet" WHERE time >= '2015-08-18T00:00:00Z' AND time <= '2015-08-18T00:30:00Z' AND "location" = 'santa_monica'

name: h2o_feet
time                  log2
----                  ----
2015-08-18T00:00:00Z  1.045442970761167
2015-08-18T00:06:00Z  1.081339627451939
2015-08-18T00:12:00Z  1.0200576523412537
2015-08-18T00:18:00Z  1.0881415968690176
2015-08-18T00:24:00Z  1.0292761823706322
2015-08-18T00:30:00Z  1.0363274918177652
```
```

The query returns the logarithm base 2 of field values for each field key that stores numerical values and includes the word `water` in the `h2o_feet` measurement. -->

<h6 id="calculate-the-logarithm-base-2-of-field-values-associated-with-a-field-key-and-include-several-clauses">Calculate the logarithm base 2 of field values associated with a field key and include several clauses</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">LOG2</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">time</span> <span class="k">DESC</span> <span class="k">LIMIT</span> <span class="mi">4</span> <span class="k">OFFSET</span> <span class="mi">2</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">log2</span>
<span class="c1">----                  ----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">0881415968690176</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">0200576523412537</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">081339627451939</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">045442970761167</span></code></pre></div>
<p>The query returns the logarithm base 2 of field values associated with the <code>water_level</code> field key.
It covers the <a href="../data_exploration/index.html#time-syntax">time range</a> between <code>2015-08-18T00:00:00Z</code> and <code>2015-08-18T00:30:00Z</code> and returns results in <a href="../data_exploration/index.html#order-by-time-desc">descending timestamp order</a>.
The query also <a href="../data_exploration/index.html#the-limit-and-slimit-clauses">limits</a> the number of points returned to four and <a href="../data_exploration/index.html#the-offset-and-soffset-clauses">offsets</a> results by two points.</p>

<h4 id="advanced-syntax-14">Advanced syntax</h4>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="n">LOG2</span><span class="p">(</span><span class="o">&lt;</span><span class="k">function</span><span class="o">&gt;</span><span class="p">(</span> <span class="p">[</span> <span class="o">*</span> <span class="o">|</span> <span class="o">&lt;</span><span class="n">field_key</span><span class="o">&gt;</span> <span class="p">]</span> <span class="p">))</span> <span class="p">[</span><span class="n">INTO_clause</span><span class="p">]</span> <span class="n">FROM_clause</span> <span class="p">[</span><span class="n">WHERE_clause</span><span class="p">]</span> <span class="n">GROUP_BY_clause</span> <span class="p">[</span><span class="n">ORDER_BY_clause</span><span class="p">]</span> <span class="p">[</span><span class="n">LIMIT_clause</span><span class="p">]</span> <span class="p">[</span><span class="n">OFFSET_clause</span><span class="p">]</span> <span class="p">[</span><span class="n">SLIMIT_clause</span><span class="p">]</span> <span class="p">[</span><span class="n">SOFFSET_clause</span><span class="p">]</span></code></pre></div>
<p>The advanced syntax requires a <a href="../data_exploration/index.html#group-by-time-intervals"><code>GROUP BY time()</code> clause</a> and a nested InfluxQL function.
The query first calculates the results for the nested function at the specified <code>GROUP BY time()</code> interval and then applies the <code>LOG2()</code> function to those results.</p>

<p><code>LOG2()</code> supports the following nested functions:
<a href="index.html#count"><code>COUNT()</code></a>,
<a href="index.html#mean"><code>MEAN()</code></a>,
<a href="index.html#median"><code>MEDIAN()</code></a>,
<a href="index.html#mode"><code>MODE()</code></a>,
<a href="index.html#sum"><code>SUM()</code></a>,
<a href="index.html#first"><code>FIRST()</code></a>,
<a href="index.html#last"><code>LAST()</code></a>,
<a href="index.html#min"><code>MIN()</code></a>,
<a href="index.html#max"><code>MAX()</code></a>, and
<a href="index.html#percentile"><code>PERCENTILE()</code></a>.</p>

<h5 id="examples-46">Examples</h5>

<h6 id="calculate-the-logarithm-base-2-of-mean-values">Calculate the logarithm base 2 of mean values</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">LOG2</span><span class="p">(</span><span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">))</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">log2</span>
<span class="c1">----                  ----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">063502942306158</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">0545012161825604</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">0328061450832418</span></code></pre></div>
<p>The query returns the logarithm base 2 of <a href="index.html#mean">average</a> <code>water_level</code>s that are calculated at 12-minute intervals.</p>

<p>To get those results, InfluxDB first calculates the average <code>water_level</code>s at 12-minute intervals.
This step is the same as using the <code>MEAN()</code> function with the <code>GROUP BY time()</code> clause and without <code>LOG2()</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">mean</span>
<span class="c1">----                   ----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">09</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">077</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">0460000000000003</span></code></pre></div>
<p>InfluxDB then calculates the logarithm base 2 of those averages.</p>

<a class="dashingAutolink" name="autolink-37"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/LOG10%28%29"></a><h3 id="log10">LOG10()</h3>

<p>Returns the logarithm of the field value to the base 10.</p>

<h4 id="basic-syntax-15">Basic syntax</h4>

<pre><code>SELECT LOG10( [ * | &lt;field_key&gt; ] ) [INTO_clause] FROM_clause [WHERE_clause] [GROUP_BY_clause] [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p><code>LOG10(field_key)</code><br/>
Returns the logarithm of field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a> to the base 10.</p>

<!-- `LOG10(/regular_expression/)`  
Returns the logarithm of field values associated with each field key that matches the [regular expression](/influxdb/v1.7/query_language/data_exploration/#regular-expressions) to the base 10. -->

<p><code>LOG10(*)</code><br/>
Returns the logarithm of field values associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a> to the base 10.</p>

<p><code>LOG10()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<p>The basic syntax supports <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-tags">group by tags</a> but not <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-time-intervals">group by time</a>.
See the <a href="index.html#advanced-syntax">Advanced Syntax</a> section for how to use <code>LOG10()</code> with a <code>GROUP BY time()</code> clause.</p>

<h5 id="examples-47">Examples</h5>

<p>The examples below use the following subsample of the <a href="../data_download/index.html"><code>NOAA_water_database</code> data</a>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="s2">&#34;water_level&#34;</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">water_level</span>
<span class="c1">----                  -----------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">064</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">116</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">028</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">126</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">041</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">051</span></code></pre></div>
<h6 id="calculate-the-logarithm-base-10-of-field-values-associated-with-a-field-key">Calculate the logarithm base 10 of field values associated with a field key</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">LOG10</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">log10</span>
<span class="c1">----                  -----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">3147096929551737</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">32551566336314813</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">3070679506612984</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">32756326018727794</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">3098430047160705</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">3119656603683663</span></code></pre></div>
<p>The query returns the logarithm base 10 of field values in the <code>water_level</code> field key in the <code>h2o_feet</code> measurement.</p>

<h6 id="calculate-the-logarithm-base-10-of-field-values-associated-with-each-field-key-in-a-measurement">Calculate the logarithm base 10 of field values associated with each field key in a measurement</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">LOG10</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">log10_water_level</span>
<span class="c1">----                  -----------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">3147096929551737</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">32551566336314813</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">3070679506612984</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">32756326018727794</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">3098430047160705</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">3119656603683663</span></code></pre></div>
<p>The query returns the logarithm base 10 of field values for each field key that stores numerical values in the <code>h2o_feet</code> measurement.
The <code>h2o_feet</code> measurement has one numerical field: <code>water_level</code>.</p>

<!-- ##### Calculate the logarithm base 10 of field values associated with each field key that matches a regular expression
```
> SELECT LOG10(/water/) FROM "h2o_feet" WHERE time >= '2015-08-18T00:00:00Z' AND time <= '2015-08-18T00:30:00Z' AND "location" = 'santa_monica'

name: h2o_feet
time                  log10
----                  -----
2015-08-18T00:00:00Z  0.3147096929551737
2015-08-18T00:06:00Z  0.32551566336314813
2015-08-18T00:12:00Z  0.3070679506612984
2015-08-18T00:18:00Z  0.32756326018727794
2015-08-18T00:24:00Z  0.3098430047160705
2015-08-18T00:30:00Z  0.3119656603683663
```
```

The query returns the logarithm base 10 of field values for each field key that stores numerical values and includes the word `water` in the `h2o_feet` measurement. -->

<h6 id="calculate-the-logarithm-base-10-of-field-values-associated-with-a-field-key-and-include-several-clauses">Calculate the logarithm base 10 of field values associated with a field key and include several clauses</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">LOG10</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">time</span> <span class="k">DESC</span> <span class="k">LIMIT</span> <span class="mi">4</span> <span class="k">OFFSET</span> <span class="mi">2</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">log10</span>
<span class="c1">----                  -----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">32756326018727794</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">3070679506612984</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">32551566336314813</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">3147096929551737</span></code></pre></div>
<p>The query returns the logarithm base 10 of field values associated with the <code>water_level</code> field key.
It covers the <a href="../data_exploration/index.html#time-syntax">time range</a> between <code>2015-08-18T00:00:00Z</code> and <code>2015-08-18T00:30:00Z</code> and returns results in <a href="../data_exploration/index.html#order-by-time-desc">descending timestamp order</a>.
The query also <a href="../data_exploration/index.html#the-limit-and-slimit-clauses">limits</a> the number of points returned to four and <a href="../data_exploration/index.html#the-offset-and-soffset-clauses">offsets</a> results by two points.</p>

<h4 id="advanced-syntax-15">Advanced syntax</h4>

<pre><code>SELECT LOG10(&lt;function&gt;( [ * | &lt;field_key&gt; ] )) [INTO_clause] FROM_clause [WHERE_clause] GROUP_BY_clause [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p>The advanced syntax requires a <a href="../data_exploration/index.html#group-by-time-intervals"><code>GROUP BY time()</code> clause</a> and a nested InfluxQL function.
The query first calculates the results for the nested function at the specified <code>GROUP BY time()</code> interval and then applies the <code>LOG10()</code> function to those results.</p>

<p><code>LOG10()</code> supports the following nested functions:
<a href="index.html#count"><code>COUNT()</code></a>,
<a href="index.html#mean"><code>MEAN()</code></a>,
<a href="index.html#median"><code>MEDIAN()</code></a>,
<a href="index.html#mode"><code>MODE()</code></a>,
<a href="index.html#sum"><code>SUM()</code></a>,
<a href="index.html#first"><code>FIRST()</code></a>,
<a href="index.html#last"><code>LAST()</code></a>,
<a href="index.html#min"><code>MIN()</code></a>,
<a href="index.html#max"><code>MAX()</code></a>, and
<a href="index.html#percentile"><code>PERCENTILE()</code></a>.</p>

<h5 id="examples-48">Examples</h5>

<h6 id="calculate-the-logarithm-base-10-of-mean-values">Calculate the logarithm base 10 of mean values</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">LOG10</span><span class="p">(</span><span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">))</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">log10</span>
<span class="c1">----                  -----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">32014628611105395</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">3174364965350991</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">3109056293761414</span></code></pre></div>
<p>The query returns the logarithm base 10 of <a href="index.html#mean">average</a> <code>water_level</code>s that are calculated at 12-minute intervals.</p>

<p>To get those results, InfluxDB first calculates the average <code>water_level</code>s at 12-minute intervals.
This step is the same as using the <code>MEAN()</code> function with the <code>GROUP BY time()</code> clause and without <code>LOG10()</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">mean</span>
<span class="c1">----                   ----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">09</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">077</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">0460000000000003</span></code></pre></div>
<p>InfluxDB then calculates the logarithm base 10 of those averages.</p>

<a class="dashingAutolink" name="autolink-38"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/MOVING_AVERAGE%28%29"></a><h3 id="moving-average">MOVING_AVERAGE()</h3>

<p>Returns the rolling average across a window of subsequent <a href="../../concepts/glossary/index.html#field-value">field values</a>.</p>

<h4 id="basic-syntax-16">Basic syntax</h4>

<pre><code>SELECT MOVING_AVERAGE( [ * | &lt;field_key&gt; | /&lt;regular_expression&gt;/ ] , &lt;N&gt; ) [INTO_clause] FROM_clause [WHERE_clause] [GROUP_BY_clause] [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p><code>MOVING_AVERAGE()</code> calculates the rolling average across a window of <code>N</code> subsequent field values.
The <code>N</code> argument is an integer and it is required.</p>

<p><code>MOVING_AVERAGE(field_key,N)</code><br/>
Returns the rolling average across <code>N</code> field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>.</p>

<p><code>MOVING_AVERAGE(/regular_expression/,N)</code><br/>
Returns the rolling average across <code>N</code> field values associated with each field key that matches the <a href="../data_exploration/index.html#regular-expressions">regular expression</a>.</p>

<p><code>MOVING_AVERAGE(*,N)</code><br/>
Returns the rolling average across <code>N</code> field values associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a>.</p>

<p><code>MOVING_AVERAGE()</code> int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<p>The basic syntax supports <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-tags">group by tags</a> but not <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-time-intervals">group by time</a>.
See the <a href="index.html#advanced-syntax-3">Advanced Syntax</a> section for how to use <code>MOVING_AVERAGE()</code> with a <code>GROUP BY time()</code> clause.</p>

<h5 id="examples-49">Examples</h5>

<p>The examples below use the following subsample of the <a href="../data_download/index.html"><code>NOAA_water_database</code> data</a>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="s2">&#34;water_level&#34;</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">water_level</span>
<span class="c1">----                   -----------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">064</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">116</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">028</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">126</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">041</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">051</span></code></pre></div>
<h6 id="calculate-the-moving-average-of-the-field-values-associated-with-a-field-key">Calculate the moving average of the field values associated with a field key</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">MOVING_AVERAGE</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">moving_average</span>
<span class="c1">----                   --------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">09</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">072</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">077</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">0835</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">0460000000000003</span></code></pre></div>
<p>The query returns the rolling average across a two-field-value window for the <code>water_level</code> field key and the <code>h2o_feet</code> measurement.
The first result (<code>2.09</code>) is the average of the first two points in the raw data: (<code>2.064 + 2.116) / 2</code>).
The second result (<code>2.072</code>) is the average of the second two points in the raw data: (<code>2.116 + 2.028) / 2</code>).</p>

<h6 id="calculate-the-moving-average-of-the-field-values-associated-with-each-field-key-in-a-measurement">Calculate the moving average of the field values associated with each field key in a measurement</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">MOVING_AVERAGE</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">moving_average_water_level</span>
<span class="c1">----                   --------------------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">0693333333333332</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">09</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">065</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">0726666666666667</span></code></pre></div>
<p>The query returns the rolling average across a three-field-value window for each field key that stores numerical values in the <code>h2o_feet</code> measurement.
The <code>h2o_feet</code> measurement has one numerical field: <code>water_level</code>.</p>

<h6 id="calculate-the-moving-average-of-the-field-values-associated-with-each-field-key-that-matches-a-regular-expression">Calculate the moving average of the field values associated with each field key that matches a regular expression</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">MOVING_AVERAGE</span><span class="p">(</span><span class="o">/</span><span class="k">level</span><span class="o">/</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                    <span class="n">moving_average_water_level</span>
<span class="c1">----                    --------------------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>    <span class="mi">2</span><span class="p">.</span><span class="mi">0835</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>    <span class="mi">2</span><span class="p">.</span><span class="mi">07775</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>    <span class="mi">2</span><span class="p">.</span><span class="mi">0615</span></code></pre></div>
<p>The query returns the rolling average across a four-field-value window for each field key that stores numerical values and includes the word <code>level</code> in the <code>h2o_feet</code> measurement.</p>

<h6 id="calculate-the-moving-average-of-the-field-values-associated-with-a-field-key-and-include-several-clauses">Calculate the moving average of the field values associated with a field key and include several clauses</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">MOVING_AVERAGE</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">time</span> <span class="k">DESC</span> <span class="k">LIMIT</span> <span class="mi">2</span> <span class="k">OFFSET</span> <span class="mi">3</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">moving_average</span>
<span class="c1">----                   --------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">072</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">09</span></code></pre></div>
<p>The query returns the rolling average across a two-field-value window for the <code>water_level</code> field key in the <code>h2o_feet</code> measurement.
It covers the <a href="../data_exploration/index.html#time-syntax">time range</a> between <code>2015-08-18T00:00:00Z</code> and <code>2015-08-18T00:30:00Z</code> and returns results in <a href="../data_exploration/index.html#order-by-time-desc">descending timestamp order</a>.
The query also <a href="../data_exploration/index.html#the-limit-and-slimit-clauses">limits</a> the number of points returned to two and <a href="../data_exploration/index.html#the-offset-and-soffset-clauses">offsets</a> results by three points.</p>

<h4 id="advanced-syntax-16">Advanced syntax</h4>

<pre><code>SELECT MOVING_AVERAGE(&lt;function&gt; ([ * | &lt;field_key&gt; | /&lt;regular_expression&gt;/ ]) , N ) [INTO_clause] FROM_clause [WHERE_clause] GROUP_BY_clause [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p>The advanced syntax requires a <a href="../data_exploration/index.html#group-by-time-intervals"><code>GROUP BY time()</code> clause</a> and a nested InfluxQL function.
The query first calculates the results for the nested function at the specified <code>GROUP BY time()</code> interval and then applies the <code>MOVING_AVERAGE()</code> function to those results.</p>

<p><code>MOVING_AVERAGE()</code> supports the following nested functions:
<a href="index.html#count"><code>COUNT()</code></a>,
<a href="index.html#mean"><code>MEAN()</code></a>,
<a href="index.html#median"><code>MEDIAN()</code></a>,
<a href="index.html#mode"><code>MODE()</code></a>,
<a href="index.html#sum"><code>SUM()</code></a>,
<a href="index.html#first"><code>FIRST()</code></a>,
<a href="index.html#last"><code>LAST()</code></a>,
<a href="index.html#min"><code>MIN()</code></a>,
<a href="index.html#max"><code>MAX()</code></a>, and
<a href="index.html#percentile"><code>PERCENTILE()</code></a>.</p>

<h5 id="examples-50">Examples</h5>

<h6 id="calculate-the-moving-average-of-maximum-values">Calculate the moving average of maximum values</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">MOVING_AVERAGE</span><span class="p">(</span><span class="k">MAX</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">),</span><span class="mi">2</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">moving_average</span>
<span class="c1">----                   --------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">121</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">0885</span></code></pre></div>
<p>The query returns the rolling average across a two-value window of <a href="index.html#max">maximum</a> <code>water_level</code>s that are calculated at 12-minute intervals.</p>

<p>To get those results, InfluxDB first calculates the maximum <code>water_level</code>s at 12-minute intervals.
This step is the same as using the <code>MAX()</code> function with the <code>GROUP BY time()</code> clause and without <code>MOVING_AVERAGE()</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">MAX</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="k">max</span>
<span class="c1">----                   ---
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">116</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">126</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">051</span></code></pre></div>
<p>Next, InfluxDB calculates the rolling average across a two-value window using those maximum values.
The first final result (<code>2.121</code>) is the average of the first two maximum values (<code>(2.116 + 2.126) / 2</code>).</p>

<a class="dashingAutolink" name="autolink-39"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/NON_NEGATIVE_DERIVATIVE%28%29"></a><h3 id="non-negative-derivative">NON_NEGATIVE_DERIVATIVE()</h3>

<p>Returns the non-negative rate of change between subsequent <a href="../../concepts/glossary/index.html#field-value">field values</a>.
Non-negative rates of change include positive rates of change and rates of change that equal zero.</p>

<h4 id="basic-syntax-17">Basic syntax</h4>

<pre><code>SELECT NON_NEGATIVE_DERIVATIVE( [ * | &lt;field_key&gt; | /&lt;regular_expression&gt;/ ] [ , &lt;unit&gt; ] ) [INTO_clause] FROM_clause [WHERE_clause] [GROUP_BY_clause] [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p>InfluxDB calculates the difference between subsequent field values and converts those results into the rate of change per <code>unit</code>.
The <code>unit</code> argument is an integer followed by a <a href="../spec/index.html#literals">duration literal</a> and it is optional.
If the query does not specify the <code>unit</code>, the unit defaults to one second (<code>1s</code>).
<code>NON_NEGATIVE_DERIVATIVE()</code> returns only positive rates of change or rates of change that equal zero.</p>

<p><code>NON_NEGATIVE_DERIVATIVE(field_key)</code><br/>
Returns the non-negative rate of change between subsequent field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>.</p>

<p><code>NON_NEGATIVE_DERIVATIVE(/regular_expression/)</code><br/>
Returns the non-negative rate of change between subsequent field values associated with each field key that matches the <a href="../data_exploration/index.html#regular-expressions">regular expression</a>.</p>

<p><code>NON_NEGATIVE_DERIVATIVE(*)</code><br/>
Returns the non-negative rate of change between subsequent field values associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a>.</p>

<p><code>NON_NEGATIVE_DERIVATIVE()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<p>The basic syntax supports <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-tags">group by tags</a> but not <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-time-intervals">group by time</a>.
See the <a href="index.html#advanced-syntax-4">Advanced Syntax</a> section for how to use <code>NON_NEGATIVE_DERIVATIVE()</code> with a <code>GROUP BY time()</code> clause.</p>

<h5 id="examples-51">Examples</h5>

<p>See the examples in the <a href="index.html#examples-of-basic-syntax-1"><code>DERIVATIVE()</code> documentation</a>.
<code>NON_NEGATIVE_DERIVATIVE()</code> behaves the same as the <code>DERIVATIVE()</code> function but <code>NON_NEGATIVE_DERIVATIVE()</code> returns only positive rates of change or rates of change that equal zero.</p>

<h4 id="advanced-syntax-17">Advanced syntax</h4>

<pre><code>SELECT NON_NEGATIVE_DERIVATIVE(&lt;function&gt; ([ * | &lt;field_key&gt; | /&lt;regular_expression&gt;/ ]) [ , &lt;unit&gt; ] ) [INTO_clause] FROM_clause [WHERE_clause] GROUP_BY_clause [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p>The advanced syntax requires a <a href="../data_exploration/index.html#group-by-time-intervals"><code>GROUP BY time()</code> clause</a> and a nested InfluxQL function.
The query first calculates the results for the nested function at the specified <code>GROUP BY time()</code> interval and then applies the <code>NON_NEGATIVE_DERIVATIVE()</code> function to those results.</p>

<p>The <code>unit</code> argument is an integer followed by a <a href="../spec/index.html#literals">duration literal</a> and it is optional.
If the query does not specify the <code>unit</code>, the <code>unit</code> defaults to the <code>GROUP BY time()</code> interval.
Note that this behavior is different from the <a href="index.html#basic-syntax-4">basic syntax&rsquo;s</a> default behavior.
<code>NON_NEGATIVE_DERIVATIVE()</code> returns only positive rates of change or rates of change that equal zero.</p>

<p><code>NON_NEGATIVE_DERIVATIVE()</code> supports the following nested functions:
<a href="index.html#count"><code>COUNT()</code></a>,
<a href="index.html#mean"><code>MEAN()</code></a>,
<a href="index.html#median"><code>MEDIAN()</code></a>,
<a href="index.html#mode"><code>MODE()</code></a>,
<a href="index.html#sum"><code>SUM()</code></a>,
<a href="index.html#first"><code>FIRST()</code></a>,
<a href="index.html#last"><code>LAST()</code></a>,
<a href="index.html#min"><code>MIN()</code></a>,
<a href="index.html#max"><code>MAX()</code></a>, and
<a href="index.html#percentile"><code>PERCENTILE()</code></a>.</p>

<h5 id="examples-52">Examples</h5>

<p>See the examples in the <a href="index.html#examples-of-advanced-syntax-1"><code>DERIVATIVE()</code> documentation</a>.
<code>NON_NEGATIVE_DERIVATIVE()</code> behaves the same as the <code>DERIVATIVE()</code> function but <code>NON_NEGATIVE_DERIVATIVE()</code> returns only positive rates of change or rates of change that equal zero.</p>

<a class="dashingAutolink" name="autolink-40"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/NON_NEGATIVE_DIFFERENCE%28%29"></a><h3 id="non-negative-difference">NON_NEGATIVE_DIFFERENCE()</h3>

<p>Returns the non-negative result of subtraction between subsequent <a href="../../concepts/glossary/index.html#field-value">field values</a>.
Non-negative results of subtraction include positive differences and differences that equal zero.</p>

<h4 id="basic-syntax-18">Basic syntax</h4>

<pre><code>SELECT NON_NEGATIVE_DIFFERENCE( [ * | &lt;field_key&gt; | /&lt;regular_expression&gt;/ ] ) [INTO_clause] FROM_clause [WHERE_clause] [GROUP_BY_clause] [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p><code>NON_NEGATIVE_DIFFERENCE(field_key)</code><br/>
Returns the non-negative difference between subsequent field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>.</p>

<p><code>NON_NEGATIVE_DIFFERENCE(/regular_expression/)</code><br/>
Returns the non-negative difference between subsequent field values associated with each field key that matches the <a href="../data_exploration/index.html#regular-expressions">regular expression</a>.</p>

<p><code>NON_NEGATIVE_DIFFERENCE(*)</code><br/>
Returns the non-negative difference between subsequent field values associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a>.</p>

<p><code>NON_NEGATIVE_DIFFERENCE()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<p>The basic syntax supports <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-tags">group by tags</a> but not <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-time-intervals">group by time</a>.
See the <a href="index.html#advanced-syntax-5">Advanced Syntax</a> section for how to use <code>NON_NEGATIVE_DIFFERENCE()</code> with a <code>GROUP BY time()</code> clause.</p>

<h5 id="examples-53">Examples</h5>

<p>See the examples in the <a href="index.html#examples-of-basic-syntax-2"><code>DIFFERENCE()</code> documentation</a>.
<code>NON_NEGATIVE_DIFFERENCE()</code> behaves the same as the <code>DIFFERENCE()</code> function but <code>NON_NEGATIVE_DIFFERENCE()</code> returns only positive differences or differences that equal zero.</p>

<h4 id="advanced-syntax-18">Advanced syntax</h4>

<pre><code>SELECT NON_NEGATIVE_DIFFERENCE(&lt;function&gt;( [ * | &lt;field_key&gt; | /&lt;regular_expression&gt;/ ] )) [INTO_clause] FROM_clause [WHERE_clause] GROUP_BY_clause [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p>The advanced syntax requires a <a href="../data_exploration/index.html#group-by-time-intervals"><code>GROUP BY time()</code> clause</a> and a nested InfluxQL function.
The query first calculates the results for the nested function at the specified <code>GROUP BY time()</code> interval and then applies the <code>NON_NEGATIVE_DIFFERENCE()</code> function to those results.</p>

<p><code>NON_NEGATIVE_DIFFERENCE()</code> supports the following nested functions:
<a href="index.html#count"><code>COUNT()</code></a>,
<a href="index.html#mean"><code>MEAN()</code></a>,
<a href="index.html#median"><code>MEDIAN()</code></a>,
<a href="index.html#mode"><code>MODE()</code></a>,
<a href="index.html#sum"><code>SUM()</code></a>,
<a href="index.html#first"><code>FIRST()</code></a>,
<a href="index.html#last"><code>LAST()</code></a>,
<a href="index.html#min"><code>MIN()</code></a>,
<a href="index.html#max"><code>MAX()</code></a>, and
<a href="index.html#percentile"><code>PERCENTILE()</code></a>.</p>

<h5 id="examples-54">Examples</h5>

<p>See the examples in the <a href="index.html#examples-of-advanced-syntax-2"><code>DIFFERENCE()</code> documentation</a>.
<code>NON_NEGATIVE_DIFFERENCE()</code> behaves the same as the <code>DIFFERENCE()</code> function but <code>NON_NEGATIVE_DIFFERENCE()</code> returns only positive differences or differences that equal zero.</p>

<a class="dashingAutolink" name="autolink-41"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/POW%28%29"></a><h3 id="pow">POW()</h3>

<p>Returns the field value to the power of <code>x</code>.</p>

<h4 id="basic-syntax-19">Basic syntax</h4>

<pre><code>SELECT POW( [ * | &lt;field_key&gt; ], &lt;x&gt; ) [INTO_clause] FROM_clause [WHERE_clause] [GROUP_BY_clause] [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p><code>POW(field_key, x)</code><br/>
Returns the field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a> to the power of <code>x</code>.</p>

<!-- `POW(/regular_expression/, x)`  
Returns the field values associated with each field key that matches the [regular expression](/influxdb/v1.7/query_language/data_exploration/#regular-expressions) to the power of `x`. -->

<p><code>POW(*, x)</code><br/>
Returns the field values associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a> to the power of <code>x</code>.</p>

<p><code>POW()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<p>The basic syntax supports <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-tags">group by tags</a> but not <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-time-intervals">group by time</a>.
See the <a href="index.html#advanced-syntax">Advanced Syntax</a> section for how to use <code>POW()</code> with a <code>GROUP BY time()</code> clause.</p>

<h5 id="examples-55">Examples</h5>

<p>The examples below use the following subsample of the <a href="../data_download/index.html"><code>NOAA_water_database</code> data</a>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="s2">&#34;water_level&#34;</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">water_level</span>
<span class="c1">----                  -----------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">064</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">116</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">028</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">126</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">041</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">051</span></code></pre></div>
<h6 id="calculate-field-values-associated-with-a-field-key-to-the-power-of-4">Calculate field values associated with a field key to the power of 4</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">POW</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">pow</span>
<span class="c1">----                  ---
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">18</span><span class="p">.</span><span class="mi">148417929216</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">20</span><span class="p">.</span><span class="mi">047612231936</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">16</span><span class="p">.</span><span class="mi">914992230656004</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">20</span><span class="p">.</span><span class="mi">429279055375993</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">17</span><span class="p">.</span><span class="mi">352898193760993</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">17</span><span class="p">.</span><span class="mi">69549197320101</span></code></pre></div>
<p>The query returns field values in the <code>water_level</code> field key in the <code>h2o_feet</code> measurement multiplied to a power of 4.</p>

<h6 id="calculate-field-values-associated-with-each-field-key-in-a-measurement-to-the-power-of-4">Calculate field values associated with each field key in a measurement to the power of 4</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">POW</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">pow_water_level</span>
<span class="c1">----                  ---------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">18</span><span class="p">.</span><span class="mi">148417929216</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">20</span><span class="p">.</span><span class="mi">047612231936</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">16</span><span class="p">.</span><span class="mi">914992230656004</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">20</span><span class="p">.</span><span class="mi">429279055375993</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">17</span><span class="p">.</span><span class="mi">352898193760993</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">17</span><span class="p">.</span><span class="mi">69549197320101</span></code></pre></div>
<p>The query returns field values for each field key that stores numerical values in the <code>h2o_feet</code> measurement multiplied to the power of 4.
The <code>h2o_feet</code> measurement has one numerical field: <code>water_level</code>.</p>

<!-- ##### Calculate field values associated with each field key that matches a regular expression to the power of 4
```
> SELECT POW(/water/) FROM "h2o_feet" WHERE time >= '2015-08-18T00:00:00Z' AND time <= '2015-08-18T00:30:00Z' AND "location" = 'santa_monica'

name: h2o_feet
time                  pow
----                  ---
2015-08-18T00:00:00Z  18.148417929216
2015-08-18T00:06:00Z  20.047612231936
2015-08-18T00:12:00Z  16.914992230656004
2015-08-18T00:18:00Z  20.429279055375993
2015-08-18T00:24:00Z  17.352898193760993
2015-08-18T00:30:00Z  17.69549197320101
```
```

The query returns field values for each field key that stores numerical values and includes the word `water` in the `h2o_feet` measurement multiplied to the power of 4. -->

<h6 id="calculate-field-values-associated-with-a-field-key-to-the-power-of-4-and-include-several-clauses">Calculate field values associated with a field key to the power of 4 and include several clauses</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">POW</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">time</span> <span class="k">DESC</span> <span class="k">LIMIT</span> <span class="mi">4</span> <span class="k">OFFSET</span> <span class="mi">2</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">pow</span>
<span class="c1">----                  ---
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">20</span><span class="p">.</span><span class="mi">429279055375993</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">16</span><span class="p">.</span><span class="mi">914992230656004</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">20</span><span class="p">.</span><span class="mi">047612231936</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">18</span><span class="p">.</span><span class="mi">148417929216</span></code></pre></div>
<p>The query returns field values associated with the <code>water_level</code> field key multiplied to the power of 4.
It covers the <a href="../data_exploration/index.html#time-syntax">time range</a> between <code>2015-08-18T00:00:00Z</code> and <code>2015-08-18T00:30:00Z</code> and returns results in <a href="../data_exploration/index.html#order-by-time-desc">descending timestamp order</a>.
The query also <a href="../data_exploration/index.html#the-limit-and-slimit-clauses">limits</a> the number of points returned to four and <a href="../data_exploration/index.html#the-offset-and-soffset-clauses">offsets</a> results by two points.</p>

<h4 id="advanced-syntax-19">Advanced syntax</h4>

<pre><code>SELECT POW(&lt;function&gt;( [ * | &lt;field_key&gt; ] ), &lt;x&gt;) [INTO_clause] FROM_clause [WHERE_clause] GROUP_BY_clause [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p>The advanced syntax requires a <a href="../data_exploration/index.html#group-by-time-intervals"><code>GROUP BY time()</code> clause</a> and a nested InfluxQL function.
The query first calculates the results for the nested function at the specified <code>GROUP BY time()</code> interval and then applies the <code>POW()</code> function to those results.</p>

<p><code>POW()</code> supports the following nested functions:
<a href="index.html#count"><code>COUNT()</code></a>,
<a href="index.html#mean"><code>MEAN()</code></a>,
<a href="index.html#median"><code>MEDIAN()</code></a>,
<a href="index.html#mode"><code>MODE()</code></a>,
<a href="index.html#sum"><code>SUM()</code></a>,
<a href="index.html#first"><code>FIRST()</code></a>,
<a href="index.html#last"><code>LAST()</code></a>,
<a href="index.html#min"><code>MIN()</code></a>,
<a href="index.html#max"><code>MAX()</code></a>, and
<a href="index.html#percentile"><code>PERCENTILE()</code></a>.</p>

<h5 id="examples-56">Examples</h5>

<h6 id="calculate-mean-values-to-the-power-of-4">Calculate mean values to the power of 4</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">POW</span><span class="p">(</span><span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">),</span> <span class="mi">4</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">pow</span>
<span class="c1">----                  ---
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">19</span><span class="p">.</span><span class="mi">08029760999999</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">18</span><span class="p">.</span><span class="mi">609983417041</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">17</span><span class="p">.</span><span class="mi">523567165456008</span></code></pre></div>
<p>The query returns <a href="index.html#mean">average</a> <code>water_level</code>s that are calculated at 12-minute intervals multiplied to the power of 4.</p>

<p>To get those results, InfluxDB first calculates the average <code>water_level</code>s at 12-minute intervals.
This step is the same as using the <code>MEAN()</code> function with the <code>GROUP BY time()</code> clause and without <code>POW()</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">mean</span>
<span class="c1">----                   ----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">09</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">077</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">0460000000000003</span></code></pre></div>
<p>InfluxDB then calculates those averages multiplied to the power of 4.</p>

<a class="dashingAutolink" name="autolink-42"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/ROUND%28%29"></a><h3 id="round">ROUND()</h3>

<p>Returns the subsequent value rounded to the nearest integer.</p>

<h4 id="basic-syntax-20">Basic syntax</h4>

<pre><code>SELECT ROUND( [ * | &lt;field_key&gt; ] ) [INTO_clause] FROM_clause [WHERE_clause] [GROUP_BY_clause] [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p><code>ROUND(field_key)</code><br/>
Returns the field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a> rounded to the nearest integer.</p>

<!-- `ROUND(/regular_expression/)`  
Returns the field values associated with each field key that matches the [regular expression](/influxdb/v1.7/query_language/data_exploration/#regular-expressions) rounded to the nearest integer. -->

<p><code>ROUND(*)</code><br/>
Returns the field values associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a> rounded to the nearest integer.</p>

<p><code>ROUND()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<p>The basic syntax supports <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-tags">group by tags</a> but not <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-time-intervals">group by time</a>.
See the <a href="index.html#advanced-syntax">Advanced Syntax</a> section for how to use <code>ROUND()</code> with a <code>GROUP BY time()</code> clause.</p>

<h5 id="examples-57">Examples</h5>

<p>The examples below use the following subsample of the <a href="../data_download/index.html"><code>NOAA_water_database</code> data</a>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="s2">&#34;water_level&#34;</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">water_level</span>
<span class="c1">----                  -----------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">064</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">116</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">028</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">126</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">041</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">051</span></code></pre></div>
<h6 id="round-field-values-associated-with-a-field-key">Round field values associated with a field key</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">ROUND</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">round</span>
<span class="c1">----                  -----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span></code></pre></div>
<p>The query returns field values in the <code>water_level</code> field key in the <code>h2o_feet</code> measurement rounded to the nearest integer.</p>

<h6 id="round-field-values-associated-with-each-field-key-in-a-measurement">Round field values associated with each field key in a measurement</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">ROUND</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">round_water_level</span>
<span class="c1">----                  -----------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span></code></pre></div>
<p>The query returns field values for each field key that stores numerical values in the <code>h2o_feet</code> measurement rounded to the nearest integer.
The <code>h2o_feet</code> measurement has one numerical field: <code>water_level</code>.</p>

<!-- ##### Rounds field values associated with each field key that matches a regular expression
```
> SELECT ROUND(/water/) FROM "h2o_feet" WHERE time >= '2015-08-18T00:00:00Z' AND time <= '2015-08-18T00:30:00Z' AND "location" = 'santa_monica'

name: h2o_feet
time                   round_water_level
----                   -----------------
2015-08-18T00:00:00Z   3
2015-08-18T00:06:00Z   3
2015-08-18T00:12:00Z   3
2015-08-18T00:18:00Z   3
2015-08-18T00:24:00Z   3
2015-08-18T00:30:00Z   4
```

The query returns field values for each field key that stores numerical values and includes the word `water` in the `h2o_feet` measurement rounded to the nearest integer. -->

<h6 id="round-field-values-associated-with-a-field-key-and-include-several-clauses">Round field values associated with a field key and include several clauses</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">ROUND</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">time</span> <span class="k">DESC</span> <span class="k">LIMIT</span> <span class="mi">4</span> <span class="k">OFFSET</span> <span class="mi">2</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">round</span>
<span class="c1">----                  -----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span></code></pre></div>
<p>The query returns field values associated with the <code>water_level</code> field key rounded to the nearest integer.
It covers the <a href="../data_exploration/index.html#time-syntax">time range</a> between <code>2015-08-18T00:00:00Z</code> and <code>2015-08-18T00:30:00Z</code> and returns results in <a href="../data_exploration/index.html#order-by-time-desc">descending timestamp order</a>.
The query also <a href="../data_exploration/index.html#the-limit-and-slimit-clauses">limits</a> the number of points returned to four and <a href="../data_exploration/index.html#the-offset-and-soffset-clauses">offsets</a> results by two points.</p>

<h4 id="advanced-syntax-20">Advanced syntax</h4>

<pre><code>SELECT ROUND(&lt;function&gt;( [ * | &lt;field_key&gt; ] )) [INTO_clause] FROM_clause [WHERE_clause] GROUP_BY_clause [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p>The advanced syntax requires a <a href="../data_exploration/index.html#group-by-time-intervals"><code>GROUP BY time()</code> clause</a> and a nested InfluxQL function.
The query first calculates the results for the nested function at the specified <code>GROUP BY time()</code> interval and then applies the <code>ROUND()</code> function to those results.</p>

<p><code>ROUND()</code> supports the following nested functions:
<a href="index.html#count"><code>COUNT()</code></a>,
<a href="index.html#mean"><code>MEAN()</code></a>,
<a href="index.html#median"><code>MEDIAN()</code></a>,
<a href="index.html#mode"><code>MODE()</code></a>,
<a href="index.html#sum"><code>SUM()</code></a>,
<a href="index.html#first"><code>FIRST()</code></a>,
<a href="index.html#last"><code>LAST()</code></a>,
<a href="index.html#min"><code>MIN()</code></a>,
<a href="index.html#max"><code>MAX()</code></a>, and
<a href="index.html#percentile"><code>PERCENTILE()</code></a>.</p>

<h5 id="examples-58">Examples</h5>

<h6 id="calculate-mean-values-rounded-to-the-nearest-integer">Calculate mean values rounded to the nearest integer</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">ROUND</span><span class="p">(</span><span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">))</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">round</span>
<span class="c1">----                  -----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span></code></pre></div>
<p>The query returns the <a href="index.html#mean">average</a> <code>water_level</code>s that are calculated at 12-minute intervals and rounds to the nearest integer.</p>

<p>To get those results, InfluxDB first calculates the average <code>water_level</code>s at 12-minute intervals.
This step is the same as using the <code>MEAN()</code> function with the <code>GROUP BY time()</code> clause and without <code>ROUND()</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">mean</span>
<span class="c1">----                   ----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">09</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">077</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">0460000000000003</span></code></pre></div>
<p>InfluxDB then rounds those averages to the nearest integer.</p>

<a class="dashingAutolink" name="autolink-43"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/SIN%28%29"></a><h3 id="sin">SIN()</h3>

<p>Returns the sine of the field value.</p>

<h4 id="basic-syntax-21">Basic syntax</h4>

<pre><code>SELECT SIN( [ * | &lt;field_key&gt; ] ) [INTO_clause] FROM_clause [WHERE_clause] [GROUP_BY_clause] [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p><code>SIN(field_key)</code><br/>
Returns the sine of field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>.</p>

<!-- `SIN(/regular_expression/)`  
Returns the sine of field values associated with each field key that matches the [regular expression](/influxdb/v1.7/query_language/data_exploration/#regular-expressions). -->

<p><code>SIN(*)</code><br/>
Returns the sine of field values associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a>.</p>

<p><code>SIN()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<p>The basic syntax supports <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-tags">group by tags</a> but not <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-time-intervals">group by time</a>.
See the <a href="index.html#advanced-syntax">Advanced Syntax</a> section for how to use <code>SIN()</code> with a <code>GROUP BY time()</code> clause.</p>

<h5 id="examples-59">Examples</h5>

<p>The examples below use the following subsample of the <a href="../data_download/index.html"><code>NOAA_water_database</code> data</a>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="s2">&#34;water_level&#34;</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">water_level</span>
<span class="c1">----                  -----------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">064</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">116</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">028</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">126</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">041</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">051</span></code></pre></div>
<h6 id="calculate-the-sine-of-field-values-associated-with-a-field-key">Calculate the sine of field values associated with a field key</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">SIN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">sin</span>
<span class="c1">----                  ---
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">8808206017241819</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">8550216851706579</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">8972904165810275</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">8497930984115993</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">8914760289023131</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">8869008523376968</span></code></pre></div>
<p>The query returns sine of field values in the <code>water_level</code> field key in the <code>h2o_feet</code> measurement.</p>

<h6 id="calculate-the-sine-of-field-values-associated-with-each-field-key-in-a-measurement">Calculate the sine of field values associated with each field key in a measurement</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">SIN</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">sin_water_level</span>
<span class="c1">----                  ---------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">8808206017241819</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">8550216851706579</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">8972904165810275</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">8497930984115993</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">8914760289023131</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">8869008523376968</span></code></pre></div>
<p>The query returns sine of field values for each field key that stores numerical values in the <code>h2o_feet</code> measurement.
The <code>h2o_feet</code> measurement has one numerical field: <code>water_level</code>.</p>

<!-- ##### Calculate the sine of field values associated with each field key that matches a regular expression
```
> SELECT SIN(/water/) FROM "h2o_feet" WHERE time >= '2015-08-18T00:00:00Z' AND time <= '2015-08-18T00:30:00Z' AND "location" = 'santa_monica'

name: h2o_feet
time                  sin
----                  ---
2015-08-18T00:00:00Z  0.8808206017241819
2015-08-18T00:06:00Z  0.8550216851706579
2015-08-18T00:12:00Z  0.8972904165810275
2015-08-18T00:18:00Z  0.8497930984115993
2015-08-18T00:24:00Z  0.8914760289023131
2015-08-18T00:30:00Z  0.8869008523376968
```

The query returns sine of field values for each field key that stores numerical values and includes the word `water` in the `h2o_feet` measurement. -->

<h6 id="calculate-the-sine-of-field-values-associated-with-a-field-key-and-include-several-clauses">Calculate the sine of field values associated with a field key and include several clauses</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">SIN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">time</span> <span class="k">DESC</span> <span class="k">LIMIT</span> <span class="mi">4</span> <span class="k">OFFSET</span> <span class="mi">2</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">sin</span>
<span class="c1">----                  ---
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">8497930984115993</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">8972904165810275</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">8550216851706579</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">8808206017241819</span></code></pre></div>
<p>The query returns sine of field values associated with the <code>water_level</code> field key.
It covers the <a href="../data_exploration/index.html#time-syntax">time range</a> between <code>2015-08-18T00:00:00Z</code> and <code>2015-08-18T00:30:00Z</code> and returns results in <a href="../data_exploration/index.html#order-by-time-desc">descending timestamp order</a>.
The query also <a href="../data_exploration/index.html#the-limit-and-slimit-clauses">limits</a> the number of points returned to four and <a href="../data_exploration/index.html#the-offset-and-soffset-clauses">offsets</a> results by two points.</p>

<h4 id="advanced-syntax-21">Advanced syntax</h4>

<pre><code>SELECT SIN(&lt;function&gt;( [ * | &lt;field_key&gt; ] )) [INTO_clause] FROM_clause [WHERE_clause] GROUP_BY_clause [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p>The advanced syntax requires a <a href="../data_exploration/index.html#group-by-time-intervals"><code>GROUP BY time()</code> clause</a> and a nested InfluxQL function.
The query first calculates the results for the nested function at the specified <code>GROUP BY time()</code> interval and then applies the <code>SIN()</code> function to those results.</p>

<p><code>SIN()</code> supports the following nested functions:
<a href="index.html#count"><code>COUNT()</code></a>,
<a href="index.html#mean"><code>MEAN()</code></a>,
<a href="index.html#median"><code>MEDIAN()</code></a>,
<a href="index.html#mode"><code>MODE()</code></a>,
<a href="index.html#sum"><code>SUM()</code></a>,
<a href="index.html#first"><code>FIRST()</code></a>,
<a href="index.html#last"><code>LAST()</code></a>,
<a href="index.html#min"><code>MIN()</code></a>,
<a href="index.html#max"><code>MAX()</code></a>, and
<a href="index.html#percentile"><code>PERCENTILE()</code></a>.</p>

<h5 id="examples-60">Examples</h5>

<h6 id="calculate-the-sine-of-mean-values">Calculate the sine of mean values</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">SIN</span><span class="p">(</span><span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">))</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">sin</span>
<span class="c1">----                  ---
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">8682145834456126</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">8745914945253902</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">8891995555912935</span></code></pre></div>
<p>The query returns the sine of <a href="index.html#mean">average</a> <code>water_level</code>s that are calculated at 12-minute intervals.</p>

<p>To get those results, InfluxDB first calculates the average <code>water_level</code>s at 12-minute intervals.
This step is the same as using the <code>MEAN()</code> function with the <code>GROUP BY time()</code> clause and without <code>SIN()</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">mean</span>
<span class="c1">----                   ----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">09</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">077</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">0460000000000003</span></code></pre></div>
<p>InfluxDB then calculates sine of those averages.</p>

<a class="dashingAutolink" name="autolink-44"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/SQRT%28%29"></a><h3 id="sqrt">SQRT()</h3>

<p>Returns the square root of field value.</p>

<h4 id="basic-syntax-22">Basic syntax</h4>

<pre><code>SELECT SQRT( [ * | &lt;field_key&gt; ] ) [INTO_clause] FROM_clause [WHERE_clause] [GROUP_BY_clause] [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p><code>SQRT(field_key)</code><br/>
Returns the square root of field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>.</p>

<!-- `SQRT(/regular_expression/)`  
Returns the square root field values associated with each field key that matches the [regular expression](/influxdb/v1.7/query_language/data_exploration/#regular-expressions). -->

<p><code>SQRT(*)</code><br/>
Returns the square root field values associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a>.</p>

<p><code>SQRT()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<p>The basic syntax supports <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-tags">group by tags</a> but not <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-time-intervals">group by time</a>.
See the <a href="index.html#advanced-syntax">Advanced Syntax</a> section for how to use <code>SQRT()</code> with a <code>GROUP BY time()</code> clause.</p>

<h5 id="examples-61">Examples</h5>

<p>The examples below use the following subsample of the <a href="../data_download/index.html"><code>NOAA_water_database</code> data</a>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="s2">&#34;water_level&#34;</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">water_level</span>
<span class="c1">----                  -----------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">064</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">116</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">028</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">126</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">041</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">051</span></code></pre></div>
<h6 id="calculate-the-square-root-of-field-values-associated-with-a-field-key">Calculate the square root of field values associated with a field key</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">SQRT</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">sqrt</span>
<span class="c1">----                  ----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">4366627996854378</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">4546477236774544</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">4240786495134319</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">4580809305384939</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">4286357128393508</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">4321312788986909</span></code></pre></div>
<p>The query returns the square roots of field values in the <code>water_level</code> field key in the <code>h2o_feet</code> measurement.</p>

<h6 id="calculate-the-square-root-of-field-values-associated-with-each-field-key-in-a-measurement">Calculate the square root of field values associated with each field key in a measurement</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">SQRT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">sqrt_water_level</span>
<span class="c1">----                  ----------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">4366627996854378</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">4546477236774544</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">4240786495134319</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">4580809305384939</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">4286357128393508</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">4321312788986909</span></code></pre></div>
<p>The query returns the square roots of field values for each field key that stores numerical values in the <code>h2o_feet</code> measurement.
The <code>h2o_feet</code> measurement has one numerical field: <code>water_level</code>.</p>

<!-- ##### Calculate the square root of field values associated with each field key that matches a regular expression
```
> SELECT SQRT(/water/) FROM "h2o_feet" WHERE time >= '2015-08-18T00:00:00Z' AND time <= '2015-08-18T00:30:00Z' AND "location" = 'santa_monica'

name: h2o_feet
time                  sqrt_water_level
----                  ----------------
2015-08-18T00:00:00Z  1.4366627996854378
2015-08-18T00:06:00Z  1.4546477236774544
2015-08-18T00:12:00Z  1.4240786495134319
2015-08-18T00:18:00Z  1.4580809305384939
2015-08-18T00:24:00Z  1.4286357128393508
2015-08-18T00:30:00Z  1.4321312788986909
```
```

The query returns the square roots of field values for each field key that stores numerical values and includes the word `water` in the `h2o_feet` measurement. -->

<h6 id="calculate-the-square-root-of-field-values-associated-with-a-field-key-and-include-several-clauses">Calculate the square root of field values associated with a field key and include several clauses</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">SQRT</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">time</span> <span class="k">DESC</span> <span class="k">LIMIT</span> <span class="mi">4</span> <span class="k">OFFSET</span> <span class="mi">2</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">sqrt</span>
<span class="c1">----                  ----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">4580809305384939</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">4240786495134319</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">4546477236774544</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">4366627996854378</span></code></pre></div>
<p>The query returns the square roots of field values associated with the <code>water_level</code> field key.
It covers the <a href="../data_exploration/index.html#time-syntax">time range</a> between <code>2015-08-18T00:00:00Z</code> and <code>2015-08-18T00:30:00Z</code> and returns results in <a href="../data_exploration/index.html#order-by-time-desc">descending timestamp order</a>.
The query also <a href="../data_exploration/index.html#the-limit-and-slimit-clauses">limits</a> the number of points returned to four and <a href="../data_exploration/index.html#the-offset-and-soffset-clauses">offsets</a> results by two points.</p>

<h4 id="advanced-syntax-22">Advanced syntax</h4>

<pre><code>SELECT SQRT(&lt;function&gt;( [ * | &lt;field_key&gt; ] )) [INTO_clause] FROM_clause [WHERE_clause] GROUP_BY_clause [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p>The advanced syntax requires a <a href="../data_exploration/index.html#group-by-time-intervals"><code>GROUP BY time()</code> clause</a> and a nested InfluxQL function.
The query first calculates the results for the nested function at the specified <code>GROUP BY time()</code> interval and then applies the <code>SQRT()</code> function to those results.</p>

<p><code>SQRT()</code> supports the following nested functions:
<a href="index.html#count"><code>COUNT()</code></a>,
<a href="index.html#mean"><code>MEAN()</code></a>,
<a href="index.html#median"><code>MEDIAN()</code></a>,
<a href="index.html#mode"><code>MODE()</code></a>,
<a href="index.html#sum"><code>SUM()</code></a>,
<a href="index.html#first"><code>FIRST()</code></a>,
<a href="index.html#last"><code>LAST()</code></a>,
<a href="index.html#min"><code>MIN()</code></a>,
<a href="index.html#max"><code>MAX()</code></a>, and
<a href="index.html#percentile"><code>PERCENTILE()</code></a>.</p>

<h5 id="examples-62">Examples</h5>

<h6 id="calculate-the-square-root-of-mean-values">Calculate the square root of mean values</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">SQRT</span><span class="p">(</span><span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">))</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">sqrt</span>
<span class="c1">----                  ----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">445683229480096</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">4411800720243115</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">430384563675098</span></code></pre></div>
<p>The query returns the square roots of <a href="index.html#mean">average</a> <code>water_level</code>s that are calculated at 12-minute intervals.</p>

<p>To get those results, InfluxDB first calculates the average <code>water_level</code>s at 12-minute intervals.
This step is the same as using the <code>MEAN()</code> function with the <code>GROUP BY time()</code> clause and without <code>SQRT()</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">mean</span>
<span class="c1">----                   ----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">09</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">077</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">0460000000000003</span></code></pre></div>
<p>InfluxDB then calculates the square roots of those averages.</p>

<a class="dashingAutolink" name="autolink-45"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/TAN%28%29"></a><h3 id="tan">TAN()</h3>

<p>Returns the tangent of the field value.</p>

<h4 id="basic-syntax-23">Basic syntax</h4>

<pre><code>SELECT TAN( [ * | &lt;field_key&gt; ] ) [INTO_clause] FROM_clause [WHERE_clause] [GROUP_BY_clause] [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p><code>TAN(field_key)</code><br/>
Returns the tangent of field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>.</p>

<!-- `TAN(/regular_expression/)`  
Returns the tangent of field values associated with each field key that matches the [regular expression](/influxdb/v1.7/query_language/data_exploration/#regular-expressions). -->

<p><code>TAN(*)</code><br/>
Returns the tangent of field values associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a>.</p>

<p><code>TAN()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<p>The basic syntax supports <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-tags">group by tags</a> but not <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-time-intervals">group by time</a>.
See the <a href="index.html#advanced-syntax">Advanced Syntax</a> section for how to use <code>TAN()</code> with a <code>GROUP BY time()</code> clause.</p>

<h5 id="examples-63">Examples</h5>

<p>The examples below use the following subsample of the <a href="../data_download/index.html"><code>NOAA_water_database</code> data</a>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="s2">&#34;water_level&#34;</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">water_level</span>
<span class="c1">----                  -----------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">064</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">116</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">028</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">126</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">041</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">051</span></code></pre></div>
<h6 id="calculate-the-tangent-of-field-values-associated-with-a-field-key">Calculate the tangent of field values associated with a field key</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">TAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">tan</span>
<span class="c1">----                  ---
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">1</span><span class="p">.</span><span class="mi">8604293534384375</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">1</span><span class="p">.</span><span class="mi">6487359603347427</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">2</span><span class="p">.</span><span class="mi">0326408012302273</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">1</span><span class="p">.</span><span class="mi">6121545688343464</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">1</span><span class="p">.</span><span class="mi">9676434782626282</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">1</span><span class="p">.</span><span class="mi">9198657720074992</span></code></pre></div>
<p>The query returns tangent of field values in the <code>water_level</code> field key in the <code>h2o_feet</code> measurement.</p>

<h6 id="calculate-the-tangent-of-field-values-associated-with-each-field-key-in-a-measurement">Calculate the tangent of field values associated with each field key in a measurement</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">TAN</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">tan_water_level</span>
<span class="c1">----                  ---------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">1</span><span class="p">.</span><span class="mi">8604293534384375</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">1</span><span class="p">.</span><span class="mi">6487359603347427</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">2</span><span class="p">.</span><span class="mi">0326408012302273</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">1</span><span class="p">.</span><span class="mi">6121545688343464</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">1</span><span class="p">.</span><span class="mi">9676434782626282</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">1</span><span class="p">.</span><span class="mi">9198657720074992</span></code></pre></div>
<p>The query returns tangent of field values for each field key that stores numerical values in the <code>h2o_feet</code> measurement.
The <code>h2o_feet</code> measurement has one numerical field: <code>water_level</code>.</p>

<!-- ##### Calculate the tangent of field values associated with each field key that matches a regular expression
```
> SELECT TAN(/water/) FROM "h2o_feet" WHERE time >= '2015-08-18T00:00:00Z' AND time <= '2015-08-18T00:30:00Z' AND "location" = 'santa_monica'

name: h2o_feet
time                  tan
----                  ---
2015-08-18T00:00:00Z  -1.8604293534384375
2015-08-18T00:06:00Z  -1.6487359603347427
2015-08-18T00:12:00Z  -2.0326408012302273
2015-08-18T00:18:00Z  -1.6121545688343464
2015-08-18T00:24:00Z  -1.9676434782626282
2015-08-18T00:30:00Z  -1.9198657720074992
```

The query returns tangent of field values for each field key that stores numerical values and includes the word `water` in the `h2o_feet` measurement. -->

<h6 id="calculate-the-tangent-of-field-values-associated-with-a-field-key-and-include-several-clauses">Calculate the tangent of field values associated with a field key and include several clauses</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">TAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">time</span> <span class="k">DESC</span> <span class="k">LIMIT</span> <span class="mi">4</span> <span class="k">OFFSET</span> <span class="mi">2</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">tan</span>
<span class="c1">----                  ---
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">1</span><span class="p">.</span><span class="mi">6121545688343464</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">2</span><span class="p">.</span><span class="mi">0326408012302273</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">1</span><span class="p">.</span><span class="mi">6487359603347427</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">1</span><span class="p">.</span><span class="mi">8604293534384375</span></code></pre></div>
<p>The query returns tangent of field values associated with the <code>water_level</code> field key.
It covers the <a href="../data_exploration/index.html#time-syntax">time range</a> between <code>2015-08-18T00:00:00Z</code> and <code>2015-08-18T00:30:00Z</code> and returns results in <a href="../data_exploration/index.html#order-by-time-desc">descending timestamp order</a>.
The query also <a href="../data_exploration/index.html#the-limit-and-slimit-clauses">limits</a> the number of points returned to four and <a href="../data_exploration/index.html#the-offset-and-soffset-clauses">offsets</a> results by two points.</p>

<h4 id="advanced-syntax-23">Advanced syntax</h4>

<pre><code>SELECT TAN(&lt;function&gt;( [ * | &lt;field_key&gt; ] )) [INTO_clause] FROM_clause [WHERE_clause] GROUP_BY_clause [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p>The advanced syntax requires a <a href="../data_exploration/index.html#group-by-time-intervals"><code>GROUP BY time()</code> clause</a> and a nested InfluxQL function.
The query first calculates the results for the nested function at the specified <code>GROUP BY time()</code> interval and then applies the <code>TAN()</code> function to those results.</p>

<p><code>TAN()</code> supports the following nested functions:
<a href="index.html#count"><code>COUNT()</code></a>,
<a href="index.html#mean"><code>MEAN()</code></a>,
<a href="index.html#median"><code>MEDIAN()</code></a>,
<a href="index.html#mode"><code>MODE()</code></a>,
<a href="index.html#sum"><code>SUM()</code></a>,
<a href="index.html#first"><code>FIRST()</code></a>,
<a href="index.html#last"><code>LAST()</code></a>,
<a href="index.html#min"><code>MIN()</code></a>,
<a href="index.html#max"><code>MAX()</code></a>, and
<a href="index.html#percentile"><code>PERCENTILE()</code></a>.</p>

<h5 id="examples-64">Examples</h5>

<h6 id="calculate-the-tangent-of-mean-values">Calculate the tangent of mean values</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">TAN</span><span class="p">(</span><span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">))</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">tan</span>
<span class="c1">----                  ---
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">1</span><span class="p">.</span><span class="mi">7497661902817365</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">1</span><span class="p">.</span><span class="mi">8038002062256624</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">1</span><span class="p">.</span><span class="mi">9435224805850773</span></code></pre></div>
<p>The query returns tangent of <a href="index.html#mean">average</a> <code>water_level</code>s that are calculated at 12-minute intervals.</p>

<p>To get those results, InfluxDB first calculates the average <code>water_level</code>s at 12-minute intervals.
This step is the same as using the <code>MEAN()</code> function with the <code>GROUP BY time()</code> clause and without <code>TAN()</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:30:00Z&#39;</span> <span class="k">AND</span> <span class="s2">&#34;location&#34;</span> <span class="o">=</span> <span class="s1">&#39;santa_monica&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="n">mean</span>
<span class="c1">----                   ----
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">09</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">077</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">0460000000000003</span></code></pre></div>
<p>InfluxDB then calculates tangent of those averages.</p>

<h2 id="predictors">Predictors</h2>

<a class="dashingAutolink" name="autolink-46"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/HOLT_WINTERS%28%29"></a><h3 id="holt-winters">HOLT_WINTERS()</h3>

<p>Returns N number of predicted <a href="../../concepts/glossary/index.html#field-value">field values</a> using the
<a href="https://www.otexts.org/fpp/7/5">Holt-Winters</a> seasonal method.</p>

<p>Use <code>HOLT_WINTERS()</code> to:</p>

<ul>
<li>Predict when data values will cross a given threshold</li>
<li>Compare predicted values with actual values to detect anomalies in your data</li>
</ul>

<h4 id="syntax-18">Syntax</h4>

<pre><code>SELECT HOLT_WINTERS[_WITH-FIT](&lt;function&gt;(&lt;field_key&gt;),&lt;N&gt;,&lt;S&gt;) [INTO_clause] FROM_clause [WHERE_clause] GROUP_BY_clause [ORDER_BY_clause] [LIMIT_clause] [OFFSET_clause] [SLIMIT_clause] [SOFFSET_clause]
</code></pre>

<p><code>HOLT_WINTERS(function(field_key),N,S)</code> returns <code>N</code> seasonally adjusted
predicted field values for the specified <a href="../../concepts/glossary/index.html#field-key">field key</a>.</p>

<p>The <code>N</code> predicted values occur at the same interval as the <a href="../data_exploration/index.html#group-by-time-intervals"><code>GROUP BY time()</code> interval</a>.
If your <code>GROUP BY time()</code> interval is <code>6m</code> and <code>N</code> is <code>3</code> you&rsquo;ll
receive three predicted values that are each six minutes apart.</p>

<p><code>S</code> is the seasonal pattern parameter and delimits the length of a seasonal
pattern according to the <code>GROUP BY time()</code> interval.
If your <code>GROUP BY time()</code> interval is <code>2m</code> and <code>S</code> is <code>3</code>, then the
seasonal pattern occurs every six minutes, that is, every three data points.
If you do not want to seasonally adjust your predicted values, set <code>S</code> to <code>0</code>
or <code>1.</code></p>

<p><code>HOLT_WINTERS_WITH_FIT(function(field_key),N,S)</code> returns the fitted values in
addition to <code>N</code> seasonally adjusted predicted field values for the specified field key.</p>

<p><code>HOLT_WINTERS()</code> and <code>HOLT_WINTERS_WITH_FIT()</code> work with data that occur at
consistent time intervals; the nested InfluxQL function and the
<code>GROUP BY time()</code> clause ensure that the Holt-Winters functions operate on regular data.</p>

<p><code>HOLT_WINTERS()</code> and <code>HOLT_WINTERS_WITH_FIT()</code> support int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<h4 id="examples-65">Examples</h4>

<h5 id="predict-field-values-associated-with-a-field-key">Predict field values associated with a field key</h5>

<h6 id="raw-data">Raw Data</h6>

<p>The example uses <a href="https://github.com/influxdata/chronograf">Chronograf</a> to visualize the data.
The example focuses on the following subsample of the <a href="../data_download/index.html"><code>NOAA_water_database</code> data</a>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="s2">&#34;water_level&#34;</span> <span class="k">FROM</span> <span class="s2">&#34;NOAA_water_database&#34;</span><span class="p">.</span><span class="s2">&#34;autogen&#34;</span><span class="p">.</span><span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="s2">&#34;location&#34;</span><span class="o">=</span><span class="s1">&#39;santa_monica&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-22 22:12:00&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-28 03:00:00&#39;</span></code></pre></div>
<p><img src="../../../../img/influxdb/hw-raw-data-1-2.png" alt="Raw Data"/></p>

<h6 id="step-1-match-the-trends-of-the-raw-data">Step 1: Match the Trends of the Raw Data</h6>

<p>Write a <code>GROUP BY time()</code> query that matches the general trends of the raw <code>water_level</code> data.
Here, we use the <a href="index.html#first"><code>FIRST()</code></a> function:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="k">FIRST</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;NOAA_water_database&#34;</span><span class="p">.</span><span class="s2">&#34;autogen&#34;</span><span class="p">.</span><span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="s2">&#34;location&#34;</span><span class="o">=</span><span class="s1">&#39;santa_monica&#39;</span> <span class="k">and</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-22 22:12:00&#39;</span> <span class="k">and</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-28 03:00:00&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">379</span><span class="n">m</span><span class="p">,</span><span class="mi">348</span><span class="n">m</span><span class="p">)</span></code></pre></div>
<p>In the <code>GROUP BY time()</code> clause, the first argument (<code>379m</code>) matches
the length of time that occurs between each peak and trough in the <code>water_level</code> data.
The second argument (<code>348m</code>) is the
<a href="../data_exploration/index.html#advanced-group-by-time-syntax">offset interval</a>.
The offset interval alters the default <code>GROUP BY time()</code> boundaries to
match the time range of the raw data.</p>

<p>The blue line shows the results of the query:</p>

<p><img src="../../../../img/influxdb/hw-first-step-1-2.png" alt="First step"/></p>

<h6 id="step-2-determine-the-seasonal-pattern">Step 2: Determine the Seasonal Pattern</h6>

<p>Identify the seasonal pattern in the data using the information from the
query in step 1.</p>

<p>Focusing on the blue line in the graph below, the pattern in the <code>water_level</code> data repeats about every 25 hours and 15 minutes.
There are four data points per season, so <code>4</code> is the seasonal pattern argument.</p>

<p><img src="../../../../img/influxdb/hw-second-step-1-2.png" alt="Second step"/></p>

<h6 id="step-3-apply-the-holt-winters-function">Step 3: Apply the HOLT_WINTERS() function</h6>

<p>Add the Holt-Winters function to the query.
Here, we use <code>HOLT_WINTERS_WITH_FIT()</code> to view both the fitted values and the predicted values:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="n">HOLT_WINTERS_WITH_FIT</span><span class="p">(</span><span class="k">FIRST</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">),</span><span class="mi">10</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;NOAA_water_database&#34;</span><span class="p">.</span><span class="s2">&#34;autogen&#34;</span><span class="p">.</span><span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="s2">&#34;location&#34;</span><span class="o">=</span><span class="s1">&#39;santa_monica&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-22 22:12:00&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-28 03:00:00&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">379</span><span class="n">m</span><span class="p">,</span><span class="mi">348</span><span class="n">m</span><span class="p">)</span></code></pre></div>
<p>In the <code>HOLT_WINTERS_WITH_FIT()</code> function, the first argument (<code>10</code>) requests 10 predicted field values.
Each predicted point is <code>379m</code> apart, the same interval as the first argument in the <code>GROUP BY time()</code> clause.
The second argument in the <code>HOLT_WINTERS_WITH_FIT()</code> function (<code>4</code>) is the seasonal pattern that we determined in the previous step.</p>

<p>The blue line shows the results of the query:</p>

<p><img src="../../../../img/influxdb/hw-third-step-1-2.png" alt="Third step"/></p>

<h4 id="common-issues-with-holt-winters">Common Issues with <code>HOLT_WINTERS()</code></h4>

<h5 id="holt-winters-and-receiving-fewer-than-n-points"><code>HOLT_WINTERS()</code> and receiving fewer than <code>N</code> points</h5>

<p>In some cases, users may receive fewer predicted points than
requested by the <code>N</code> parameter.
That behavior occurs when the math becomes unstable and cannot forecast more
points.
It implies that either <code>HOLT_WINTERS()</code> is not suited for the dataset or that
the seasonal adjustment parameter is invalid and is confusing the algorithm.</p>

<h2 id="technical-analysis">Technical Analysis</h2>

<p>The following technical analysis functions apply widely used algorithms to your data.
While they are primarily used in the world of finance and investing, they have
application in other industries and use cases as well.</p>

<p><a href="index.html#chande-momentum-oscillator">CHANDE_MOMENTUM_OSCILLATOR()</a><br/>
<a href="index.html#exponential-moving-average">EXPONENTIAL_MOVING_AVERAGE()</a><br/>
<a href="index.html#double-exponential-moving-average">DOUBLE_EXPONENTIAL_MOVING_AVERAGE()</a><br/>
<a href="index.html#kaufmans-efficiency-ratio">KAUFMANS_EFFICIENCY_RATIO()</a><br/>
<a href="index.html#kaufmans-adaptive-moving-average">KAUFMANS_ADAPTIVE_MOVING_AVERAGE()</a><br/>
<a href="index.html#triple-exponential-moving-average">TRIPLE_EXPONENTIAL_MOVING_AVERAGE()</a><br/>
<a href="index.html#triple-exponential-derivative">TRIPLE_EXPONENTIAL_DERIVATIVE()</a><br/>
<a href="index.html#relative-strength-index">RELATIVE_STRENGTH_INDEX()</a></p>

<a class="dashingAutolink" name="autolink-47"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/Arguments"></a><h3 id="arguments">Arguments</h3>

<p>Along with a <a href="../../concepts/glossary/index.html#field-key">field key</a>,
technical analysis function accept the following arguments:</p>

<h4 id="period"><code>PERIOD</code></h4>

<p><strong>Required, integer, min=1</strong></p>

<p>The sample size of the algorithm.
This is essentially the number of historical samples which have any significant
effect on the output of the algorithm.
E.G. <code>2</code> means the current point and the point before it.
The algorithm uses an exponential decay rate to determine the weight of a historical point,
generally known as the alpha (&alpha;). The <code>PERIOD</code> controls the decay rate.</p>

<blockquote>
<p>NOTE: Older points can still have an impact.</p>
</blockquote>

<h4 id="hold-period"><code>HOLD_PERIOD</code></h4>

<p><strong>integer, min=-1</strong></p>

<p>How many samples the algorithm needs before it will start emitting results.
The default of <code>-1</code> means the value is based on the algorithm, the <code>PERIOD</code>,
and the <code>WARMUP_TYPE</code>, but is a value in which the algorithm can emit meaningful results.</p>

<p><em><strong>Default Hold Periods:</strong></em></p>

<p>For most of the available technical analysis, the default <code>HOLD_PERIOD</code> is
determined by which technical analysis algorithm you&rsquo;re using and the <a href="index.html#warmup-type"><code>WARMUP_TYPE</code></a></p>

<table>
<thead>
<tr>
<th>Algorithm \ Warmup Type</th>
<th>simple</th>
<th>exponential</th>
<th align="center">none</th>
</tr>
</thead>

<tbody>
<tr>
<td><a href="index.html#exponential-moving-average">EXPONENTIAL_MOVING_AVERAGE</a></td>
<td>PERIOD - 1</td>
<td>PERIOD - 1</td>
<td align="center"><span style="opacity:.35">n/a</span></td>
</tr>

<tr>
<td><a href="index.html#double-exponential-moving-average">DOUBLE_EXPONENTIAL_MOVING_AVERAGE</a></td>
<td>( PERIOD - 1 ) * 2</td>
<td>PERIOD - 1</td>
<td align="center"><span style="opacity:.35">n/a</span></td>
</tr>

<tr>
<td><a href="index.html#triple-exponential-moving-average">TRIPLE_EXPONENTIAL_MOVING_AVERAGE</a></td>
<td>( PERIOD - 1 ) * 3</td>
<td>PERIOD - 1</td>
<td align="center"><span style="opacity:.35">n/a</span></td>
</tr>

<tr>
<td><a href="index.html#triple-exponential-derivative">TRIPLE_EXPONENTIAL_DERIVATIVE</a></td>
<td>( PERIOD - 1 ) * 3 + 1</td>
<td>PERIOD</td>
<td align="center"><span style="opacity:.35">n/a</span></td>
</tr>

<tr>
<td><a href="index.html#relative-strength-index">RELATIVE_STRENGTH_INDEX</a></td>
<td>PERIOD</td>
<td>PERIOD</td>
<td align="center"><span style="opacity:.35">n/a</span></td>
</tr>

<tr>
<td><a href="index.html#chande-momentum-oscillator">CHANDE_MOMENTUM_OSCILLATOR</a></td>
<td>PERIOD</td>
<td>PERIOD</td>
<td align="center">PERIOD - 1</td>
</tr>
</tbody>
</table>

<p><em><strong>Kaufman Algorithm Default Hold Periods:</strong></em></p>

<table>
<thead>
<tr>
<th>Algorithm</th>
<th>Default Hold Period</th>
</tr>
</thead>

<tbody>
<tr>
<td><a href="index.html#kaufmans-efficiency-ratio">KAUFMANS_EFFICIENCY_RATIO()</a></td>
<td>PERIOD</td>
</tr>

<tr>
<td><a href="index.html#kaufmans-adaptive-moving-average">KAUFMANS_ADAPTIVE_MOVING_AVERAGE()</a></td>
<td>PERIOD</td>
</tr>
</tbody>
</table>

<h4 id="warmup-type"><code>WARMUP_TYPE</code></h4>

<p><strong>default=&lsquo;exponential&rsquo;</strong></p>

<p>This controls how the algorithm initializes itself for the first <code>PERIOD</code> samples.
It is essentially the duration for which it has an incomplete sample set.</p>

<p><code>simple</code><br/>
Simple moving average (SMA) of the first <code>PERIOD</code> samples.
This is the method used by <a href="https://www.ta-lib.org/">ta-lib</a>.</p>

<p><code>exponential</code><br/>
Exponential moving average (EMA) with scaling alpha (&alpha;).
This basically uses an EMA with <code>PERIOD=1</code> for the first point, <code>PERIOD=2</code>
for the second point, etc., until algorithm has consumed <code>PERIOD</code> number of points.
As the algorithm immediately starts using an EMA, when this method is used and
<code>HOLD_PERIOD</code> is unspecified or <code>-1</code>, the algorithm may start emitting points
after a much smaller sample size than with <code>simple</code>.</p>

<p><code>none</code><br/>
The algorithm does not perform any smoothing at all.
This is the method used by <a href="https://www.ta-lib.org/">ta-lib</a>.
When this method is used and <code>HOLD_PERIOD</code> is unspecified, <code>HOLD_PERIOD</code>
defaults to <code>PERIOD - 1</code>.</p>

<blockquote>
<p>The <code>none</code> warmup type is only available with the
<a href="index.html#chande-momentum-oscillator"><code>CHANDE_MOMENTUM_OSCILLATOR()</code></a> function.</p>
</blockquote>

<a class="dashingAutolink" name="autolink-48"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/CHANDE_MOMENTUM_OSCILLATOR%28%29"></a><h3 id="chande-momentum-oscillator">CHANDE_MOMENTUM_OSCILLATOR()</h3>

<p>The Chande Momentum Oscillator (CMO) is a technical momentum indicator developed by Tushar Chande.
The CMO indicator is created by calculating the difference between the sum of all
recent higher data points and the sum of all recent lower data points,
then dividing the result by the sum of all data movement over a given time period.
The result is multiplied by 100 to give the -100 to +100 range.
<sup style="line-height:0; font-size:.7rem; font-style:italic; font-weight:normal;"><a href="https://www.fidelity.com/learning-center/trading-investing/technical-analysis/technical-indicator-guide/cmo" target="\_blank">Source</a></sup></p>

<h4 id="basic-syntax-24">Basic syntax</h4>

<pre><code>CHANDE_MOMENTUM_OSCILLATOR([ * | &lt;field_key&gt; | /regular_expression/ ], &lt;period&gt;[, &lt;hold_period&gt;, [warmup_type]])
</code></pre>

<p><strong>Available Arguments:</strong></p>

<p><a href="index.html#period">period</a><br/>
<a href="index.html#hold-period">hold_period</a> <span style="font-size:.8rem; font-style:italic;">(Optional)</span><br/>
<a href="index.html#warmup-type">warmup_type</a> <span style="font-size:.8rem; font-style:italic;">(Optional)</span></p>

<p><code>CHANDE_MOMENTUM_OSCILLATOR(field_key, 2)</code><br/>
Returns the field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>
processed using the Chande Momentum Oscillator algorithm with a 2-value period
and the default hold period and warmup type.</p>

<p><code>CHANDE_MOMENTUM_OSCILLATOR(field_key, 10, 9, &#39;none&#39;)</code><br/>
Returns the field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>
processed using the Chande Momentum Oscillator algorithm with a 10-value period
a 9-value hold period, and the <code>none</code> warmup type.</p>

<p><code>CHANDE_MOMENTUM_OSCILLATOR(MEAN(&lt;field_key&gt;), 2) ... GROUP BY time(1d)</code><br/>
Returns the mean of field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>
processed using the Chande Momentum Oscillator algorithm with a 2-value period
and the default hold period and warmup type.</p>

<blockquote>
<p><strong>Note:</strong> When aggregating data with a <code>GROUP BY</code> clause, you must include an
<a href="index.html#aggregations">aggregate function</a> in your call to the <code>CHANDE_MOMENTUM_OSCILLATOR()</code> function.</p>
</blockquote>

<p><code>CHANDE_MOMENTUM_OSCILLATOR(/regular_expression/, 2)</code><br/>
Returns the field values associated with each field key that matches the <a href="../data_exploration/index.html#regular-expressions">regular expression</a>
processed using the Chande Momentum Oscillator algorithm with a 2-value period
and the default hold period and warmup type.</p>

<p><code>CHANDE_MOMENTUM_OSCILLATOR(*, 2)</code><br/>
Returns the field values associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a>
processed using the Chande Momentum Oscillator algorithm with a 2-value period
and the default hold period and warmup type.</p>

<p><code>CHANDE_MOMENTUM_OSCILLATOR()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<p>The basic syntax supports <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-tags">group by tags</a> but not <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-time-intervals">group by time</a>.
See the <a href="index.html#advanced-syntax">Advanced Syntax</a> section for how to use <code>CHANDE_MOMENTUM_OSCILLATOR()</code> with a <code>GROUP BY time()</code> clause.</p>

<a class="dashingAutolink" name="autolink-49"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/EXPONENTIAL_MOVING_AVERAGE%28%29"></a><h3 id="exponential-moving-average">EXPONENTIAL_MOVING_AVERAGE()</h3>

<p>An exponential moving average (EMA) is a type of moving average that is similar
to a <a href="index.html#moving-average">simple moving average</a>, except that more weight is given to the latest data.
It&rsquo;s also known as the &ldquo;exponentially weighted moving average.&rdquo;
This type of moving average reacts faster to recent data changes than a simple moving average.</p>

<p><sup style="line-height:0; font-size:.7rem; font-style:italic; font-weight:normal;"><a href="https://www.investopedia.com/terms/e/ema.asp" target="\_blank">Source</a></sup></p>

<h4 id="basic-syntax-25">Basic syntax</h4>

<pre><code>EXPONENTIAL_MOVING_AVERAGE([ * | &lt;field_key&gt; | /regular_expression/ ], &lt;period&gt;[, &lt;hold_period)[, &lt;warmup_type]])
</code></pre>

<p><strong>Available Arguments:</strong></p>

<p><a href="index.html#period">period</a><br/>
<a href="index.html#hold-period">hold_period</a> <span style="font-size:.8rem; font-style:italic;">(Optional)</span><br/>
<a href="index.html#warmup-type">warmup_type</a> <span style="font-size:.8rem; font-style:italic;">(Optional)</span></p>

<p><code>EXPONENTIAL_MOVING_AVERAGE(field_key, 2)</code><br/>
Returns the field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>
processed using the Exponential Moving Average algorithm with a 2-value period
and the default hold period and warmup type.</p>

<p><code>EXPONENTIAL_MOVING_AVERAGE(field_key, 10, 9, &#39;exponential&#39;)</code><br/>
Returns the field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>
processed using the Exponential Moving Average algorithm with a 10-value period
a 9-value hold period, and the <code>exponential</code> warmup type.</p>

<p><code>EXPONENTIAL_MOVING_AVERAGE(MEAN(&lt;field_key&gt;), 2) ... GROUP BY time(1d)</code><br/>
Returns the mean of field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>
processed using the Exponential Moving Average algorithm with a 2-value period
and the default hold period and warmup type.</p>

<blockquote>
<p><strong>Note:</strong> When aggregating data with a <code>GROUP BY</code> clause, you must include an
<a href="index.html#aggregations">aggregate function</a> in your call to the <code>EXPONENTIAL_MOVING_AVERAGE()</code> function.</p>
</blockquote>

<p><code>EXPONENTIAL_MOVING_AVERAGE(/regular_expression/, 2)</code><br/>
Returns the field values associated with each field key that matches the <a href="../data_exploration/index.html#regular-expressions">regular expression</a>
processed using the Exponential Moving Average algorithm with a 2-value period
and the default hold period and warmup type.</p>

<p><code>EXPONENTIAL_MOVING_AVERAGE(*, 2)</code><br/>
Returns the field values associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a>
processed using the Exponential Moving Average algorithm with a 2-value period
and the default hold period and warmup type.</p>

<p><code>EXPONENTIAL_MOVING_AVERAGE()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<p>The basic syntax supports <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-tags">group by tags</a> but not <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-time-intervals">group by time</a>.
See the <a href="index.html#advanced-syntax">Advanced Syntax</a> section for how to use <code>EXPONENTIAL_MOVING_AVERAGE()</code> with a <code>GROUP BY time()</code> clause.</p>

<a class="dashingAutolink" name="autolink-50"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/DOUBLE_EXPONENTIAL_MOVING_AVERAGE%28%29"></a><h3 id="double-exponential-moving-average">DOUBLE_EXPONENTIAL_MOVING_AVERAGE()</h3>

<p>The Double Exponential Moving Average (DEMA) attempts to remove the inherent lag
associated to Moving Averages by placing more weight on recent values.
The name suggests this is achieved by applying a double exponential smoothing which is not the case.
The name double comes from the fact that the value of an <a href="index.html#exponential-moving-average">EMA</a> is doubled.
To keep it in line with the actual data and to remove the lag, the value &ldquo;EMA of EMA&rdquo;
is subtracted from the previously doubled EMA.</p>

<p><sup style="line-height:0; font-size:.7rem; font-style:italic; font-weight:normal;"><a href="https://en.wikipedia.org/wiki/Double_exponential_moving_average" target="\_blank">Source</a></sup></p>

<h4 id="basic-syntax-26">Basic syntax</h4>

<pre><code>DOUBLE_EXPONENTIAL_MOVING_AVERAGE([ * | &lt;field_key&gt; | /regular_expression/ ], &lt;period&gt;[, &lt;hold_period)[, &lt;warmup_type]])
</code></pre>

<p><strong>Available Arguments:</strong></p>

<p><a href="index.html#period">period</a><br/>
<a href="index.html#hold-period">hold_period</a> <span style="font-size:.8rem; font-style:italic;">(Optional)</span><br/>
<a href="index.html#warmup-type">warmup_type</a> <span style="font-size:.8rem; font-style:italic;">(Optional)</span></p>

<p><code>DOUBLE_EXPONENTIAL_MOVING_AVERAGE(field_key, 2)</code><br/>
Returns the field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>
processed using the Double Exponential Moving Average algorithm with a 2-value period
and the default hold period and warmup type.</p>

<p><code>DOUBLE_EXPONENTIAL_MOVING_AVERAGE(field_key, 10, 9, &#39;exponential&#39;)</code><br/>
Returns the field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>
processed using the Double Exponential Moving Average algorithm with a 10-value period
a 9-value hold period, and the <code>exponential</code> warmup type.</p>

<p><code>DOUBLE_EXPONENTIAL_MOVING_AVERAGE(MEAN(&lt;field_key&gt;), 2) ... GROUP BY time(1d)</code><br/>
Returns the mean of field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>
processed using the Double Exponential Moving Average algorithm with a 2-value period
and the default hold period and warmup type.</p>

<blockquote>
<p><strong>Note:</strong> When aggregating data with a <code>GROUP BY</code> clause, you must include an
<a href="index.html#aggregations">aggregate function</a> in your call to the <code>DOUBLE_EXPONENTIAL_MOVING_AVERAGE()</code> function.</p>
</blockquote>

<p><code>DOUBLE_EXPONENTIAL_MOVING_AVERAGE(/regular_expression/, 2)</code><br/>
Returns the field values associated with each field key that matches the <a href="../data_exploration/index.html#regular-expressions">regular expression</a>
processed using the Double Exponential Moving Average algorithm with a 2-value period
and the default hold period and warmup type.</p>

<p><code>DOUBLE_EXPONENTIAL_MOVING_AVERAGE(*, 2)</code><br/>
Returns the field values associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a>
processed using the Double Exponential Moving Average algorithm with a 2-value period
and the default hold period and warmup type.</p>

<p><code>DOUBLE_EXPONENTIAL_MOVING_AVERAGE()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<p>The basic syntax supports <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-tags">group by tags</a> but not <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-time-intervals">group by time</a>.
See the <a href="index.html#advanced-syntax">Advanced Syntax</a> section for how to use <code>DOUBLE_EXPONENTIAL_MOVING_AVERAGE()</code> with a <code>GROUP BY time()</code> clause.</p>

<a class="dashingAutolink" name="autolink-51"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/KAUFMANS_EFFICIENCY_RATIO%28%29"></a><h3 id="kaufmans-efficiency-ratio">KAUFMANS_EFFICIENCY_RATIO()</h3>

<p>Kaufman&rsquo;s Efficiency Ration, or simply &ldquo;Efficiency Ratio&rdquo; (ER), is calculated by
dividing the data change over a period by the absolute sum of the data movements
that occurred to achieve that change.
The resulting ratio ranges between 0 and 1 with higher values representing a
more efficient or trending market.</p>

<p>The ER is very similar to the <a href="index.html#chande-momentum-oscillator">Chande Momentum Oscillator</a> (CMO).
The difference is that the CMO takes market direction into account, but if you take the absolute CMO and divide by 100, you you get the Efficiency Ratio.</p>

<p><sup style="line-height:0; font-size:.7rem; font-style:italic; font-weight:normal;"><a href="http://etfhq.com/blog/2011/02/07/kaufmans-efficiency-ratio/" target="\_blank">Source</a></sup></p>

<h4 id="basic-syntax-27">Basic syntax</h4>

<pre><code>KAUFMANS_EFFICIENCY_RATIO([ * | &lt;field_key&gt; | /regular_expression/ ], &lt;period&gt;[, &lt;hold_period&gt;])
</code></pre>

<p><strong>Available Arguments:</strong></p>

<p><a href="index.html#period">period</a><br/>
<a href="index.html#hold-period">hold_period</a> <span style="font-size:.8rem; font-style:italic;">(Optional)</span></p>

<p><code>KAUFMANS_EFFICIENCY_RATIO(field_key, 2)</code><br/>
Returns the field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>
processed using the Efficiency Index algorithm with a 2-value period
and the default hold period and warmup type.</p>

<p><code>KAUFMANS_EFFICIENCY_RATIO(field_key, 10, 10)</code><br/>
Returns the field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>
processed using the Efficiency Index algorithm with a 10-value period and
a 10-value hold period.</p>

<p><code>KAUFMANS_EFFICIENCY_RATIO(MEAN(&lt;field_key&gt;), 2) ... GROUP BY time(1d)</code><br/>
Returns the mean of field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>
processed using the Efficiency Index algorithm with a 2-value period
and the default hold period.</p>

<blockquote>
<p><strong>Note:</strong> When aggregating data with a <code>GROUP BY</code> clause, you must include an
<a href="index.html#aggregations">aggregate function</a> in your call to the <code>KAUFMANS_EFFICIENCY_RATIO()</code> function.</p>
</blockquote>

<p><code>KAUFMANS_EFFICIENCY_RATIO(/regular_expression/, 2)</code><br/>
Returns the field values associated with each field key that matches the <a href="../data_exploration/index.html#regular-expressions">regular expression</a>
processed using the Efficiency Index algorithm with a 2-value period
and the default hold period and warmup type.</p>

<p><code>KAUFMANS_EFFICIENCY_RATIO(*, 2)</code><br/>
Returns the field values associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a>
processed using the Efficiency Index algorithm with a 2-value period
and the default hold period and warmup type.</p>

<p><code>KAUFMANS_EFFICIENCY_RATIO()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<p>The basic syntax supports <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-tags">group by tags</a> but not <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-time-intervals">group by time</a>.
See the <a href="index.html#advanced-syntax">Advanced Syntax</a> section for how to use <code>KAUFMANS_EFFICIENCY_RATIO()</code> with a <code>GROUP BY time()</code> clause.</p>

<a class="dashingAutolink" name="autolink-52"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/KAUFMANS_ADAPTIVE_MOVING_AVERAGE%28%29"></a><h3 id="kaufmans-adaptive-moving-average">KAUFMANS_ADAPTIVE_MOVING_AVERAGE()</h3>

<p>Kaufman&rsquo;s Adaptive Moving Average (KAMA) is a moving average designed to
account for sample noise or volatility.
KAMA will closely follow data points when the data swings are relatively small and noise is low.
KAMA will adjust when the data swings widen and follow data from a greater distance.
This trend-following indicator can be used to identify the overall trend,
time turning points and filter data movements.</p>

<p><sup style="line-height:0; font-size:.7rem; font-style:italic; font-weight:normal;"><a href="http://stockcharts.com/school/doku.php?id=chart_school:technical_indicators:kaufman_s_adaptive_moving_average" target="\_blank">Source</a></sup></p>

<h4 id="basic-syntax-28">Basic syntax</h4>

<pre><code>KAUFMANS_ADAPTIVE_MOVING_AVERAGE([ * | &lt;field_key&gt; | /regular_expression/ ], &lt;period&gt;[, &lt;hold_period&gt;])
</code></pre>

<p><strong>Available Arguments:</strong><br/>
<a href="index.html#period">period</a><br/>
<a href="index.html#hold-period">hold_period</a> <span style="font-size:.8rem; font-style:italic;">(Optional)</span></p>

<p><code>KAUFMANS_ADAPTIVE_MOVING_AVERAGE(field_key, 2)</code><br/>
Returns the field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>
processed using the Kaufman Adaptive Moving Average algorithm with a 2-value period
and the default hold period and warmup type.</p>

<p><code>KAUFMANS_ADAPTIVE_MOVING_AVERAGE(field_key, 10, 10)</code><br/>
Returns the field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>
processed using the Kaufman Adaptive Moving Average algorithm with a 10-value period
and a 10-value hold period.</p>

<p><code>KAUFMANS_ADAPTIVE_MOVING_AVERAGE(MEAN(&lt;field_key&gt;), 2) ... GROUP BY time(1d)</code><br/>
Returns the mean of field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>
processed using the Kaufman Adaptive Moving Average algorithm with a 2-value period
and the default hold period.</p>

<blockquote>
<p><strong>Note:</strong> When aggregating data with a <code>GROUP BY</code> clause, you must include an
<a href="index.html#aggregations">aggregate function</a> in your call to the <code>KAUFMANS_ADAPTIVE_MOVING_AVERAGE()</code> function.</p>
</blockquote>

<p><code>KAUFMANS_ADAPTIVE_MOVING_AVERAGE(/regular_expression/, 2)</code><br/>
Returns the field values associated with each field key that matches the <a href="../data_exploration/index.html#regular-expressions">regular expression</a>
processed using the Kaufman Adaptive Moving Average algorithm with a 2-value period
and the default hold period and warmup type.</p>

<p><code>KAUFMANS_ADAPTIVE_MOVING_AVERAGE(*, 2)</code><br/>
Returns the field values associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a>
processed using the Kaufman Adaptive Moving Average algorithm with a 2-value period
and the default hold period and warmup type.</p>

<p><code>KAUFMANS_ADAPTIVE_MOVING_AVERAGE()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<p>The basic syntax supports <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-tags">group by tags</a> but not <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-time-intervals">group by time</a>.
See the <a href="index.html#advanced-syntax">Advanced Syntax</a> section for how to use <code>KAUFMANS_ADAPTIVE_MOVING_AVERAGE()</code> with a <code>GROUP BY time()</code> clause.</p>

<a class="dashingAutolink" name="autolink-53"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/TRIPLE_EXPONENTIAL_MOVING_AVERAGE%28%29"></a><h3 id="triple-exponential-moving-average">TRIPLE_EXPONENTIAL_MOVING_AVERAGE()</h3>

<p>The triple exponential moving average (TEMA) was developed to filter out
volatility from conventional moving averages.
While the name implies that it&rsquo;s a triple exponential smoothing, it&rsquo;s actually a
composite of a <a href="index.html#exponential-moving-average">single exponential moving average</a>,
a <a href="index.html#double-exponential-moving-average">double exponential moving average</a>,
and a triple exponential moving average.</p>

<p><sup style="line-height:0; font-size:.7rem; font-style:italic; font-weight:normal;"><a href="https://www.investopedia.com/terms/t/triple-exponential-moving-average.asp " target="\_blank">Source</a></sup></p>

<h4 id="basic-syntax-29">Basic syntax</h4>

<pre><code>TRIPLE_EXPONENTIAL_MOVING_AVERAGE([ * | &lt;field_key&gt; | /regular_expression/ ], &lt;period&gt;[, &lt;hold_period)[, &lt;warmup_type]])
</code></pre>

<p><strong>Available Arguments:</strong></p>

<p><a href="index.html#period">period</a><br/>
<a href="index.html#hold-period">hold_period</a> <span style="font-size:.8rem; font-style:italic;">(Optional)</span><br/>
<a href="index.html#warmup-type">warmup_type</a> <span style="font-size:.8rem; font-style:italic;">(Optional)</span></p>

<p><code>TRIPLE_EXPONENTIAL_MOVING_AVERAGE(field_key, 2)</code><br/>
Returns the field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>
processed using the Triple Exponential Moving Average algorithm with a 2-value period
and the default hold period and warmup type.</p>

<p><code>TRIPLE_EXPONENTIAL_MOVING_AVERAGE(field_key, 10, 9, &#39;exponential&#39;)</code><br/>
Returns the field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>
processed using the Triple Exponential Moving Average algorithm with a 10-value period
a 9-value hold period, and the <code>exponential</code> warmup type.</p>

<p><code>TRIPLE_EXPONENTIAL_MOVING_AVERAGE(MEAN(&lt;field_key&gt;), 2) ... GROUP BY time(1d)</code><br/>
Returns the mean of field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>
processed using the Triple Exponential Moving Average algorithm with a 2-value period
and the default hold period and warmup type.</p>

<blockquote>
<p><strong>Note:</strong> When aggregating data with a <code>GROUP BY</code> clause, you must include an
<a href="index.html#aggregations">aggregate function</a> in your call to the <code>TRIPLE_EXPONENTIAL_MOVING_AVERAGE()</code> function.</p>
</blockquote>

<p><code>TRIPLE_EXPONENTIAL_MOVING_AVERAGE(/regular_expression/, 2)</code><br/>
Returns the field values associated with each field key that matches the <a href="../data_exploration/index.html#regular-expressions">regular expression</a>
processed using the Triple Exponential Moving Average algorithm with a 2-value period
and the default hold period and warmup type.</p>

<p><code>TRIPLE_EXPONENTIAL_MOVING_AVERAGE(*, 2)</code><br/>
Returns the field values associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a>
processed using the Triple Exponential Moving Average algorithm with a 2-value period
and the default hold period and warmup type.</p>

<p><code>TRIPLE_EXPONENTIAL_MOVING_AVERAGE()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<p>The basic syntax supports <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-tags">group by tags</a> but not <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-time-intervals">group by time</a>.
See the <a href="index.html#advanced-syntax">Advanced Syntax</a> section for how to use <code>TRIPLE_EXPONENTIAL_MOVING_AVERAGE()</code> with a <code>GROUP BY time()</code> clause.</p>

<a class="dashingAutolink" name="autolink-54"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/TRIPLE_EXPONENTIAL_DERIVATIVE%28%29"></a><h3 id="triple-exponential-derivative">TRIPLE_EXPONENTIAL_DERIVATIVE()</h3>

<p>The triple exponential derivative indicator, commonly referred to as &ldquo;TRIX,&rdquo; is
an oscillator used to identify oversold and overbought markets, and can also be
used as a momentum indicator.
TRIX calculates a <a href="index.html#triple-exponential-moving-average">triple exponential moving average</a>
of the <a href="index.html#log">log</a> of the data input over the period of time.
The previous value is subtracted from the previous value.
This prevents cycles that are shorter than the defined period from being considered by the indicator.</p>

<p>Like many oscillators, TRIX oscillates around a zero line. When used as an oscillator,
a positive value indicates an overbought market while a negative value indicates an oversold market.
When used as a momentum indicator, a positive value suggests momentum is increasing
while a negative value suggests momentum is decreasing.
Many analysts believe that when the TRIX crosses above the zero line it gives a
buy signal, and when it closes below the zero line, it gives a sell signal.</p>

<p><sup style="line-height:0; font-size:.7rem; font-style:italic; font-weight:normal;"><a href="https://www.investopedia.com/articles/technical/02/092402.asp " target="\_blank">Source</a></sup></p>

<h4 id="basic-syntax-30">Basic syntax</h4>

<pre><code>TRIPLE_EXPONENTIAL_DERIVATIVE([ * | &lt;field_key&gt; | /regular_expression/ ], &lt;period&gt;[, &lt;hold_period)[, &lt;warmup_type]])
</code></pre>

<p><strong>Available Arguments:</strong></p>

<p><a href="index.html#period">period</a><br/>
<a href="index.html#hold-period">hold_period</a> <span style="font-size:.8rem; font-style:italic;">(Optional)</span><br/>
<a href="index.html#warmup-type">warmup_type</a> <span style="font-size:.8rem; font-style:italic;">(Optional)</span></p>

<p><code>TRIPLE_EXPONENTIAL_DERIVATIVE(field_key, 2)</code><br/>
Returns the field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>
processed using the Triple Exponential Derivative algorithm with a 2-value period
and the default hold period and warmup type.</p>

<p><code>TRIPLE_EXPONENTIAL_DERIVATIVE(field_key, 10, 10, &#39;exponential&#39;)</code><br/>
Returns the field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>
processed using the Triple Exponential Derivative algorithm with a 10-value period,
a 10-value hold period, and the <code>exponential</code> warmup type.</p>

<p><code>TRIPLE_EXPONENTIAL_DERIVATIVE(MEAN(&lt;field_key&gt;), 2) ... GROUP BY time(1d)</code><br/>
Returns the mean of field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>
processed using the Triple Exponential Derivative algorithm with a 2-value period
and the default hold period and warmup type.</p>

<blockquote>
<p><strong>Note:</strong> When aggregating data with a <code>GROUP BY</code> clause, you must include an
<a href="index.html#aggregations">aggregate function</a> in your call to the <code>TRIPLE_EXPONENTIAL_DERIVATIVE()</code> function.</p>
</blockquote>

<p><code>TRIPLE_EXPONENTIAL_DERIVATIVE(/regular_expression/, 2)</code><br/>
Returns the field values associated with each field key that matches the <a href="../data_exploration/index.html#regular-expressions">regular expression</a>
processed using the Triple Exponential Derivative algorithm with a 2-value period
and the default hold period and warmup type.</p>

<p><code>TRIPLE_EXPONENTIAL_DERIVATIVE(*, 2)</code><br/>
Returns the field values associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a>
processed using the Triple Exponential Derivative algorithm with a 2-value period
and the default hold period and warmup type.</p>

<p><code>TRIPLE_EXPONENTIAL_DERIVATIVE()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<p>The basic syntax supports <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-tags">group by tags</a> but not <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-time-intervals">group by time</a>.
See the <a href="index.html#advanced-syntax">Advanced Syntax</a> section for how to use <code>TRIPLE_EXPONENTIAL_DERIVATIVE()</code> with a <code>GROUP BY time()</code> clause.</p>

<a class="dashingAutolink" name="autolink-55"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/RELATIVE_STRENGTH_INDEX%28%29"></a><h3 id="relative-strength-index">RELATIVE_STRENGTH_INDEX()</h3>

<p>The relative strength index (RSI) is a momentum indicator that compares the magnitude of recent increases and decreases over a specified time period to measure speed and change of data movements.</p>

<p><sup style="line-height:0; font-size:.7rem; font-style:italic; font-weight:normal;"><a href="https://www.investopedia.com/terms/r/rsi.asp" target="\_blank">Source</a></sup></p>

<h4 id="basic-syntax-31">Basic syntax</h4>

<pre><code>RELATIVE_STRENGTH_INDEX([ * | &lt;field_key&gt; | /regular_expression/ ], &lt;period&gt;[, &lt;hold_period)[, &lt;warmup_type]])
</code></pre>

<p><strong>Available Arguments:</strong></p>

<p><a href="index.html#period">period</a><br/>
<a href="index.html#hold-period">hold_period</a> <span style="font-size:.8rem; font-style:italic;">(Optional)</span><br/>
<a href="index.html#warmup-type">warmup_type</a> <span style="font-size:.8rem; font-style:italic;">(Optional)</span></p>

<p><code>RELATIVE_STRENGTH_INDEX(field_key, 2)</code><br/>
Returns the field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>
processed using the Relative Strength Index algorithm with a 2-value period
and the default hold period and warmup type.</p>

<p><code>RELATIVE_STRENGTH_INDEX(field_key, 10, 10, &#39;exponential&#39;)</code><br/>
Returns the field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>
processed using the Relative Strength Index algorithm with a 10-value period,
a 10-value hold period, and the <code>exponential</code> warmup type.</p>

<p><code>RELATIVE_STRENGTH_INDEX(MEAN(&lt;field_key&gt;), 2) ... GROUP BY time(1d)</code><br/>
Returns the mean of field values associated with the <a href="../../concepts/glossary/index.html#field-key">field key</a>
processed using the Relative Strength Index algorithm with a 2-value period
and the default hold period and warmup type.</p>

<blockquote>
<p><strong>Note:</strong> When aggregating data with a <code>GROUP BY</code> clause, you must include an
<a href="index.html#aggregations">aggregate function</a> in your call to the <code>RELATIVE_STRENGTH_INDEX()</code> function.</p>
</blockquote>

<p><code>RELATIVE_STRENGTH_INDEX(/regular_expression/, 2)</code><br/>
Returns the field values associated with each field key that matches the <a href="../data_exploration/index.html#regular-expressions">regular expression</a>
processed using the Relative Strength Index algorithm with a 2-value period
and the default hold period and warmup type.</p>

<p><code>RELATIVE_STRENGTH_INDEX(*, 2)</code><br/>
Returns the field values associated with each field key in the <a href="../../concepts/glossary/index.html#measurement">measurement</a>
processed using the Relative Strength Index algorithm with a 2-value period
and the default hold period and warmup type.</p>

<p><code>RELATIVE_STRENGTH_INDEX()</code> supports int64 and float64 field value <a href="../../write_protocols/line_protocol_reference/index.html#data-types">data types</a>.</p>

<p>The basic syntax supports <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-tags">group by tags</a> but not <code>GROUP BY</code> clauses that <a href="../data_exploration/index.html#group-by-time-intervals">group by time</a>.
See the <a href="index.html#advanced-syntax">Advanced Syntax</a> section for how to use <code>RELATIVE_STRENGTH_INDEX()</code> with a <code>GROUP BY time()</code> clause.</p>

<h2 id="other">Other</h2>

<a class="dashingAutolink" name="autolink-56"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/Sample%20Data"></a><h3 id="sample-data">Sample Data</h3>

<p>The data used in this document are available for download on the <a href="../data_download/index.html">Sample Data</a> page.</p>

<a class="dashingAutolink" name="autolink-57"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/General%20Syntax%20for%20Functions"></a><h3 id="general-syntax-for-functions">General Syntax for Functions</h3>

<h4 id="specify-multiple-functions-in-the-select-clause">Specify Multiple Functions in the SELECT Clause</h4>

<h5 id="syntax-19">Syntax</h5>

<pre><code>SELECT &lt;function&gt;(),&lt;function&gt;() FROM_clause [...]
</code></pre>

<p>Separate multiple functions in one <code>SELECT</code> statement with a comma (<code>,</code>).
The syntax applies to all InfluxQL functions except <a href="index.html#top"><code>TOP()</code></a> and <a href="index.html#bottom"><code>BOTTOM()</code></a>.
The <code>SELECT</code> clause does not support specifying <code>TOP()</code> or <code>BOTTOM()</code> with another function.</p>

<h5 id="examples-66">Examples</h5>

<h6 id="calculate-the-mean-and-median-field-values-in-one-query">Calculate the mean and median field values in one query</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">),</span><span class="n">MEDIAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">mean</span>               <span class="n">median</span>
<span class="c1">----                  ----               ------
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">4</span><span class="p">.</span><span class="mi">442107025822522</span>  <span class="mi">4</span><span class="p">.</span><span class="mi">124</span></code></pre></div>
<p>The query returns the <a href="index.html#mean">average</a> and <a href="index.html#median">median</a> field values in the <code>water_level</code> field key.</p>

<h6 id="calculate-the-mode-of-two-fields-in-one-query">Calculate the mode of two fields in one query</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">MODE</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">),</span><span class="k">MODE</span><span class="p">(</span><span class="s2">&#34;level description&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="k">mode</span>  <span class="n">mode_1</span>
<span class="c1">----                  ----  ------
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">2</span><span class="p">.</span><span class="mi">69</span>  <span class="k">between</span> <span class="mi">3</span> <span class="k">and</span> <span class="mi">6</span> <span class="n">feet</span></code></pre></div>
<p>The query returns the <a href="index.html#mode">mode</a> field values for the <code>water_level</code> field key and for the <code>level description</code> field key.
The <code>water_level</code> mode is in the <code>mode</code> column and the <code>level description</code> mode is in the <code>mode_1</code> column.
The system can&rsquo;t return more than one column with the same name so it renames the second <code>mode</code> column to <code>mode_1</code>.</p>

<p>See <a href="index.html#rename-the-output-field-key">Rename the Output Field Key</a> for how to configure the output column headers.</p>

<h6 id="calculate-the-minimum-and-maximum-field-values-in-one-query">Calculate the minimum and maximum field values in one query</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">MIN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">),</span> <span class="k">MAX</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="p">[...]</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="k">min</span>    <span class="k">max</span>
<span class="c1">----                  ---    ---
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">61</span>  <span class="mi">9</span><span class="p">.</span><span class="mi">964</span></code></pre></div>
<p>The query returns the <a href="index.html#min">minimum</a> and <a href="index.html#max">maximum</a> field values in the <code>water_level</code> field key.</p>

<p>Notice that the query returns <code>1970-01-01T00:00:00Z</code>, the InfluxDB equivalent to a null timestamp, as the timestamp value.
<code>MIN()</code> and <code>MAX()</code> are <a href="index.html#selectors">selector</a> functions; when a selector function is the only function in the <code>SELECT</code> clause, it returns a specific timestamp.
Because <code>MIN()</code> and <code>MAX()</code> return two different timestamps (see below), the system overrides those timestamps with the null timestamp equivalent.</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span>  <span class="k">SELECT</span> <span class="k">MIN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="k">min</span>
<span class="c1">----                  ---
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">29</span><span class="n">T14</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">61</span>    <span class="o">&lt;</span><span class="c1">--- Timestamp 1
</span><span class="c1"></span>
<span class="o">&gt;</span>  <span class="k">SELECT</span> <span class="k">MAX</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="k">max</span>
<span class="c1">----                  ---
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">29</span><span class="n">T07</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">9</span><span class="p">.</span><span class="mi">964</span>    <span class="o">&lt;</span><span class="c1">--- Timestamp 2</span></code></pre></div>
<h4 id="rename-the-output-field-key">Rename the Output Field Key</h4>

<h5 id="syntax-20">Syntax</h5>

<pre><code>SELECT &lt;function&gt;() AS &lt;field_key&gt; [...]
</code></pre>

<p>By default, functions return results under a field key that matches the function name.
Include an <code>AS</code> clause to specify the name of the output field key.</p>

<h5 id="examples-67">Examples</h5>

<h6 id="specify-the-output-field-key">Specify the output field key</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">AS</span> <span class="s2">&#34;dream_name&#34;</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">dream_name</span>
<span class="c1">----                  ----------
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">4</span><span class="p">.</span><span class="mi">442107025822522</span></code></pre></div>
<p>The query returns the <a href="index.html#mean">average</a> field value of the <code>water_level</code> field key and renames the output field key to <code>dream_name</code>.
Without the <code>AS</code> clause, the  query returns <code>mean</code> as the output field key:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">MEAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">mean</span>
<span class="c1">----                  ----
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">4</span><span class="p">.</span><span class="mi">442107025822522</span></code></pre></div>
<h6 id="specify-the-output-field-key-for-multiple-functions">Specify the output field key for multiple functions</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">MEDIAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">AS</span> <span class="s2">&#34;med_wat&#34;</span><span class="p">,</span><span class="k">MODE</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">AS</span> <span class="s2">&#34;mode_wat&#34;</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">med_wat</span>  <span class="n">mode_wat</span>
<span class="c1">----                  -------  --------
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">4</span><span class="p">.</span><span class="mi">124</span>    <span class="mi">2</span><span class="p">.</span><span class="mi">69</span></code></pre></div>
<p>The query returns the <a href="index.html#median">median</a> and <a href="index.html#mode">mode</a> field values for the <code>water_level</code> field key and renames the output field keys to <code>med_wat</code> and <code>mode_wat</code>.
Without the <code>AS</code> clauses, the  query returns <code>median</code> and <code>mode</code> as the output field keys:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">MEDIAN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">),</span><span class="k">MODE</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">median</span>  <span class="k">mode</span>
<span class="c1">----                  ------  ----
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">4</span><span class="p">.</span><span class="mi">124</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">69</span></code></pre></div>
<h4 id="change-the-values-reported-for-intervals-with-no-data">Change the Values Reported for Intervals with no Data</h4>

<p>By default, queries with an InfluxQL function and a <a href="../data_exploration/index.html#group-by-time-intervals"><code>GROUP BY time()</code> clause</a> report null values for intervals with no data.
Include <code>fill()</code> at the end of the <code>GROUP BY</code> clause to change that value.
See <a href="../data_exploration/index.html#group-by-time-intervals-and-fill">Data Exploration</a> for a complete discussion of <code>fill()</code>.</p>

<a class="dashingAutolink" name="autolink-58"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/Common%20Issues%20with%20Functions"></a><h3 id="common-issues-with-functions">Common Issues with Functions</h3>

<p>The following sections describe frequent sources of confusion with all functions, aggregation functions, and selector functions.
See the function-specific documentation for common issues with individual functions:</p>

<ul>
<li><a href="index.html#common-issues-with-distinct">DISTINCT()</a></li>
<li><a href="index.html#common-issues-with-bottom">BOTTOM()</a></li>
<li><a href="index.html#common-issues-with-percentile">PERCENTILE()</a></li>
<li><a href="index.html#common-issues-with-sample">SAMPLE()</a></li>
<li><a href="index.html#common-issues-with-top">TOP()</a></li>
<li><a href="index.html#common-issues-with-elapsed">ELAPSED()</a></li>
<li><a href="index.html#common-issues-with-holt-winters">HOLT_WINTERS()</a></li>
</ul>

<h4 id="all-functions">All Functions</h4>

<h5 id="nesting-functions">Nesting functions</h5>

<p>Some InfluxQL functions support nesting in the <a href="../data_exploration/index.html#select-clause"><code>SELECT</code> clause</a>:</p>

<ul>
<li><a href="index.html#count"><code>COUNT()</code></a> with <a href="index.html#distinct"><code>DISTINCT()</code></a></li>
<li><a href="index.html#cumulative-sum"><code>CUMULATIVE_SUM()</code></a></li>
<li><a href="index.html#derivative"><code>DERIVATIVE()</code></a></li>
<li><a href="index.html#difference"><code>DIFFERENCE()</code></a></li>
<li><a href="index.html#elapsed"><code>ELAPSED()</code></a></li>
<li><a href="index.html#moving-average"><code>MOVING_AVERAGE()</code></a></li>
<li><a href="index.html#non-negative-derivative"><code>NON_NEGATIVE_DERIVATIVE()</code></a></li>
<li><a href="index.html#holt-winters"><code>HOLT_WINTERS()</code></a> and <a href="index.html#holt-winters"><code>HOLT_WINTERS_WITH_FIT()</code></a></li>
</ul>

<p>For other functions, use InfluxQL&rsquo;s <a href="../data_exploration/index.html#subqueries">subqueries</a> to nest functions in the <a href="../data_exploration/index.html#from-clause"><code>FROM</code> clause</a>.
See the <a href="../data_exploration/index.html#subqueries">Data Exploration</a> page more on using subqueries.</p>

<h5 id="querying-time-ranges-after-now">Querying time ranges after now()</h5>

<p>Most <code>SELECT</code> statements have a default time range between <a href="../../troubleshooting/frequently-asked-questions/index.html#what-are-the-minimum-and-maximum-timestamps-that-influxdb-can-store"><code>1677-09-21 00:12:43.145224194</code> and <code>2262-04-11T23:47:16.854775806Z</code> UTC</a>.
For <code>SELECT</code> statements with an InfluxQL function and a <a href="../data_exploration/index.html#group-by-time-intervals"><code>GROUP BY time()</code> clause</a>, the default time
range is between <code>1677-09-21 00:12:43.145224194</code> UTC and <a href="../../concepts/glossary/index.html#now"><code>now()</code></a>.</p>

<p>To query data with timestamps that occur after <code>now()</code>, <code>SELECT</code> statements with
an InfluxQL function and a <code>GROUP BY time()</code> clause must provide an alternative upper bound in the
<a href="../data_exploration/index.html#the-where-clause"><code>WHERE</code> clause</a>.
See the <a href="../../troubleshooting/frequently-asked-questions/index.html#why-don-t-my-group-by-time-queries-return-timestamps-that-occur-after-now">Frequently Asked Questions</a> page for an example.</p>

<h4 id="aggregation-functions">Aggregation Functions</h4>

<h5 id="understanding-the-returned-timestamp">Understanding the returned timestamp</h5>

<p>A query with an <a href="index.html#aggregations">aggregation function</a> and no time range in the <a href="../data_exploration/index.html#the-where-clause"><code>WHERE</code> clause</a> returns epoch 0 (<code>1970-01-01T00:00:00Z</code>) as the timestamp.
InfluxDB uses epoch 0 as the null timestamp equivalent.
A query with an aggregate function that includes a time range in the <code>WHERE</code> clause returns the lower time bound as the timestamp.</p>

<h5 id="examples-68">Examples</h5>

<h6 id="use-an-aggregate-function-without-a-specified-time-range">Use an aggregate function without a specified time range</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">SUM</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                   <span class="k">sum</span>
<span class="c1">----                   ---
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>   <span class="mi">67777</span><span class="p">.</span><span class="mi">66900000004</span></code></pre></div>
<p>The query returns the InfluxDB equivalent of a null timestamp (epoch 0: <code>1970-01-01T00:00:00Z</code>) as the timestamp.
<a href="index.html#sum"><code>SUM()</code></a> aggregates points across several timestamps and has no single timestamp to return.</p>

<h6 id="use-an-aggregate-function-with-a-specified-time-range">Use an aggregate function with a specified time range</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">SUM</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="k">sum</span>
<span class="c1">----                  ---
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">67777</span><span class="p">.</span><span class="mi">66900000004</span></code></pre></div>
<p>The query returns the lower time bound (<code>WHERE time &gt;= &#39;2015-08-18T00:00:00Z&#39;</code>) as the timestamp.</p>

<h6 id="use-an-aggregate-function-with-a-specified-time-range-and-a-group-by-time-clause">Use an aggregate function with a specified time range and a GROUP BY time() clause</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">SUM</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:18:00Z&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="k">sum</span>
<span class="c1">----                  ---
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">20</span><span class="p">.</span><span class="mi">305</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">19</span><span class="p">.</span><span class="mi">802999999999997</span></code></pre></div>
<p>The query returns the lower time bound for each <a href="../data_exploration/index.html#group-by-time-intervals"><code>GROUP BY time()</code></a> interval as the timestamps.</p>

<h6 id="mixing-aggregation-functions-with-non-aggregates">Mixing aggregation functions with non-aggregates</h6>

<p>Aggregation functions do not support specifying standalone <a href="../../concepts/glossary/index.html#field-key">field keys</a> or <a href="../../concepts/glossary/index.html#tag-key">tag keys</a> in the <a href="../data_exploration/index.html#select-clause"><code>SELECT</code> clause</a>.
Aggregation functions return a single calculated value and there is no obvious single value to return for any unaggregated fields or tags.
Including a standalone field key or tag key with an aggregation function in the <code>SELECT</code> clause returns an error:</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">SUM</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">),</span><span class="s2">&#34;location&#34;</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">ERR</span><span class="p">:</span> <span class="n">error</span> <span class="n">parsing</span> <span class="n">query</span><span class="p">:</span> <span class="n">mixing</span> <span class="k">aggregate</span> <span class="k">and</span> <span class="n">non</span><span class="o">-</span><span class="k">aggregate</span> <span class="n">queries</span> <span class="k">is</span> <span class="k">not</span> <span class="n">supported</span></code></pre></div>
<h5 id="getting-slightly-different-results">Getting slightly different results</h5>

<p>For some aggregation functions, executing the same function on the same set of <a href="../../write_protocols/line_protocol_reference/index.html#data-types">float64</a> points may yield slightly different results.
InfluxDB does not sort points before it applies the aggregation function; that behavior can cause small discrepancies in the query results.</p>

<h4 id="selector-functions">Selector Functions</h4>

<h5 id="understanding-the-returned-timestamp-1">Understanding the returned timestamp</h5>

<p>The timestamps returned by <a href="index.html#selectors">selector functions</a> depend on the number of functions in the query and on the other clauses in the query:</p>

<p>A query with a single selector function, a single <a href="../../concepts/glossary/index.html#field-key">field key</a> argument, and no <a href="../data_exploration/index.html#group-by-time-intervals"><code>GROUP BY time()</code> clause</a> returns the timestamp for the point that appears in the raw data.
A query with a single selector function, multiple field key arguments, and no <a href="../data_exploration/index.html#group-by-time-intervals"><code>GROUP BY time()</code> clause</a> returns the timestamp for the point that appears in the raw data or the InfluxDB equivalent of a null timestamp (epoch 0: <code>1970-01-01T00:00:00Z</code>).</p>

<p>A query with more than one function and no time range in the <a href="../data_exploration/index.html#the-where-clause"><code>WHERE</code> clause</a> returns the InfluxDB equivalent of a null timestamp (epoch 0: <code>1970-01-01T00:00:00Z</code>).
A query with more than one function and a time range in the <code>WHERE</code> clause returns the lower time bound as the timestamp.</p>

<p>A query with a selector function and a <code>GROUP BY time()</code> clause returns the lower time bound for each <code>GROUP BY time()</code> interval.
Note that the <code>SAMPLE()</code> function behaves differently from other selector functions when paired with the <code>GROUP BY time()</code> clause.
See <a href="index.html#common-issues-with-sample">Common Issues with <code>SAMPLE()</code></a> for more information.</p>

<h5 id="examples-69">Examples</h5>

<h6 id="use-a-single-selector-function-with-a-single-field-key-and-without-a-specified-time-range">Use a single selector function with a single field key and without a specified time range</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">MAX</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="k">max</span>
<span class="c1">----                  ---
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">29</span><span class="n">T07</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">9</span><span class="p">.</span><span class="mi">964</span>

<span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">MAX</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="k">max</span>
<span class="c1">----                  ---
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">29</span><span class="n">T07</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">9</span><span class="p">.</span><span class="mi">964</span></code></pre></div>
<p>The queries return the timestamp for the <a href="index.html#max">maximum</a> point that appears in the raw data.</p>

<h6 id="use-a-single-selector-function-with-multiple-field-keys-and-without-a-specified-time-range">Use a single selector function with multiple field keys and without a specified time range</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">FIRST</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">first_level</span> <span class="n">description</span>  <span class="n">first_water_level</span>
<span class="c1">----                  -----------------------  -----------------
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="k">between</span> <span class="mi">6</span> <span class="k">and</span> <span class="mi">9</span> <span class="n">feet</span>     <span class="mi">8</span><span class="p">.</span><span class="mi">12</span>

<span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">MAX</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="n">max_water_level</span>
<span class="c1">----                  ---------------
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">29</span><span class="n">T07</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">9</span><span class="p">.</span><span class="mi">964</span></code></pre></div>
<p>The first query returns the InfluxDB equivalent of a null timestamp  (epoch 0: <code>1970-01-01T00:00:00Z</code>) as the timestamp.
<code>FIRST(*)</code> returns two timestamps (one for each field key in the <code>h2o_feet</code> <a href="../../concepts/glossary/index.html#measurement">measurement</a>) so the system overrides those timestamps with the null timestamp equivalent.</p>

<p>The second query returns the timestamp for the maximum point that appears in the raw data.
<code>MAX(*)</code> returns one timestamp (the <code>h2o-feet</code> measurement has only one numerical field) so the system does not overwrite the original timestamp.</p>

<h6 id="use-a-selector-function-with-another-function-and-without-a-specified-time-range">Use a selector function with another function and without a specified time range</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">MAX</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">),</span><span class="k">MIN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="k">max</span>    <span class="k">min</span>
<span class="c1">----                  ---    ---
</span><span class="c1"></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">9</span><span class="p">.</span><span class="mi">964</span>  <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">61</span></code></pre></div>
<p>The query returns the InfluxDB equivalent of a null timestamp (epoch 0: <code>1970-01-01T00:00:00Z</code>) as the timestamp.
The <code>MAX()</code> and <a href="index.html#min"><code>MIN()</code></a> functions return different timestamps so the system has no single timestamp to return.</p>

<h6 id="use-a-selector-function-with-another-function-and-with-a-specified-time-range">Use a selector function with another function and with a specified time range</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">MAX</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">),</span><span class="k">MIN</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="k">max</span>    <span class="k">min</span>
<span class="c1">----                  ---    ---
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">9</span><span class="p">.</span><span class="mi">964</span>  <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">61</span></code></pre></div>
<p>The query returns the lower time bound (<code>WHERE time &gt;= &#39;2015-08-18T00:00:00Z&#39;</code>) as the timestamp.</p>

<h6 id="use-a-selector-function-with-a-group-by-time-clause">Use a selector function with a GROUP BY time() clause</h6>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">MAX</span><span class="p">(</span><span class="s2">&#34;water_level&#34;</span><span class="p">)</span> <span class="k">FROM</span> <span class="s2">&#34;h2o_feet&#34;</span> <span class="k">WHERE</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-08-18T00:00:00Z&#39;</span> <span class="k">AND</span> <span class="n">time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-08-18T00:18:00Z&#39;</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="n">m</span><span class="p">)</span>

<span class="n">name</span><span class="p">:</span> <span class="n">h2o_feet</span>
<span class="n">time</span>                  <span class="k">max</span>
<span class="c1">----                  ---
</span><span class="c1"></span><span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">8</span><span class="p">.</span><span class="mi">12</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">18</span><span class="n">T00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span>  <span class="mi">7</span><span class="p">.</span><span class="mi">887</span></code></pre></div>
<p>The query returns the lower time bound for each <code>GROUP BY time()</code> interval as the timestamp.</p>

		</div>
	</section>
	
<section class="article-section article-footer">
	<div class="article-content">
		<p><span class="icon logo" style="margin-right: 1em;"></span> This documentation is <a href="https://github.com/influxdata/docs.influxdata.com/blob/master/content/influxdb/v1.7/query_language/functions.md">open source</a>. See a typo? Please, open an <a href="https://github.com/influxdata/docs.influxdata.com/issues/new">issue</a>.</p>
		<br/>
		<p><span class="icon bubbles2" style="margin-right: 1em;"></span><strong>Need help getting up and running?</strong> <a href="https://www.influxdata.com/products/services/" target="_blank">Get Support</a></p>
	</div>
</section>


</article>
<script>window.jQuery || document.write('<script src="../../../../js/vendor/jquery-2.1.4.min.js"><\/script>')</script>

<script src="../../../../js/docs-interactions.js" type="text/javascript"></script>
<script>
  $("h2, h3, h4").each(function() {
  var link = "<a href="https://docs.influxdata.com/influxdb/v1.7/query_language/functions/\&quot;#"" + $(this).attr("id") + "\"></a>"
  $(this).wrapInner( link );
  })
</script>
<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-45024174-5', 'auto');ga('send', 'pageview');</script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript">
  docsearch({
    apiKey: 'ba4435a9d456ac0d954cc276206eac06',
    appId: 'WHM9UWMP6M',
    indexName: 'influxdata',
    inputSelector: '#algolia-search-input',
    algoliaOptions: {
      hitsPerPage: 15,
      facets: [ "project", "version", "latest"],
      facetFilters: [ "latest:true" ]
    }
  });
</script>



<div class="modal-overlay"></div>
<div id="chronograf-url-modal" class="modal-content">
    <label>Chronograf Data Explorer URL</label>
    <form class="flex-form" id="save-chronograf-url">
        <input type="text" id="chronograf-url" name="chronograf-url"/>
        <button class="save-btn"><span>Save</span></button>
    </form>
    <a id="default-chronograf-url">Revert to Default</a>
</div>

</body></html>