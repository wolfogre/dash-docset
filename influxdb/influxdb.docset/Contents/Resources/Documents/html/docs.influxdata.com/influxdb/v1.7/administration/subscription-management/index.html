<!DOCTYPE html><html lang="en"><head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <title> Manage subscriptions in InfluxDB | InfluxData Documentation</title>
    <meta name="description" content="InfluxDB uses subscriptions to copy all written data to a local or remote endpoint. This article walks through how InfluxDB subscriptions work, how to configure them, and how to manage them.. "/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
    <link rel="shortcut icon" href="../../../../img/favicon.ico" type="image/x-icon"/>

    
    
    
    
    <meta name="docsearch:latest" content="true"/>
    
    

    
    <meta name="robots" content="index, follow"/>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/>
    <link rel="stylesheet" title="dark-theme" href="../../../../css/docs-default.css"/>
    <link rel="alternate stylesheet" title="light-theme" href="https://docs.influxdata.com/css/docs-light.css"/>

    <link href="https://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,500,400italic,500italic,700,700italic,900,900italic" rel="stylesheet" type="text/css"/>

    <meta name="application-name" content="InfluxData"/>
    <meta name="msapplication-TileColor" content=""/>

    <meta name="msapplication-TileImage" content="https://docs.influxdata.com/img/influx-logo-cubo-dark.png"/>

    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:site" content="@influxdb"/>
    <meta name="twitter:title" content=" Manage subscriptions in InfluxDB | InfluxData Documentation"/>
    <meta name="twitter:description" content="InfluxDB uses subscriptions to copy all written data to a local or remote endpoint. This article walks through how InfluxDB subscriptions work, how to configure them, and how to manage them.. "/>

    <meta name="twitter:image" content="https://docs.influxdata.com/img/influx-logo-cubo-dark.png"/>

    <meta property="fb:app_id" content="222112578359661"/>
    <meta property="og:title" content=" Manage subscriptions in InfluxDB | InfluxData Documentation"/>
    <meta property="og:description" content="InfluxDB uses subscriptions to copy all written data to a local or remote endpoint. This article walks through how InfluxDB subscriptions work, how to configure them, and how to manage them.. "/>
    <meta property="og:url" content="https://docs.influxdata.com/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://www.influxdata.com/wp-content/uploads/Simple-Kubo.jpg"/>
    <meta property="og:image:width" content="555px"/>
    <meta property="og:image:height" content="290px"/>

    <meta name="Copyright" content="InfluxData Inc."/>

    
    <script type="text/javascript" src="https://script.crazyegg.com/pages/scripts/0080/4231.js" async="async"></script>

    <script src="../../../../js/vendor/js.cookie.js" type="text/javascript"></script>
    <script src="../../../../js/docs-themes.js" type="text/javascript"></script>
    <script src="../../../../js/docs-chronograf-url.js" type="text/javascript"></script>
    <script type="text/javascript">
        set_style_from_cookie();

    </script>
</head>

<body class="docs-theme--influxdb">
    
    <script>
        (function (w, d, s, l, i) {
            w[l] = w[l] || [];
            w[l].push({
                'gtm.start': new Date().getTime(),
                event: 'gtm.js'
            });
            var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s),
                dl = l != 'dataLayer' ? '&l=' + l : '';
            j.async = true;
            j.src =
                'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
            f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-WXRH9C');

    </script>
    
    <nav class="navbar" id="main-nav">
    <div class="navbar--logo">
      <a href="https://www.influxdata.com/" target="_blank" title="Go to InfluxData">
        <span class="icon logo"></span>
        <span class="icon logotype"></span>
      </a>
      <span class="divider"></span>
      <a href="https://docs.influxdata.com/" class="navbar--docs klavika-font" title="Go to Documentation Homepage">Docs</a>
    </div>
    

<div class="navbar--hamburger" id="navbar--hamburger">
    <div class="navbar--hamburger-bar top"></div>
    <div class="navbar--hamburger-bar middle"></div>
    <div class="navbar--hamburger-bar bottom"></div>
</div>
<div class="navbar--product-dropdown" id="navbar--dropdown">
    <div class="navbar--current-product">
      
      
        
        
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
      
        
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
          InfluxDB v1.7
        
      
      
        
        
      
        
      
        
      
        
      
        
      
        
      
        
      
      
        
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
      
        
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
      
        
        
      
        
      
        
      
      
        
        
      
        
      
        
      
        
      
        
      
      
      
    </div>
    <div class="navbar--product-dropdown-caret"><span class="icon arrow-down"></span></div>
</div>
<div class="navbar--product-container" id="navbar--product-container">
    <div class="navbar--dropdown-dismiss" id="navbar--dropdown-dismiss"></div>
    <ul class="navbar--product-menu" id="navbar--product-menu">
        
          
            <li><a class="navbar--product" href="https://docs.influxdata.com/telegraf/v1.13/">Telegraf</a></li>
          
        
          
            <li><a class="navbar--product" href="../../index.html">InfluxDB</a></li>
            <li><a class="navbar--product v2" href="https://v2.docs.influxdata.com" target="_blank">InfluxDB 2.0 <span class="v2-status">beta</span></a></li>
          
        
          
            <li><a class="navbar--product" href="https://docs.influxdata.com/enterprise_influxdb/v1.7/">InfluxDB Enterprise</a></li>
          
        
          
            <li><a class="navbar--product" href="https://docs.influxdata.com/chronograf/v1.7/">Chronograf</a></li>
          
        
          
            <li><a class="navbar--product" href="https://docs.influxdata.com/kapacitor/v1.5/">Kapacitor</a></li>
          
        
          
            <li><a class="navbar--product" href="https://docs.influxdata.com/enterprise_kapacitor/v1.5/">Kapacitor Enterprise</a></li>
          
        
          
            <li><a class="navbar--product" href="https://docs.influxdata.com/flux/v0.50/">Flux</a></li>
          
        
        <li class="navbar--product-divider"></li>
        <li><a class="navbar--product external" href="https://influxdata.com/use-cases/" target="_blank">►&nbsp; See how the TICK Stack is used</a></li>
        <li><a class="navbar--product external" href="https://influxdata.com/pricing/" target="_blank">►&nbsp; Need help using our stack?</a></li>
    </ul>
</div>


    <div class="navbar--search" id="navbar--search">
	
	
	
	
			
				<input class="navbar--search-field" id="algolia-search-input" type="text" accesskey="s" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" dir="auto" placeholder="Search the docs..."/>
			
		
	
	
	
	
	
	
</div>

    <button class="theme-switcher" id="theme-switch-light" onclick="switch_style(&#39;light-theme&#39;);return false;"><span class="icon sun2"></span></button>
<button class="theme-switcher" id="theme-switch-dark" onclick="switch_style(&#39;dark-theme&#39;);return false;"><span class="icon moon"></span></button>


</nav>


<div class="sidebar--toggle" id="sidebar--toggle">InfluxDB Contents</div>
<aside class="sidebar" id="sidebar">
  <section class="sidebar--section">
    <div id="sidebar--ad"></div>

  </section>
  
  
    
      
        <section class="sidebar--section">
          <div class="sidebar--section-title">
            <a class="" href="../../about_the_project/index.html">About the project</a>
          </div>

          
            <ul>
            
              
                <li><a class="sidebar--page" href="../../about_the_project/releasenotes-changelog/index.html">Release notes</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../about_the_project/contributing/index.html">Contributing</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../about_the_project/cla/index.html">Contributor license agreement</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../about_the_project/licenses/index.html">InfluxDB license</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../about_the_project/third-party/index.html">Third party software</a></li>
              
            
            </ul>
          

        </section>
      
        <section class="sidebar--section">
          <div class="sidebar--section-title">
            <a class="" href="../../introduction/index.html">Introduction</a>
          </div>

          
            <ul>
            
              
                <li><a class="sidebar--page" href="../../introduction/downloading/index.html">Downloading</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../introduction/installation/index.html">Installing</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../introduction/getting-started/index.html">Getting started</a></li>
              
            
            </ul>
          

        </section>
      
        <section class="sidebar--section">
          <div class="sidebar--section-title">
            <a class="" href="../../concepts/index.html">Concepts</a>
          </div>

          
            <ul>
            
              
                <li><a class="sidebar--page" href="../../concepts/key_concepts/index.html">Key concepts</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../concepts/glossary/index.html">Glossary</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../concepts/crosswalk/index.html">Comparing InfluxDB to SQL databases</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../concepts/insights_tradeoffs/index.html">InfluxDB design insights and tradeoffs</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../concepts/schema_and_data_layout/index.html">Schema design and data layout</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../concepts/storage_engine/index.html">In-memory indexing with TSM</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../concepts/time-series-index/index.html">Time Series Index (TSI) overview</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../concepts/tsi-details/index.html">Time Series Index (TSI) details</a></li>
              
            
            </ul>
          

        </section>
      
        <section class="sidebar--section">
          <div class="sidebar--section-title">
            <a class=" active" href="../index.html">Administration</a>
          </div>

          
            <ul>
            
              
                <li><a class="sidebar--page" href="../config/index.html">Configuring InfluxDB</a></li>
              
            
              
                <li><a class="sidebar--page" href="../authentication_and_authorization/index.html">Authentication and authorization</a></li>
              
            
              
                <li><a class="sidebar--page" href="../upgrading/index.html">Upgrading</a></li>
              
            
              
                <li><a class="sidebar--page" href="../https_setup/index.html">Enabling HTTPS</a></li>
              
            
              
                <li><a class="sidebar--page" href="../logs/index.html">Logging and tracing</a></li>
              
            
              
                <li><a class="sidebar--page" href="../ports/index.html">Ports</a></li>
              
            
              
                <li><a class="sidebar--page" href="../backup_and_restore/index.html">Backing up and restoring</a></li>
              
            
              
                <li><a class="sidebar--page" href="../rebuild-tsi-index/index.html">Rebuild the TSI index</a></li>
              
            
              
                <li><a class="sidebar--page" href="../security/index.html">Managing security</a></li>
              
            
              
                <li><a class="sidebar--page" href="../server_monitoring/index.html">Server monitoring</a></li>
              
            
              
                <li><a class="sidebar--page" href="../stability_and_compatibility/index.html">Stability and compatibility</a></li>
              
            
              
                <li><a class="sidebar--page active" href="index.html">Manage subscriptions</a></li>
              
            
            </ul>
          

        </section>
      
        <section class="sidebar--section">
          <div class="sidebar--section-title">
            <a class="" href="../../tools/index.html">Tools</a>
          </div>

          
            <ul>
            
              
                <li><a class="sidebar--page" href="../../tools/shell/index.html">InfluxDB command line interface (CLI/shell)</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../tools/api/index.html">InfluxDB API reference</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../tools/api_client_libraries/index.html">InfluxDB API client libraries</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../tools/influx_inspect/index.html">Influx Inspect disk utility</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../tools/inch/index.html">InfluxDB inch tool</a></li>
              
            
              
                <li><a class="sidebar--page" href="https://grafana.com/docs/grafana/latest/features/datasources/influxdb/">Grafana graphs and dashboards</a></li>
              
            
            </ul>
          

        </section>
      
        <section class="sidebar--section">
          <div class="sidebar--section-title">
            <a class="" href="../../query_language/index.html">Influx Query Language (InfluxQL)</a>
          </div>

          
            <ul>
            
              
                <li><a class="sidebar--page" href="../../query_language/data_download/index.html">Sample data</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../query_language/data_exploration/index.html">Data exploration</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../query_language/schema_exploration/index.html">Schema exploration</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../query_language/database_management/index.html">Data management</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../query_language/continuous_queries/index.html">Continuous Queries</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../query_language/functions/index.html">Functions</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../query_language/math_operators/index.html">Mathematical operators</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../query_language/spec/index.html">InfluxQL reference</a></li>
              
            
            </ul>
          

        </section>
      
        <section class="sidebar--section">
          <div class="sidebar--section-title">
            <a class="" href="../../write_protocols/index.html">Write protocols</a>
          </div>

          
            <ul>
            
              
                <li><a class="sidebar--page" href="../../write_protocols/line_protocol_reference/index.html">InfluxDB line protocol reference</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../write_protocols/line_protocol_tutorial/index.html">InfluxDB line protocol tutorial</a></li>
              
            
            </ul>
          

        </section>
      
        <section class="sidebar--section">
          <div class="sidebar--section-title">
            <a class="" href="../../supported_protocols/index.html">Supported protocols</a>
          </div>

          
            <ul>
            
              
                <li><a class="sidebar--page" href="../../supported_protocols/collectd/index.html">CollectD</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../supported_protocols/graphite/index.html">Graphite</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../supported_protocols/opentsdb/index.html">OpenTSDB</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../supported_protocols/prometheus/index.html">Prometheus</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../supported_protocols/udp/index.html">UDP</a></li>
              
            
            </ul>
          

        </section>
      
        <section class="sidebar--section">
          <div class="sidebar--section-title">
            <a class="" href="../../high_availability/index.html">High availability</a>
          </div>

          
            <ul>
            
              
                <li><a class="sidebar--page" href="../../high_availability/clusters/index.html">Clustering</a></li>
              
            
            </ul>
          

        </section>
      
        <section class="sidebar--section">
          <div class="sidebar--section-title">
            <a class="" href="../../troubleshooting/index.html">Troubleshooting</a>
          </div>

          
            <ul>
            
              
                <li><a class="sidebar--page" href="../../troubleshooting/frequently-asked-questions/index.html">Frequently asked questions (FAQ)</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../troubleshooting/query_management/index.html">Query management</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../troubleshooting/errors/index.html">Error messages</a></li>
              
            
            </ul>
          

        </section>
      
        <section class="sidebar--section">
          <div class="sidebar--section-title">
            <a class="" href="../../additional_resources/additional_resources/index.html">Additional resources</a>
          </div>

          

        </section>
      
        <section class="sidebar--section">
          <div class="sidebar--section-title">
            <a class="" href="index.html">Guides</a>
          </div>

          
            <ul>
            
              
                <li><a class="sidebar--page" href="../../guides/writing_data/index.html">Writing data with the InfluxDB API</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../guides/querying_data/index.html">Querying data with the InfluxDB API</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../guides/downsampling_and_retention/index.html">Downsampling and data retention</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../guides/hardware_sizing/index.html">Hardware sizing guidelines</a></li>
              
            
              
                <li><a class="sidebar--page" href="../../guides/calculating_percentages/index.html">Calculating percentages in a query</a></li>
              
            
            </ul>
          

        </section>
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
  <section class="sidebar--section">
    <div class="sidebar--section-title">
      <a href="https://docs.influxdata.com/influxdb/">InfluxDB versions</a>
    </div>
    <ul>
      
      <li><a class="sidebar--page" href="../../index.html">v1.7</a></li>
      
      <li><a class="sidebar--page" href="https://docs.influxdata.com/influxdb/v1.6/">v1.6</a></li>
      
      <li><a class="sidebar--page" href="https://docs.influxdata.com/influxdb/v1.5/">v1.5</a></li>
      
      <li><a class="sidebar--page" href="https://docs.influxdata.com/influxdb/v1.4/">v1.4</a></li>
      
      <li><a class="sidebar--page" href="https://docs.influxdata.com/influxdb/v1.3/">v1.3</a></li>
      
      <li><a class="sidebar--page" href="https://docs.influxdata.com/influxdb/v1.2/">v1.2</a></li>
      
      <li><a class="sidebar--page" href="https://docs.influxdata.com/influxdb/v1.1/">v1.1</a></li>
      
      <li><a class="sidebar--page" href="https://docs.influxdata.com/influxdb/v1.0/">v1.0</a></li>
      
      <li><a class="sidebar--page" href="https://docs.influxdata.com/influxdb/v0.13/">v0.13</a></li>
      
      <li><a class="sidebar--page" href="https://docs.influxdata.com/influxdb/v0.12/">v0.12</a></li>
      
      <li><a class="sidebar--page" href="https://docs.influxdata.com/influxdb/v0.11/">v0.11</a></li>
      
      <li><a class="sidebar--page" href="https://docs.influxdata.com/influxdb/v0.10/">v0.10</a></li>
      
      <li><a class="sidebar--page" href="https://docs.influxdata.com/influxdb/v0.9/">v0.9</a></li>
      
      <li><a class="sidebar--page" href="https://docs.influxdata.com/influxdb/v0.8/">v0.8</a></li>
      
      <li><a class="sidebar--page" href="https://docs.influxdata.com/influxdb/v0.7/">v0.7</a></li>
      
      <li><a class="sidebar--page" href="https://docs.influxdata.com/influxdb/v0.6/">v0.6</a></li>
      
    </ul>
  </section>
</aside>

<article class="article">
	
	<section class="article-section article-heading">
		<div class="article-content">
			<h1>Manage subscriptions in InfluxDB</h1>
		</div>
	</section>
	
	<section class="article-section">
		<div class="article-content">
			

			

<p>InfluxDB subscriptions are local or remote endpoints to which all data written to InfluxDB is copied.
Subscriptions are primarily used with <a href="https://docs.influxdata.com/kapacitor/">Kapacitor</a>, but any endpoint
able to accept UDP, HTTP, or HTTPS connections can subscribe to InfluxDB and receive
a copy of all data as it is written.</p>

<h2 id="how-subscriptions-work">How subscriptions work</h2>

<p>As data is written to InfluxDB, writes are duplicated to subscriber endpoints via
HTTP, HTTPS, or UDP in <a href="../../write_protocols/line_protocol_tutorial/index.html">line protocol</a>.
the InfluxDB subscriber service creates multiple &ldquo;writers&rdquo; (<a href="https://golangbot.com/goroutines/">goroutines</a>)
which send writes to the subscription endpoints.</p>

<p><em>The number of writer goroutines is defined by the <a href="../config.html#write-concurrency-40"><code>write-concurrency</code></a> configuration.</em></p>

<p>As writes occur in InfluxDB, each subscription writer sends the written data to the
specified subscription endpoints.
However, with a high <code>write-concurrency</code> (multiple writers) and a high ingest rate,
nanosecond differences in writer processes and the transport layer can result
in writes being received out of order.</p>

<blockquote>
<h4 id="important-information-about-high-write-loads">Important information about high write loads</h4>

<p>While setting the subscriber <code>write-concurrency</code> to greater than 1 does increase your
subscriber write throughput, it can result in out-of-order writes under high ingest rates.
Setting <code>write-concurrency</code> to 1 ensures writes are passed to subscriber endpoints sequentially,
but can create a bottleneck under high ingest rates.</p>

<p>What <code>write-concurrency</code> should be set to depends on your specific workload
and need for in-order writes to your subscription endpoint.</p>
</blockquote>

<h2 id="influxql-subscription-statements">InfluxQL subscription statements</h2>

<p>Use the following InfluxQL statements to manage subscriptions:</p>

<p><a href="index.html#create-subscriptions"><code>CREATE SUBSCRIPTION</code></a><br/>
<a href="index.html#show-subscriptions"><code>SHOW SUBSCRIPTIONS</code></a><br/>
<a href="index.html#remove-subscriptions"><code>DROP SUBSCRIPTION</code></a></p>

<h2 id="create-subscriptions">Create subscriptions</h2>

<p>Create subscriptions using the <code>CREATE SUBSCRIPTION</code> InfluxQL statement.
Specify the subscription name, the database name and retention policy to subscribe to,
and the URL of the host to which data written to InfluxDB should be copied.</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="c1">-- Pattern:
</span><span class="c1"></span><span class="k">CREATE</span> <span class="n">SUBSCRIPTION</span> <span class="s2">&#34;&lt;subscription_name&gt;&#34;</span> <span class="k">ON</span> <span class="s2">&#34;&lt;db_name&gt;&#34;</span><span class="p">.</span><span class="s2">&#34;&lt;retention_policy&gt;&#34;</span> <span class="n">DESTINATIONS</span> <span class="o">&lt;</span><span class="k">ALL</span><span class="o">|</span><span class="k">ANY</span><span class="o">&gt;</span> <span class="s2">&#34;&lt;subscription_endpoint_host&gt;&#34;</span>

<span class="c1">-- Examples:
</span><span class="c1">-- Create a SUBSCRIPTION on database &#39;mydb&#39; and retention policy &#39;autogen&#39; that sends data to &#39;example.com:9090&#39; via HTTP.
</span><span class="c1"></span><span class="k">CREATE</span> <span class="n">SUBSCRIPTION</span> <span class="s2">&#34;sub0&#34;</span> <span class="k">ON</span> <span class="s2">&#34;mydb&#34;</span><span class="p">.</span><span class="s2">&#34;autogen&#34;</span> <span class="n">DESTINATIONS</span> <span class="k">ALL</span> <span class="s1">&#39;http://example.com:9090&#39;</span>

<span class="c1">-- Create a SUBSCRIPTION on database &#39;mydb&#39; and retention policy &#39;autogen&#39; that round-robins the data to &#39;h1.example.com:9090&#39; and &#39;h2.example.com:9090&#39; via UDP.
</span><span class="c1"></span><span class="k">CREATE</span> <span class="n">SUBSCRIPTION</span> <span class="s2">&#34;sub0&#34;</span> <span class="k">ON</span> <span class="s2">&#34;mydb&#34;</span><span class="p">.</span><span class="s2">&#34;autogen&#34;</span> <span class="n">DESTINATIONS</span> <span class="k">ANY</span> <span class="s1">&#39;udp://h1.example.com:9090&#39;</span><span class="p">,</span> <span class="s1">&#39;udp://h2.example.com:9090&#39;</span></code></pre></div>
<p>In case authentication is enabled on the subscriber host, adapt the URL to contain the credentials.</p>

<pre><code>-- Create a SUBSCRIPTION on database &#39;mydb&#39; and retention policy &#39;autogen&#39; that sends data to another InfluxDB on &#39;example.com:8086&#39; via HTTP. Authentication is enabled on the subscription host (user: subscriber, pass: secret).
CREATE SUBSCRIPTION &#34;sub0&#34; ON &#34;mydb&#34;.&#34;autogen&#34; DESTINATIONS ALL &#39;http://subscriber:secret@example.com:8086&#39;
</code></pre>


<div class="warn">
  <p><code>SHOW SUBSCRIPTIONS</code> outputs all subscriber URL in plain text, including those with authentication credentials.
Any user with the privileges to run <code>SHOW SUBSCRIPTIONS</code> is able to see these credentials.</p>

</div>


<h3 id="sending-subscription-data-to-multiple-hosts">Sending subscription data to multiple hosts</h3>

<p>The <code>CREATE SUBSCRIPTION</code> statement allows you to specify multiple hosts as endpoints for the subscription.
In your <code>DESTINATIONS</code> clause, you can pass multiple host strings separated by commas.
Using <code>ALL</code> or <code>ANY</code> in the <code>DESTINATIONS</code> clause determines how InfluxDB writes data to each endpoint:</p>

<p><code>ALL</code>: Writes data to all specified hosts.</p>

<p><code>ANY</code>: Round-robins writes between specified hosts.</p>

<p><em><strong>Subscriptions with multiple hosts</strong></em></p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="c1">-- Write all data to multiple hosts
</span><span class="c1"></span><span class="k">CREATE</span> <span class="n">SUBSCRIPTION</span> <span class="s2">&#34;mysub&#34;</span> <span class="k">ON</span> <span class="s2">&#34;mydb&#34;</span><span class="p">.</span><span class="s2">&#34;autogen&#34;</span> <span class="n">DESTINATIONS</span> <span class="k">ALL</span> <span class="s1">&#39;http://host1.example.com:9090&#39;</span><span class="p">,</span> <span class="s1">&#39;http://host2.example.com:9090&#39;</span>

<span class="c1">-- Round-robin writes between multiple hosts
</span><span class="c1"></span><span class="k">CREATE</span> <span class="n">SUBSCRIPTION</span> <span class="s2">&#34;mysub&#34;</span> <span class="k">ON</span> <span class="s2">&#34;mydb&#34;</span><span class="p">.</span><span class="s2">&#34;autogen&#34;</span> <span class="n">DESTINATIONS</span> <span class="k">ANY</span> <span class="s1">&#39;http://host1.example.com:9090&#39;</span><span class="p">,</span> <span class="s1">&#39;http://host2.example.com:9090&#39;</span></code></pre></div>
<h3 id="subscription-protocols">Subscription protocols</h3>

<p>Subscriptions can use HTTP, HTTPS, or UDP transport protocols.
Which to use is determined by the protocol expected by the subscription endpoint.
If creating a Kapacitor subscription, this is defined by the <code>subscription-protocol</code>
option in the <code>[[influxdb]]</code> section of your <a href="https://docs.influxdata.com/kapacitor/latest/administration/subscription-management/#subscription-protocol"><code>kapacitor.conf</code></a>.</p>

<p><em><strong>kapacitor.conf</strong></em></p>
<div class="highlight"><pre class="chroma"><code class="language-toml" data-lang="toml"><span class="p">[[</span><span class="nx">influxdb</span><span class="p">]]</span>

  <span class="c"># ...</span>

  <span class="nx">subscription</span><span class="err">-</span><span class="nx">protocol</span> <span class="p">=</span> <span class="s2">&#34;http&#34;</span>

  <span class="c"># ...</span></code></pre></div>
<p><em>For information regarding HTTPS connections and secure communication between InfluxDB and Kapacitor,
view the <a href="https://docs.influxdata.com/kapacitor/v1.5/administration/security/#secure-influxdb-and-kapacitor">Kapacitor security</a> documentation.</em></p>

<h2 id="show-subscriptions">Show subscriptions</h2>

<p>The <code>SHOW SUBSCRIPTIONS</code> InfluxQL statement returns a list of all subscriptions registered in InfluxDB.</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">SHOW</span> <span class="n">SUBSCRIPTIONS</span></code></pre></div>
<p><em><strong>Example output:</strong></em></p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">name: _internal
retention_policy name                                           mode destinations
---------------- ----                                           ---- ------------
monitor          kapacitor-39545771-7b64-4692-ab8f-1796c07f3314 ANY  <span class="o">[</span>http://localhost:9092<span class="o">]</span></code></pre></div>
<h2 id="remove-subscriptions">Remove subscriptions</h2>

<p>Remove or drop subscriptions using the <code>DROP SUBSCRIPTION</code> InfluxQL statement.</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="c1">-- Pattern:
</span><span class="c1"></span><span class="k">DROP</span> <span class="n">SUBSCRIPTION</span> <span class="s2">&#34;&lt;subscription_name&gt;&#34;</span> <span class="k">ON</span> <span class="s2">&#34;&lt;db_name&gt;&#34;</span><span class="p">.</span><span class="s2">&#34;&lt;retention_policy&gt;&#34;</span>

<span class="c1">-- Example:
</span><span class="c1"></span><span class="k">DROP</span> <span class="n">SUBSCRIPTION</span> <span class="s2">&#34;sub0&#34;</span> <span class="k">ON</span> <span class="s2">&#34;mydb&#34;</span><span class="p">.</span><span class="s2">&#34;autogen&#34;</span></code></pre></div>
<h3 id="drop-all-subscriptions">Drop all subscriptions</h3>

<p>In some cases, it may be necessary to remove all subscriptions.
Run the following bash script that utilizes the <code>influx</code> CLI, loops through all subscriptions, and removes them.
This script depends on the <code>$INFLUXUSER</code> and <code>$INFLUXPASS</code> environment variables.
If these are not set, export them as part of the script.</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># Environment variable exports:
</span><span class="c1"># Uncomment these if INFLUXUSER and INFLUXPASS are not already globally set.
</span><span class="c1"># export INFLUXUSER=influxdb-username
</span><span class="c1"># export INFLUXPASS=influxdb-password
</span><span class="c1"></span>
<span class="nv">IFS</span><span class="o">=</span><span class="s1">$&#39;\n&#39;</span><span class="p">;</span> <span class="k">for</span> i in <span class="k">$(</span>influx -format csv -username <span class="nv">$INFLUXUSER</span> -password <span class="nv">$INFLUXPASS</span> -database _internal -execute <span class="s1">&#39;show subscriptions&#39;</span> <span class="p">|</span> tail -n +2 <span class="p">|</span> grep -v name<span class="k">)</span><span class="p">;</span> <span class="k">do</span> influx -format csv -username <span class="nv">$INFLUXUSER</span> -password <span class="nv">$INFLUXPASS</span> -database _internal -execute <span class="s2">&#34;drop subscription \&#34;</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$i</span><span class="s2">&#34;</span> <span class="p">|</span> cut -f <span class="m">3</span> -d <span class="s1">&#39;,&#39;</span><span class="k">)</span><span class="s2">\&#34; ON \&#34;</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$i</span><span class="s2">&#34;</span> <span class="p">|</span> cut -f <span class="m">1</span> -d <span class="s1">&#39;,&#39;</span><span class="k">)</span><span class="s2">\&#34;.\&#34;</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$i</span><span class="s2">&#34;</span> <span class="p">|</span> cut -f <span class="m">2</span> -d <span class="s1">&#39;,&#39;</span><span class="k">)</span><span class="s2">\&#34;&#34;</span><span class="p">;</span> <span class="k">done</span></code></pre></div>
<h2 id="configure-influxdb-subscriptions">Configure InfluxDB subscriptions</h2>

<p>InfluxDB subscription configuration options are available in the <code>[subscriber]</code>
section of the <code>influxdb.conf</code>.
In order to use subcriptions, the <code>enabled</code> option in the <code>[subscriber]</code> section must be set to <code>true</code>.
Below is an example <code>influxdb.conf</code> subscriber configuration:</p>
<div class="highlight"><pre class="chroma"><code class="language-toml" data-lang="toml"><span class="p">[</span><span class="nx">subscriber</span><span class="p">]</span>
  <span class="nx">enabled</span> <span class="p">=</span> <span class="kc">true</span>
  <span class="nx">http</span><span class="err">-</span><span class="nx">timeout</span> <span class="p">=</span> <span class="s2">&#34;30s&#34;</span>
  <span class="nx">insecure</span><span class="err">-</span><span class="nx">skip</span><span class="err">-</span><span class="nx">verify</span> <span class="p">=</span> <span class="kc">false</span>
  <span class="nx">ca</span><span class="err">-</span><span class="nx">certs</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
  <span class="nx">write</span><span class="err">-</span><span class="nx">concurrency</span> <span class="p">=</span> <span class="mi">40</span>
  <span class="nx">write</span><span class="err">-</span><span class="nx">buffer</span><span class="err">-</span><span class="nx">size</span> <span class="p">=</span> <span class="mi">1000</span></code></pre></div>
<p><em><strong>Descriptions of <code>[subscriber]</code> configuration options are available in the <a href="../config.html#subscription-settings">Configuring InfluxDB</a> documentation.</strong></em></p>

<h2 id="troubleshooting">Troubleshooting</h2>

<h3 id="inaccessible-or-decommissioned-subscription-endpoints">Inaccessible or decommissioned subscription endpoints</h3>

<p>Unless a subscription is <a href="index.html#remove-subscriptions">dropped</a>, InfluxDB assumes the endpoint
should always receive data and will continue to attempt to send data.
If an endpoint host is inaccessible or has been decommissioned, you will see errors
similar to the following:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># Some message content omitted (...) for the sake of brevity
</span><span class="c1"></span><span class="s2">&#34;Post http://x.y.z.a:9092/write?consistency=...: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers)&#34;</span> ... <span class="nv">service</span><span class="o">=</span>subscriber
<span class="s2">&#34;Post http://x.y.z.a:9092/write?consistency=...: dial tcp x.y.z.a:9092: getsockopt: connection refused&#34;</span> ... <span class="nv">service</span><span class="o">=</span>subscriber
<span class="s2">&#34;Post http://x.y.z.a:9092/write?consistency=...: dial tcp 172.31.36.5:9092: getsockopt: no route to host&#34;</span> ... <span class="nv">service</span><span class="o">=</span>subscriber</code></pre></div>
<p>In some cases, this may be caused by a networking error or something similar
preventing a successful connection to the subscription endpoint.
In other cases, it&rsquo;s because the subscription endpoint no longer exists and
the subscription hasn&rsquo;t been dropped from InfluxDB.</p>

<blockquote>
<p>Because InfluxDB does not know if a subscription endpoint will or will not become accessible again,
subscriptions are not automatically dropped when an endpoint becomes inaccessible.
If a subscription endpoint is removed, you must manually <a href="index.html#remove-subscriptions">drop the subscription</a> from InfluxDB.</p>
</blockquote>

		</div>
	</section>
	
<section class="article-section article-footer">
	<div class="article-content">
		<p><span class="icon logo" style="margin-right: 1em;"></span> This documentation is <a href="https://github.com/influxdata/docs.influxdata.com/blob/master/content/influxdb/v1.7/administration/subscription-management.md">open source</a>. See a typo? Please, open an <a href="https://github.com/influxdata/docs.influxdata.com/issues/new">issue</a>.</p>
		<br/>
		<p><span class="icon bubbles2" style="margin-right: 1em;"></span><strong>Need help getting up and running?</strong> <a href="https://www.influxdata.com/products/services/" target="_blank">Get Support</a></p>
	</div>
</section>


</article>
<script>window.jQuery || document.write('<script src="../../../../js/vendor/jquery-2.1.4.min.js"><\/script>')</script>

<script src="../../../../js/docs-interactions.js" type="text/javascript"></script>
<script>
  $("h2, h3, h4").each(function() {
  var link = "<a href="https://docs.influxdata.com/influxdb/v1.7/administration/subscription-management/\&quot;#"" + $(this).attr("id") + "\"></a>"
  $(this).wrapInner( link );
  })
</script>
<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-45024174-5', 'auto');ga('send', 'pageview');</script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript">
  docsearch({
    apiKey: 'ba4435a9d456ac0d954cc276206eac06',
    appId: 'WHM9UWMP6M',
    indexName: 'influxdata',
    inputSelector: '#algolia-search-input',
    algoliaOptions: {
      hitsPerPage: 15,
      facets: [ "project", "version", "latest"],
      facetFilters: [ "latest:true" ]
    }
  });
</script>



<div class="modal-overlay"></div>
<div id="chronograf-url-modal" class="modal-content">
    <label>Chronograf Data Explorer URL</label>
    <form class="flex-form" id="save-chronograf-url">
        <input type="text" id="chronograf-url" name="chronograf-url"/>
        <button class="save-btn"><span>Save</span></button>
    </form>
    <a id="default-chronograf-url">Revert to Default</a>
</div>

</body></html>